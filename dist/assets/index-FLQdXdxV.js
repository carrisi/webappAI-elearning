function a1(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in n)){const c=Object.getOwnPropertyDescriptor(s,a);c&&Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function Nu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qp={exports:{}},$c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE;function o1(){if(cE)return $c;cE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,c){var d=null;if(c!==void 0&&(d=""+c),a.key!==void 0&&(d=""+a.key),"key"in a){c={};for(var m in a)m!=="key"&&(c[m]=a[m])}else c=a;return a=c.ref,{$$typeof:n,type:s,key:d,ref:a!==void 0?a:null,props:c}}return $c.Fragment=e,$c.jsx=t,$c.jsxs=t,$c}var uE;function l1(){return uE||(uE=1,Qp.exports=o1()),Qp.exports}var l=l1(),Yp={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function c1(){if(dE)return Ve;dE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.iterator;function T(z){return z===null||typeof z!="object"?null:(z=x&&z[x]||z["@@iterator"],typeof z=="function"?z:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,k={};function I(z,G,ae){this.props=z,this.context=G,this.refs=k,this.updater=ae||S}I.prototype.isReactComponent={},I.prototype.setState=function(z,G){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,G,"setState")},I.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function Y(){}Y.prototype=I.prototype;function $(z,G,ae){this.props=z,this.context=G,this.refs=k,this.updater=ae||S}var B=$.prototype=new Y;B.constructor=$,j(B,I.prototype),B.isPureReactComponent=!0;var q=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function M(z,G,ae,ue,pe,xe){return ae=xe.ref,{$$typeof:n,type:z,key:G,ref:ae!==void 0?ae:null,props:xe}}function N(z,G){return M(z.type,G,void 0,void 0,void 0,z.props)}function O(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function D(z){var G={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ae){return G[ae]})}var P=/\/+/g;function L(z,G){return typeof z=="object"&&z!==null&&z.key!=null?D(""+z.key):G.toString(36)}function C(){}function ve(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(C,C):(z.status="pending",z.then(function(G){z.status==="pending"&&(z.status="fulfilled",z.value=G)},function(G){z.status==="pending"&&(z.status="rejected",z.reason=G)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function we(z,G,ae,ue,pe){var xe=typeof z;(xe==="undefined"||xe==="boolean")&&(z=null);var Se=!1;if(z===null)Se=!0;else switch(xe){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(z.$$typeof){case n:case e:Se=!0;break;case y:return Se=z._init,we(Se(z._payload),G,ae,ue,pe)}}if(Se)return pe=pe(z),Se=ue===""?"."+L(z,0):ue,q(pe)?(ae="",Se!=null&&(ae=Se.replace(P,"$&/")+"/"),we(pe,G,ae,"",function(St){return St})):pe!=null&&(O(pe)&&(pe=N(pe,ae+(pe.key==null||z&&z.key===pe.key?"":(""+pe.key).replace(P,"$&/")+"/")+Se)),G.push(pe)),1;Se=0;var rt=ue===""?".":ue+":";if(q(z))for(var Ue=0;Ue<z.length;Ue++)ue=z[Ue],xe=rt+L(ue,Ue),Se+=we(ue,G,ae,xe,pe);else if(Ue=T(z),typeof Ue=="function")for(z=Ue.call(z),Ue=0;!(ue=z.next()).done;)ue=ue.value,xe=rt+L(ue,Ue++),Se+=we(ue,G,ae,xe,pe);else if(xe==="object"){if(typeof z.then=="function")return we(ve(z),G,ae,ue,pe);throw G=String(z),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Se}function X(z,G,ae){if(z==null)return z;var ue=[],pe=0;return we(z,ue,"","",function(xe){return G.call(ae,xe,pe++)}),ue}function re(z){if(z._status===-1){var G=z._result;G=G(),G.then(function(ae){(z._status===0||z._status===-1)&&(z._status=1,z._result=ae)},function(ae){(z._status===0||z._status===-1)&&(z._status=2,z._result=ae)}),z._status===-1&&(z._status=0,z._result=G)}if(z._status===1)return z._result.default;throw z._result}var J=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function me(){}return Ve.Children={map:X,forEach:function(z,G,ae){X(z,function(){G.apply(this,arguments)},ae)},count:function(z){var G=0;return X(z,function(){G++}),G},toArray:function(z){return X(z,function(G){return G})||[]},only:function(z){if(!O(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Ve.Component=I,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=$,Ve.StrictMode=s,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(z){return H.H.useMemoCache(z)}},Ve.cache=function(z){return function(){return z.apply(null,arguments)}},Ve.cloneElement=function(z,G,ae){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ue=j({},z.props),pe=z.key,xe=void 0;if(G!=null)for(Se in G.ref!==void 0&&(xe=void 0),G.key!==void 0&&(pe=""+G.key),G)!K.call(G,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&G.ref===void 0||(ue[Se]=G[Se]);var Se=arguments.length-2;if(Se===1)ue.children=ae;else if(1<Se){for(var rt=Array(Se),Ue=0;Ue<Se;Ue++)rt[Ue]=arguments[Ue+2];ue.children=rt}return M(z.type,pe,void 0,void 0,xe,ue)},Ve.createContext=function(z){return z={$$typeof:d,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:c,_context:z},z},Ve.createElement=function(z,G,ae){var ue,pe={},xe=null;if(G!=null)for(ue in G.key!==void 0&&(xe=""+G.key),G)K.call(G,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(pe[ue]=G[ue]);var Se=arguments.length-2;if(Se===1)pe.children=ae;else if(1<Se){for(var rt=Array(Se),Ue=0;Ue<Se;Ue++)rt[Ue]=arguments[Ue+2];pe.children=rt}if(z&&z.defaultProps)for(ue in Se=z.defaultProps,Se)pe[ue]===void 0&&(pe[ue]=Se[ue]);return M(z,xe,void 0,void 0,null,pe)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(z){return{$$typeof:m,render:z}},Ve.isValidElement=O,Ve.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:re}},Ve.memo=function(z,G){return{$$typeof:g,type:z,compare:G===void 0?null:G}},Ve.startTransition=function(z){var G=H.T,ae={};H.T=ae;try{var ue=z(),pe=H.S;pe!==null&&pe(ae,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(me,J)}catch(xe){J(xe)}finally{H.T=G}},Ve.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Ve.use=function(z){return H.H.use(z)},Ve.useActionState=function(z,G,ae){return H.H.useActionState(z,G,ae)},Ve.useCallback=function(z,G){return H.H.useCallback(z,G)},Ve.useContext=function(z){return H.H.useContext(z)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(z,G){return H.H.useDeferredValue(z,G)},Ve.useEffect=function(z,G,ae){var ue=H.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(z,G)},Ve.useId=function(){return H.H.useId()},Ve.useImperativeHandle=function(z,G,ae){return H.H.useImperativeHandle(z,G,ae)},Ve.useInsertionEffect=function(z,G){return H.H.useInsertionEffect(z,G)},Ve.useLayoutEffect=function(z,G){return H.H.useLayoutEffect(z,G)},Ve.useMemo=function(z,G){return H.H.useMemo(z,G)},Ve.useOptimistic=function(z,G){return H.H.useOptimistic(z,G)},Ve.useReducer=function(z,G,ae){return H.H.useReducer(z,G,ae)},Ve.useRef=function(z){return H.H.useRef(z)},Ve.useState=function(z){return H.H.useState(z)},Ve.useSyncExternalStore=function(z,G,ae){return H.H.useSyncExternalStore(z,G,ae)},Ve.useTransition=function(){return H.H.useTransition()},Ve.version="19.1.0",Ve}var hE;function vv(){return hE||(hE=1,Yp.exports=c1()),Yp.exports}var b=vv();const mn=Nu(b),u1=a1({__proto__:null,default:mn},[b]);var Xp={exports:{}},Gc={},Wp={exports:{}},Zp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE;function d1(){return fE||(fE=1,function(n){function e(X,re){var J=X.length;X.push(re);e:for(;0<J;){var me=J-1>>>1,z=X[me];if(0<a(z,re))X[me]=re,X[J]=z,J=me;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var re=X[0],J=X.pop();if(J!==re){X[0]=J;e:for(var me=0,z=X.length,G=z>>>1;me<G;){var ae=2*(me+1)-1,ue=X[ae],pe=ae+1,xe=X[pe];if(0>a(ue,J))pe<z&&0>a(xe,ue)?(X[me]=xe,X[pe]=J,me=pe):(X[me]=ue,X[ae]=J,me=ae);else if(pe<z&&0>a(xe,J))X[me]=xe,X[pe]=J,me=pe;else break e}}return re}function a(X,re){var J=X.sortIndex-re.sortIndex;return J!==0?J:X.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();n.unstable_now=function(){return d.now()-m}}var p=[],g=[],y=1,x=null,T=3,S=!1,j=!1,k=!1,I=!1,Y=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function q(X){for(var re=t(g);re!==null;){if(re.callback===null)s(g);else if(re.startTime<=X)s(g),re.sortIndex=re.expirationTime,e(p,re);else break;re=t(g)}}function H(X){if(k=!1,q(X),!j)if(t(p)!==null)j=!0,K||(K=!0,L());else{var re=t(g);re!==null&&we(H,re.startTime-X)}}var K=!1,M=-1,N=5,O=-1;function D(){return I?!0:!(n.unstable_now()-O<N)}function P(){if(I=!1,K){var X=n.unstable_now();O=X;var re=!0;try{e:{j=!1,k&&(k=!1,$(M),M=-1),S=!0;var J=T;try{t:{for(q(X),x=t(p);x!==null&&!(x.expirationTime>X&&D());){var me=x.callback;if(typeof me=="function"){x.callback=null,T=x.priorityLevel;var z=me(x.expirationTime<=X);if(X=n.unstable_now(),typeof z=="function"){x.callback=z,q(X),re=!0;break t}x===t(p)&&s(p),q(X)}else s(p);x=t(p)}if(x!==null)re=!0;else{var G=t(g);G!==null&&we(H,G.startTime-X),re=!1}}break e}finally{x=null,T=J,S=!1}re=void 0}}finally{re?L():K=!1}}}var L;if(typeof B=="function")L=function(){B(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ve=C.port2;C.port1.onmessage=P,L=function(){ve.postMessage(null)}}else L=function(){Y(P,0)};function we(X,re){M=Y(function(){X(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(X){switch(T){case 1:case 2:case 3:var re=3;break;default:re=T}var J=T;T=re;try{return X()}finally{T=J}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var J=T;T=X;try{return re()}finally{T=J}},n.unstable_scheduleCallback=function(X,re,J){var me=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?me+J:me):J=me,X){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=J+z,X={id:y++,callback:re,priorityLevel:X,startTime:J,expirationTime:z,sortIndex:-1},J>me?(X.sortIndex=J,e(g,X),t(p)===null&&X===t(g)&&(k?($(M),M=-1):k=!0,we(H,J-me))):(X.sortIndex=z,e(p,X),j||S||(j=!0,K||(K=!0,L()))),X},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(X){var re=T;return function(){var J=T;T=re;try{return X.apply(this,arguments)}finally{T=J}}}}(Zp)),Zp}var mE;function h1(){return mE||(mE=1,Wp.exports=d1()),Wp.exports}var Jp={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function f1(){if(pE)return Tn;pE=1;var n=vv();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(p,g,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:p,containerInfo:g,implementation:y}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Tn.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(p,g,null,y)},Tn.flushSync=function(p){var g=d.T,y=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=g,s.p=y,s.d.f()}},Tn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Tn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Tn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:S}):y==="script"&&s.d.X(p,{crossOrigin:x,integrity:T,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Tn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Tn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin);s.d.L(p,y,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Tn.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Tn.requestFormReset=function(p){s.d.r(p)},Tn.unstable_batchedUpdates=function(p,g){return p(g)},Tn.useFormState=function(p,g,y){return d.H.useFormState(p,g,y)},Tn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Tn.version="19.1.0",Tn}var gE;function FT(){if(gE)return Jp.exports;gE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jp.exports=f1(),Jp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE;function m1(){if(vE)return Gc;vE=1;var n=h1(),e=vv(),t=FT();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function c(i){var r=i,o=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(o=r.return),i=r.return;while(i)}return r.tag===3?o:null}function d(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function m(i){if(c(i)!==i)throw Error(s(188))}function p(i){var r=i.alternate;if(!r){if(r=c(i),r===null)throw Error(s(188));return r!==i?null:i}for(var o=i,u=r;;){var f=o.return;if(f===null)break;var v=f.alternate;if(v===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===v.child){for(v=f.child;v;){if(v===o)return m(f),i;if(v===u)return m(f),r;v=v.sibling}throw Error(s(188))}if(o.return!==u.return)o=f,u=v;else{for(var w=!1,A=f.child;A;){if(A===o){w=!0,o=f,u=v;break}if(A===u){w=!0,u=f,o=v;break}A=A.sibling}if(!w){for(A=v.child;A;){if(A===o){w=!0,o=v,u=f;break}if(A===u){w=!0,u=v,o=f;break}A=A.sibling}if(!w)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:r}function g(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=g(i),r!==null)return r;i=i.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),B=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function ve(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case I:return"Profiler";case k:return"StrictMode";case H:return"Suspense";case K:return"SuspenseList";case O:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case B:return(i.displayName||"Context")+".Provider";case $:return(i._context.displayName||"Context")+".Consumer";case q:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return r=i.displayName||null,r!==null?r:ve(i.type)||"Memo";case N:r=i._payload,i=i._init;try{return ve(i(r))}catch{}}return null}var we=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},me=[],z=-1;function G(i){return{current:i}}function ae(i){0>z||(i.current=me[z],me[z]=null,z--)}function ue(i,r){z++,me[z]=i.current,i.current=r}var pe=G(null),xe=G(null),Se=G(null),rt=G(null);function Ue(i,r){switch(ue(Se,r),ue(xe,i),ue(pe,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Lb(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Lb(r),i=Vb(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ae(pe),ue(pe,i)}function St(){ae(pe),ae(xe),ae(Se)}function an(i){i.memoizedState!==null&&ue(rt,i);var r=pe.current,o=Vb(r,i.type);r!==o&&(ue(xe,i),ue(pe,o))}function Xt(i){xe.current===i&&(ae(pe),ae(xe)),rt.current===i&&(ae(rt),Uc._currentValue=J)}var vn=Object.prototype.hasOwnProperty,yn=n.unstable_scheduleCallback,_n=n.unstable_cancelCallback,nt=n.unstable_shouldYield,ni=n.unstable_requestPaint,jt=n.unstable_now,ua=n.unstable_getCurrentPriorityLevel,hs=n.unstable_ImmediatePriority,xn=n.unstable_UserBlockingPriority,kn=n.unstable_NormalPriority,ir=n.unstable_LowPriority,bi=n.unstable_IdlePriority,ii=n.log,fs=n.unstable_setDisableYieldValue,Ne=null,Be=null;function qt(i){if(typeof ii=="function"&&fs(i),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(Ne,i)}catch{}}var bn=Math.clz32?Math.clz32:da,Wu=Math.log,Xf=Math.LN2;function da(i){return i>>>=0,i===0?32:31-(Wu(i)/Xf|0)|0}var ha=256,fa=4194304;function Ei(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function uo(i,r,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,v=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var A=u&134217727;return A!==0?(u=A&~v,u!==0?f=Ei(u):(w&=A,w!==0?f=Ei(w):o||(o=A&~i,o!==0&&(f=Ei(o))))):(A=u&~v,A!==0?f=Ei(A):w!==0?f=Ei(w):o||(o=u&~i,o!==0&&(f=Ei(o)))),f===0?0:r!==0&&r!==f&&(r&v)===0&&(v=f&-f,o=r&-r,v>=o||v===32&&(o&4194048)!==0)?r:f}function ma(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Ul(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bl(){var i=ha;return ha<<=1,(ha&4194048)===0&&(ha=256),i}function ql(){var i=fa;return fa<<=1,(fa&62914560)===0&&(fa=4194304),i}function ms(i){for(var r=[],o=0;31>o;o++)r.push(i);return r}function ps(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Fl(i,r,o,u,f,v){var w=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var A=i.entanglements,U=i.expirationTimes,ee=i.hiddenUpdates;for(o=w&~o;0<o;){var se=31-bn(o),de=1<<se;A[se]=0,U[se]=-1;var te=ee[se];if(te!==null)for(ee[se]=null,se=0;se<te.length;se++){var ne=te[se];ne!==null&&(ne.lane&=-536870913)}o&=~de}u!==0&&Di(i,u,0),v!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=v&~(w&~r))}function Di(i,r,o){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-bn(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function Hl(i,r){var o=i.entangledLanes|=r;for(i=i.entanglements;o;){var u=31-bn(o),f=1<<u;f&r|i[u]&r&&(i[u]|=r),o&=~f}}function sr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ho(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function rr(){var i=re.p;return i!==0?i:(i=window.event,i===void 0?32:iE(i.type))}function Zu(i,r){var o=re.p;try{return re.p=i,r()}finally{re.p=o}}var bt=Math.random().toString(36).slice(2),Ft="__reactFiber$"+bt,kt="__reactProps$"+bt,si="__reactContainer$"+bt,$l="__reactEvents$"+bt,Wf="__reactListeners$"+bt,ar="__reactHandles$"+bt,Ju="__reactResources$"+bt,pa="__reactMarker$"+bt;function or(i){delete i[Ft],delete i[kt],delete i[$l],delete i[Wf],delete i[ar]}function gs(i){var r=i[Ft];if(r)return r;for(var o=i.parentNode;o;){if(r=o[si]||o[Ft]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(i=qb(i);i!==null;){if(o=i[Ft])return o;i=qb(i)}return r}i=o,o=i.parentNode}return null}function Mi(i){if(i=i[Ft]||i[si]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function ki(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Rn(i){var r=i[Ju];return r||(r=i[Ju]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ct(i){i[pa]=!0}var Gl=new Set,fo={};function Ti(i,r){vs(i,r),vs(i+"Capture",r)}function vs(i,r){for(fo[i]=r,i=0;i<r.length;i++)Gl.add(r[i])}var ed=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),td={},ga={};function nd(i){return vn.call(ga,i)?!0:vn.call(td,i)?!1:ed.test(i)?ga[i]=!0:(td[i]=!0,!1)}function lr(i,r,o){if(nd(r))if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+o)}}function Pi(i,r,o){if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+o)}}function on(i,r,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(r,o,""+u)}}var va,id;function ys(i){if(va===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);va=r&&r[1]||"",id=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+va+i+id}var mo=!1;function po(i,r){if(!i||mo)return"";mo=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ne){var te=ne}Reflect.construct(i,[],de)}else{try{de.call()}catch(ne){te=ne}i.call(de.prototype)}}else{try{throw Error()}catch(ne){te=ne}(de=i())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),w=v[0],A=v[1];if(w&&A){var U=w.split(`
`),ee=A.split(`
`);for(f=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(u===U.length||f===ee.length)for(u=U.length-1,f=ee.length-1;1<=u&&0<=f&&U[u]!==ee[f];)f--;for(;1<=u&&0<=f;u--,f--)if(U[u]!==ee[f]){if(u!==1||f!==1)do if(u--,f--,0>f||U[u]!==ee[f]){var se=`
`+U[u].replace(" at new "," at ");return i.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",i.displayName)),se}while(1<=u&&0<=f);break}}}finally{mo=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?ys(o):""}function Kl(i){switch(i.tag){case 26:case 27:case 5:return ys(i.type);case 16:return ys("Lazy");case 13:return ys("Suspense");case 19:return ys("SuspenseList");case 0:case 15:return po(i.type,!1);case 11:return po(i.type.render,!1);case 1:return po(i.type,!0);case 31:return ys("Activity");default:return""}}function go(i){try{var r="";do r+=Kl(i),i=i.return;while(i);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function In(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ql(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Zf(i){var r=Ql(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),u=""+i[r];if(!i.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,v=o.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return f.call(this)},set:function(w){u=""+w,v.call(this,w)}}),Object.defineProperty(i,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function vo(i){i._valueTracker||(i._valueTracker=Zf(i))}function Yl(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return i&&(u=Ql(i)?i.checked?"true":"false":i.value),i=u,i!==o?(r.setValue(i),!0):!1}function ya(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Jf=/[\n"\\]/g;function Pt(i){return i.replace(Jf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Hn(i,r,o,u,f,v,w,A){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),r!=null?w==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+In(r)):i.value!==""+In(r)&&(i.value=""+In(r)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),r!=null?cr(i,w,In(r)):o!=null?cr(i,w,In(o)):u!=null&&i.removeAttribute("value"),f==null&&v!=null&&(i.defaultChecked=!!v),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+In(A):i.removeAttribute("name")}function _a(i,r,o,u,f,v,w,A){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||r!=null))return;o=o!=null?""+In(o):"",r=r!=null?""+In(r):o,A||r===i.value||(i.value=r),i.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=A?i.checked:!!u,i.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function cr(i,r,o){r==="number"&&ya(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function _s(i,r,o,u){if(i=i.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=r.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+In(o),r=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}r!==null||i[f].disabled||(r=i[f])}r!==null&&(r.selected=!0)}}function dt(i,r,o){if(r!=null&&(r=""+In(r),r!==i.value&&(i.value=r),o==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=o!=null?""+In(o):""}function xa(i,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(s(92));if(we(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=In(r),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function ri(i,r){if(r){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=r;return}}i.textContent=r}var ba=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sd(i,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,o):typeof o!="number"||o===0||ba.has(r)?r==="float"?i.cssFloat=o:i[r]=(""+o).trim():i[r]=o+"px"}function Xl(i,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&sd(i,f,u)}else for(var v in r)r.hasOwnProperty(v)&&sd(i,v,r[v])}function Wl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var em=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yo(i){return tm.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var xs=null;function ai(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var bs=null,Es=null;function Zl(i){var r=Mi(i);if(r&&(i=r.stateNode)){var o=i[kt]||null;e:switch(i=r.stateNode,r.type){case"input":if(Hn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pt(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==i&&u.form===i.form){var f=u[kt]||null;if(!f)throw Error(s(90));Hn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===i.form&&Yl(u)}break e;case"textarea":dt(i,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&_s(i,!!o.multiple,r,!1)}}}var Li=!1;function rd(i,r,o){if(Li)return i(r,o);Li=!0;try{var u=i(r);return u}finally{if(Li=!1,(bs!==null||Es!==null)&&(Zd(),bs&&(r=bs,i=Es,Es=bs=null,Zl(r),i)))for(r=0;r<i.length;r++)Zl(i[r])}}function Ea(i,r){var o=i.stateNode;if(o===null)return null;var u=o[kt]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oi=!1;if(wi)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){oi=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{oi=!1}var Vi=null,ur=null,Ts=null;function Jl(){if(Ts)return Ts;var i,r=ur,o=r.length,u,f="value"in Vi?Vi.value:Vi.textContent,v=f.length;for(i=0;i<o&&r[i]===f[i];i++);var w=o-i;for(u=1;u<=w&&r[o-u]===f[v-u];u++);return Ts=f.slice(i,1<u?1-u:void 0)}function zi(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Ui(){return!0}function ec(){return!1}function Wt(i){function r(o,u,f,v,w){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=v,this.target=w,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(o=i[A],this[A]=o?o(v):v[A]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ui:ec,this.isPropagationStopped=ec,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),r}var ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=Wt(ot),wa=y({},ot,{view:0,detail:0}),ad=Wt(wa),xo,bo,Bi,Sa=y({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ja,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Bi&&(Bi&&i.type==="mousemove"?(xo=i.screenX-Bi.screenX,bo=i.screenY-Bi.screenY):bo=xo=0,Bi=i),xo)},movementY:function(i){return"movementY"in i?i.movementY:bo}}),li=Wt(Sa),od=y({},Sa,{dataTransfer:0}),nm=Wt(od),Aa=y({},wa,{relatedTarget:0}),Eo=Wt(Aa),tc=y({},ot,{animationName:0,elapsedTime:0,pseudoElement:0}),To=Wt(tc),ld=y({},ot,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),wo=Wt(ld),im=y({},ot,{data:0}),nc=Wt(im),Na={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ud={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ic(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=ud[i])?!!r[i]:!1}function ja(){return ic}var dd=y({},wa,{key:function(i){if(i.key){var r=Na[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=zi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?cd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ja,charCode:function(i){return i.type==="keypress"?zi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?zi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),So=Wt(dd),hd=y({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sc=Wt(hd),ws=y({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ja}),fd=Wt(ws),md=y({},ot,{propertyName:0,elapsedTime:0,pseudoElement:0}),pd=Wt(md),gd=y({},Sa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ao=Wt(gd),On=y({},ot,{newState:0,oldState:0}),vd=Wt(On),yd=[9,13,27,32],qi=wi&&"CompositionEvent"in window,h=null;wi&&"documentMode"in document&&(h=document.documentMode);var _=wi&&"TextEvent"in window&&!h,E=wi&&(!qi||h&&8<h&&11>=h),R=" ",W=!1;function ie(i,r){switch(i){case"keyup":return yd.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ge(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Xe=!1;function Ht(i,r){switch(i){case"compositionend":return ge(r);case"keypress":return r.which!==32?null:(W=!0,R);case"textInput":return i=r.data,i===R&&W?null:i;default:return null}}function We(i,r){if(Xe)return i==="compositionend"||!qi&&ie(i,r)?(i=Jl(),Ts=ur=Vi=null,Xe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return E&&r.locale!=="ko"?null:r.data;default:return null}}var Zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $t(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Zt[i.type]:r==="textarea"}function Ss(i,r,o,u){bs?Es?Es.push(u):Es=[u]:bs=u,r=sh(r,"onChange"),0<r.length&&(o=new _o("onChange","change",null,o,u),i.push({event:o,listeners:r}))}var ln=null,Fi=null;function rc(i){Ob(i,0)}function _d(i){var r=ki(i);if(Yl(r))return i}function Jy(i,r){if(i==="change")return r}var e_=!1;if(wi){var sm;if(wi){var rm="oninput"in document;if(!rm){var t_=document.createElement("div");t_.setAttribute("oninput","return;"),rm=typeof t_.oninput=="function"}sm=rm}else sm=!1;e_=sm&&(!document.documentMode||9<document.documentMode)}function n_(){ln&&(ln.detachEvent("onpropertychange",i_),Fi=ln=null)}function i_(i){if(i.propertyName==="value"&&_d(Fi)){var r=[];Ss(r,Fi,i,ai(i)),rd(rc,r)}}function Pj(i,r,o){i==="focusin"?(n_(),ln=r,Fi=o,ln.attachEvent("onpropertychange",i_)):i==="focusout"&&n_()}function Lj(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return _d(Fi)}function Vj(i,r){if(i==="click")return _d(r)}function zj(i,r){if(i==="input"||i==="change")return _d(r)}function Uj(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var $n=typeof Object.is=="function"?Object.is:Uj;function ac(i,r){if($n(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var o=Object.keys(i),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!vn.call(r,f)||!$n(i[f],r[f]))return!1}return!0}function s_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function r_(i,r){var o=s_(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=r&&u>=r)return{node:o,offset:r-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=s_(o)}}function a_(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?a_(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function o_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=ya(i.document);r instanceof i.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)i=r.contentWindow;else break;r=ya(i.document)}return r}function am(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var Bj=wi&&"documentMode"in document&&11>=document.documentMode,No=null,om=null,oc=null,lm=!1;function l_(i,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;lm||No==null||No!==ya(u)||(u=No,"selectionStart"in u&&am(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),oc&&ac(oc,u)||(oc=u,u=sh(om,"onSelect"),0<u.length&&(r=new _o("onSelect","select",null,r,o),i.push({event:r,listeners:u}),r.target=No)))}function Ca(i,r){var o={};return o[i.toLowerCase()]=r.toLowerCase(),o["Webkit"+i]="webkit"+r,o["Moz"+i]="moz"+r,o}var jo={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionrun:Ca("Transition","TransitionRun"),transitionstart:Ca("Transition","TransitionStart"),transitioncancel:Ca("Transition","TransitionCancel"),transitionend:Ca("Transition","TransitionEnd")},cm={},c_={};wi&&(c_=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function Ra(i){if(cm[i])return cm[i];if(!jo[i])return i;var r=jo[i],o;for(o in r)if(r.hasOwnProperty(o)&&o in c_)return cm[i]=r[o];return i}var u_=Ra("animationend"),d_=Ra("animationiteration"),h_=Ra("animationstart"),qj=Ra("transitionrun"),Fj=Ra("transitionstart"),Hj=Ra("transitioncancel"),f_=Ra("transitionend"),m_=new Map,um="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");um.push("scrollEnd");function Si(i,r){m_.set(i,r),Ti(r,[i])}var p_=new WeakMap;function ci(i,r){if(typeof i=="object"&&i!==null){var o=p_.get(i);return o!==void 0?o:(r={value:i,source:r,stack:go(r)},p_.set(i,r),r)}return{value:i,source:r,stack:go(r)}}var ui=[],Co=0,dm=0;function xd(){for(var i=Co,r=dm=Co=0;r<i;){var o=ui[r];ui[r++]=null;var u=ui[r];ui[r++]=null;var f=ui[r];ui[r++]=null;var v=ui[r];if(ui[r++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}v!==0&&g_(o,f,v)}}function bd(i,r,o,u){ui[Co++]=i,ui[Co++]=r,ui[Co++]=o,ui[Co++]=u,dm|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function hm(i,r,o,u){return bd(i,r,o,u),Ed(i)}function Ro(i,r){return bd(i,null,null,r),Ed(i)}function g_(i,r,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,v=i.return;v!==null;)v.childLanes|=o,u=v.alternate,u!==null&&(u.childLanes|=o),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(f=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,f&&r!==null&&(f=31-bn(o),i=v.hiddenUpdates,u=i[f],u===null?i[f]=[r]:u.push(r),r.lane=o|536870912),v):null}function Ed(i){if(50<Oc)throw Oc=0,yp=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Io={};function $j(i,r,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(i,r,o,u){return new $j(i,r,o,u)}function fm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function As(i,r){var o=i.alternate;return o===null?(o=Gn(i.tag,r,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=r,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,r=i.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function v_(i,r){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Td(i,r,o,u,f,v){var w=0;if(u=i,typeof i=="function")fm(i)&&(w=1);else if(typeof i=="string")w=KC(i,o,pe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case O:return i=Gn(31,o,r,f),i.elementType=O,i.lanes=v,i;case j:return Ia(o.children,f,v,r);case k:w=8,f|=24;break;case I:return i=Gn(12,o,r,f|2),i.elementType=I,i.lanes=v,i;case H:return i=Gn(13,o,r,f),i.elementType=H,i.lanes=v,i;case K:return i=Gn(19,o,r,f),i.elementType=K,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Y:case B:w=10;break e;case $:w=9;break e;case q:w=11;break e;case M:w=14;break e;case N:w=16,u=null;break e}w=29,o=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=Gn(w,o,r,f),r.elementType=i,r.type=u,r.lanes=v,r}function Ia(i,r,o,u){return i=Gn(7,i,u,r),i.lanes=o,i}function mm(i,r,o){return i=Gn(6,i,null,r),i.lanes=o,i}function pm(i,r,o){return r=Gn(4,i.children!==null?i.children:[],i.key,r),r.lanes=o,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Oo=[],Do=0,wd=null,Sd=0,di=[],hi=0,Oa=null,Ns=1,js="";function Da(i,r){Oo[Do++]=Sd,Oo[Do++]=wd,wd=i,Sd=r}function y_(i,r,o){di[hi++]=Ns,di[hi++]=js,di[hi++]=Oa,Oa=i;var u=Ns;i=js;var f=32-bn(u)-1;u&=~(1<<f),o+=1;var v=32-bn(r)+f;if(30<v){var w=f-f%5;v=(u&(1<<w)-1).toString(32),u>>=w,f-=w,Ns=1<<32-bn(r)+f|o<<f|u,js=v+i}else Ns=1<<v|o<<f|u,js=i}function gm(i){i.return!==null&&(Da(i,1),y_(i,1,0))}function vm(i){for(;i===wd;)wd=Oo[--Do],Oo[Do]=null,Sd=Oo[--Do],Oo[Do]=null;for(;i===Oa;)Oa=di[--hi],di[hi]=null,js=di[--hi],di[hi]=null,Ns=di[--hi],di[hi]=null}var Dn=null,At=null,at=!1,Ma=null,Hi=!1,ym=Error(s(519));function ka(i){var r=Error(s(418,""));throw uc(ci(r,i)),ym}function __(i){var r=i.stateNode,o=i.type,u=i.memoizedProps;switch(r[Ft]=i,r[kt]=u,o){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(o=0;o<Mc.length;o++)Ge(Mc[o],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Ge("invalid",r),_a(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),vo(r);break;case"select":Ge("invalid",r);break;case"textarea":Ge("invalid",r),xa(r,u.value,u.defaultValue,u.children),vo(r)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||Pb(r.textContent,o)?(u.popover!=null&&(Ge("beforetoggle",r),Ge("toggle",r)),u.onScroll!=null&&Ge("scroll",r),u.onScrollEnd!=null&&Ge("scrollend",r),u.onClick!=null&&(r.onclick=rh),r=!0):r=!1,r||ka(i)}function x_(i){for(Dn=i.return;Dn;)switch(Dn.tag){case 5:case 13:Hi=!1;return;case 27:case 3:Hi=!0;return;default:Dn=Dn.return}}function lc(i){if(i!==Dn)return!1;if(!at)return x_(i),at=!0,!1;var r=i.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Mp(i.type,i.memoizedProps)),o=!o),o&&At&&ka(i),x_(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(r===0){At=Ni(i.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;i=i.nextSibling}At=null}}else r===27?(r=At,Ar(i.type)?(i=Vp,Vp=null,At=i):At=r):At=Dn?Ni(i.stateNode.nextSibling):null;return!0}function cc(){At=Dn=null,at=!1}function b_(){var i=Ma;return i!==null&&(Vn===null?Vn=i:Vn.push.apply(Vn,i),Ma=null),i}function uc(i){Ma===null?Ma=[i]:Ma.push(i)}var _m=G(null),Pa=null,Cs=null;function dr(i,r,o){ue(_m,r._currentValue),r._currentValue=o}function Rs(i){i._currentValue=_m.current,ae(_m)}function xm(i,r,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===o)break;i=i.return}}function bm(i,r,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var v=f.dependencies;if(v!==null){var w=f.child;v=v.firstContext;e:for(;v!==null;){var A=v;v=f;for(var U=0;U<r.length;U++)if(A.context===r[U]){v.lanes|=o,A=v.alternate,A!==null&&(A.lanes|=o),xm(v.return,o,i),u||(w=null);break e}v=A.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(s(341));w.lanes|=o,v=w.alternate,v!==null&&(v.lanes|=o),xm(w,o,i),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===i){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function dc(i,r,o,u){i=null;for(var f=r,v=!1;f!==null;){if(!v){if((f.flags&524288)!==0)v=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var A=f.type;$n(f.pendingProps.value,w.value)||(i!==null?i.push(A):i=[A])}}else if(f===rt.current){if(w=f.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(Uc):i=[Uc])}f=f.return}i!==null&&bm(r,i,o,u),r.flags|=262144}function Ad(i){for(i=i.firstContext;i!==null;){if(!$n(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function La(i){Pa=i,Cs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function En(i){return E_(Pa,i)}function Nd(i,r){return Pa===null&&La(i),E_(i,r)}function E_(i,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Cs===null){if(i===null)throw Error(s(308));Cs=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Cs=Cs.next=r;return o}var Gj=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(o){return o()})}},Kj=n.unstable_scheduleCallback,Qj=n.unstable_NormalPriority,Gt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Em(){return{controller:new Gj,data:new Map,refCount:0}}function hc(i){i.refCount--,i.refCount===0&&Kj(Qj,function(){i.controller.abort()})}var fc=null,Tm=0,Mo=0,ko=null;function Yj(i,r){if(fc===null){var o=fc=[];Tm=0,Mo=Sp(),ko={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Tm++,r.then(T_,T_),r}function T_(){if(--Tm===0&&fc!==null){ko!==null&&(ko.status="fulfilled");var i=fc;fc=null,Mo=0,ko=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function Xj(i,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var w_=X.S;X.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Yj(i,r),w_!==null&&w_(i,r)};var Va=G(null);function wm(){var i=Va.current;return i!==null?i:vt.pooledCache}function jd(i,r){r===null?ue(Va,Va.current):ue(Va,r.pool)}function S_(){var i=wm();return i===null?null:{parent:Gt._currentValue,pool:i}}var mc=Error(s(460)),A_=Error(s(474)),Cd=Error(s(542)),Sm={then:function(){}};function N_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Rd(){}function j_(i,r,o){switch(o=i[o],o===void 0?i.push(r):o!==r&&(r.then(Rd,Rd),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,R_(i),i;default:if(typeof r.status=="string")r.then(Rd,Rd);else{if(i=vt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,R_(i),i}throw pc=r,mc}}var pc=null;function C_(){if(pc===null)throw Error(s(459));var i=pc;return pc=null,i}function R_(i){if(i===mc||i===Cd)throw Error(s(483))}var hr=!1;function Am(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nm(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function fr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function mr(i,r,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ct&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=Ed(i),g_(i,null,o),r}return bd(i,u,r,o),Ed(i)}function gc(i,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,Hl(i,o)}}function jm(i,r){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?f=v=w:v=v.next=w,o=o.next}while(o!==null);v===null?f=v=r:v=v.next=r}else f=v=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=r:i.next=r,o.lastBaseUpdate=r}var Cm=!1;function vc(){if(Cm){var i=ko;if(i!==null)throw i}}function yc(i,r,o,u){Cm=!1;var f=i.updateQueue;hr=!1;var v=f.firstBaseUpdate,w=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var U=A,ee=U.next;U.next=null,w===null?v=ee:w.next=ee,w=U;var se=i.alternate;se!==null&&(se=se.updateQueue,A=se.lastBaseUpdate,A!==w&&(A===null?se.firstBaseUpdate=ee:A.next=ee,se.lastBaseUpdate=U))}if(v!==null){var de=f.baseState;w=0,se=ee=U=null,A=v;do{var te=A.lane&-536870913,ne=te!==A.lane;if(ne?(Ze&te)===te:(u&te)===te){te!==0&&te===Mo&&(Cm=!0),se!==null&&(se=se.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ke=i,Ce=A;te=r;var mt=o;switch(Ce.tag){case 1:if(ke=Ce.payload,typeof ke=="function"){de=ke.call(mt,de,te);break e}de=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Ce.payload,te=typeof ke=="function"?ke.call(mt,de,te):ke,te==null)break e;de=y({},de,te);break e;case 2:hr=!0}}te=A.callback,te!==null&&(i.flags|=64,ne&&(i.flags|=8192),ne=f.callbacks,ne===null?f.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:A.tag,payload:A.payload,callback:A.callback,next:null},se===null?(ee=se=ne,U=de):se=se.next=ne,w|=te;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ne=A,A=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);se===null&&(U=de),f.baseState=U,f.firstBaseUpdate=ee,f.lastBaseUpdate=se,v===null&&(f.shared.lanes=0),Er|=w,i.lanes=w,i.memoizedState=de}}function I_(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function O_(i,r){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)I_(o[i],r)}var Po=G(null),Id=G(0);function D_(i,r){i=Ls,ue(Id,i),ue(Po,r),Ls=i|r.baseLanes}function Rm(){ue(Id,Ls),ue(Po,Po.current)}function Im(){Ls=Id.current,ae(Po),ae(Id)}var pr=0,qe=null,ht=null,Lt=null,Od=!1,Lo=!1,za=!1,Dd=0,_c=0,Vo=null,Wj=0;function Rt(){throw Error(s(321))}function Om(i,r){if(r===null)return!1;for(var o=0;o<r.length&&o<i.length;o++)if(!$n(i[o],r[o]))return!1;return!0}function Dm(i,r,o,u,f,v){return pr=v,qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=i===null||i.memoizedState===null?gx:vx,za=!1,v=o(u,f),za=!1,Lo&&(v=k_(r,o,u,f)),M_(i),v}function M_(i){X.H=zd;var r=ht!==null&&ht.next!==null;if(pr=0,Lt=ht=qe=null,Od=!1,_c=0,Vo=null,r)throw Error(s(300));i===null||Jt||(i=i.dependencies,i!==null&&Ad(i)&&(Jt=!0))}function k_(i,r,o,u){qe=i;var f=0;do{if(Lo&&(Vo=null),_c=0,Lo=!1,25<=f)throw Error(s(301));if(f+=1,Lt=ht=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}X.H=sC,v=r(o,u)}while(Lo);return v}function Zj(){var i=X.H,r=i.useState()[0];return r=typeof r.then=="function"?xc(r):r,i=i.useState()[0],(ht!==null?ht.memoizedState:null)!==i&&(qe.flags|=1024),r}function Mm(){var i=Dd!==0;return Dd=0,i}function km(i,r,o){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~o}function Pm(i){if(Od){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Od=!1}pr=0,Lt=ht=qe=null,Lo=!1,_c=Dd=0,Vo=null}function Pn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?qe.memoizedState=Lt=i:Lt=Lt.next=i,Lt}function Vt(){if(ht===null){var i=qe.alternate;i=i!==null?i.memoizedState:null}else i=ht.next;var r=Lt===null?qe.memoizedState:Lt.next;if(r!==null)Lt=r,ht=i;else{if(i===null)throw qe.alternate===null?Error(s(467)):Error(s(310));ht=i,i={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Lt===null?qe.memoizedState=Lt=i:Lt=Lt.next=i}return Lt}function Lm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xc(i){var r=_c;return _c+=1,Vo===null&&(Vo=[]),i=j_(Vo,i,r),r=qe,(Lt===null?r.memoizedState:Lt.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?gx:vx),i}function Md(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return xc(i);if(i.$$typeof===B)return En(i)}throw Error(s(438,String(i)))}function Vm(i){var r=null,o=qe.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Lm(),qe.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(i),u=0;u<i;u++)o[u]=D;return r.index++,o}function Is(i,r){return typeof r=="function"?r(i):r}function kd(i){var r=Vt();return zm(r,ht,i)}function zm(i,r,o){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var f=i.baseQueue,v=u.pending;if(v!==null){if(f!==null){var w=f.next;f.next=v.next,v.next=w}r.baseQueue=f=v,u.pending=null}if(v=i.baseState,f===null)i.memoizedState=v;else{r=f.next;var A=w=null,U=null,ee=r,se=!1;do{var de=ee.lane&-536870913;if(de!==ee.lane?(Ze&de)===de:(pr&de)===de){var te=ee.revertLane;if(te===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),de===Mo&&(se=!0);else if((pr&te)===te){ee=ee.next,te===Mo&&(se=!0);continue}else de={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},U===null?(A=U=de,w=v):U=U.next=de,qe.lanes|=te,Er|=te;de=ee.action,za&&o(v,de),v=ee.hasEagerState?ee.eagerState:o(v,de)}else te={lane:de,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},U===null?(A=U=te,w=v):U=U.next=te,qe.lanes|=de,Er|=de;ee=ee.next}while(ee!==null&&ee!==r);if(U===null?w=v:U.next=A,!$n(v,i.memoizedState)&&(Jt=!0,se&&(o=ko,o!==null)))throw o;i.memoizedState=v,i.baseState=w,i.baseQueue=U,u.lastRenderedState=v}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Um(i){var r=Vt(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,v=r.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do v=i(v,w.action),w=w.next;while(w!==f);$n(v,r.memoizedState)||(Jt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),o.lastRenderedState=v}return[v,u]}function P_(i,r,o){var u=qe,f=Vt(),v=at;if(v){if(o===void 0)throw Error(s(407));o=o()}else o=r();var w=!$n((ht||f).memoizedState,o);w&&(f.memoizedState=o,Jt=!0),f=f.queue;var A=z_.bind(null,u,f,i);if(bc(2048,8,A,[i]),f.getSnapshot!==r||w||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,zo(9,Pd(),V_.bind(null,u,f,o,r),null),vt===null)throw Error(s(349));v||(pr&124)!==0||L_(u,r,o)}return o}function L_(i,r,o){i.flags|=16384,i={getSnapshot:r,value:o},r=qe.updateQueue,r===null?(r=Lm(),qe.updateQueue=r,r.stores=[i]):(o=r.stores,o===null?r.stores=[i]:o.push(i))}function V_(i,r,o,u){r.value=o,r.getSnapshot=u,U_(r)&&B_(i)}function z_(i,r,o){return o(function(){U_(r)&&B_(i)})}function U_(i){var r=i.getSnapshot;i=i.value;try{var o=r();return!$n(i,o)}catch{return!0}}function B_(i){var r=Ro(i,2);r!==null&&Wn(r,i,2)}function Bm(i){var r=Pn();if(typeof i=="function"){var o=i;if(i=o(),za){qt(!0);try{o()}finally{qt(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:i},r}function q_(i,r,o,u){return i.baseState=o,zm(i,ht,typeof u=="function"?u:Is)}function Jj(i,r,o,u,f){if(Vd(i))throw Error(s(485));if(i=r.action,i!==null){var v={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){v.listeners.push(w)}};X.T!==null?o(!0):v.isTransition=!1,u(v),o=r.pending,o===null?(v.next=r.pending=v,F_(r,v)):(v.next=o.next,r.pending=o.next=v)}}function F_(i,r){var o=r.action,u=r.payload,f=i.state;if(r.isTransition){var v=X.T,w={};X.T=w;try{var A=o(f,u),U=X.S;U!==null&&U(w,A),H_(i,r,A)}catch(ee){qm(i,r,ee)}finally{X.T=v}}else try{v=o(f,u),H_(i,r,v)}catch(ee){qm(i,r,ee)}}function H_(i,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){$_(i,r,u)},function(u){return qm(i,r,u)}):$_(i,r,o)}function $_(i,r,o){r.status="fulfilled",r.value=o,G_(r),i.state=o,r=i.pending,r!==null&&(o=r.next,o===r?i.pending=null:(o=o.next,r.next=o,F_(i,o)))}function qm(i,r,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,G_(r),r=r.next;while(r!==u)}i.action=null}function G_(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function K_(i,r){return r}function Q_(i,r){if(at){var o=vt.formState;if(o!==null){e:{var u=qe;if(at){if(At){t:{for(var f=At,v=Hi;f.nodeType!==8;){if(!v){f=null;break t}if(f=Ni(f.nextSibling),f===null){f=null;break t}}v=f.data,f=v==="F!"||v==="F"?f:null}if(f){At=Ni(f.nextSibling),u=f.data==="F!";break e}}ka(u)}u=!1}u&&(r=o[0])}}return o=Pn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:K_,lastRenderedState:r},o.queue=u,o=fx.bind(null,qe,u),u.dispatch=o,u=Bm(!1),v=Km.bind(null,qe,!1,u.queue),u=Pn(),f={state:r,dispatch:null,action:i,pending:null},u.queue=f,o=Jj.bind(null,qe,f,v,o),f.dispatch=o,u.memoizedState=i,[r,o,!1]}function Y_(i){var r=Vt();return X_(r,ht,i)}function X_(i,r,o){if(r=zm(i,r,K_)[0],i=kd(Is)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=xc(r)}catch(w){throw w===mc?Cd:w}else u=r;r=Vt();var f=r.queue,v=f.dispatch;return o!==r.memoizedState&&(qe.flags|=2048,zo(9,Pd(),eC.bind(null,f,o),null)),[u,v,i]}function eC(i,r){i.action=r}function W_(i){var r=Vt(),o=ht;if(o!==null)return X_(r,o,i);Vt(),r=r.memoizedState,o=Vt();var u=o.queue.dispatch;return o.memoizedState=i,[r,u,!1]}function zo(i,r,o,u){return i={tag:i,create:o,deps:u,inst:r,next:null},r=qe.updateQueue,r===null&&(r=Lm(),qe.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,r.lastEffect=i),i}function Pd(){return{destroy:void 0,resource:void 0}}function Z_(){return Vt().memoizedState}function Ld(i,r,o,u){var f=Pn();u=u===void 0?null:u,qe.flags|=i,f.memoizedState=zo(1|r,Pd(),o,u)}function bc(i,r,o,u){var f=Vt();u=u===void 0?null:u;var v=f.memoizedState.inst;ht!==null&&u!==null&&Om(u,ht.memoizedState.deps)?f.memoizedState=zo(r,v,o,u):(qe.flags|=i,f.memoizedState=zo(1|r,v,o,u))}function J_(i,r){Ld(8390656,8,i,r)}function ex(i,r){bc(2048,8,i,r)}function tx(i,r){return bc(4,2,i,r)}function nx(i,r){return bc(4,4,i,r)}function ix(i,r){if(typeof r=="function"){i=i();var o=r(i);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function sx(i,r,o){o=o!=null?o.concat([i]):null,bc(4,4,ix.bind(null,r,i),o)}function Fm(){}function rx(i,r){var o=Vt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Om(r,u[1])?u[0]:(o.memoizedState=[i,r],i)}function ax(i,r){var o=Vt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Om(r,u[1]))return u[0];if(u=i(),za){qt(!0);try{i()}finally{qt(!1)}}return o.memoizedState=[u,r],u}function Hm(i,r,o){return o===void 0||(pr&1073741824)!==0?i.memoizedState=r:(i.memoizedState=o,i=cb(),qe.lanes|=i,Er|=i,o)}function ox(i,r,o,u){return $n(o,r)?o:Po.current!==null?(i=Hm(i,o,u),$n(i,r)||(Jt=!0),i):(pr&42)===0?(Jt=!0,i.memoizedState=o):(i=cb(),qe.lanes|=i,Er|=i,r)}function lx(i,r,o,u,f){var v=re.p;re.p=v!==0&&8>v?v:8;var w=X.T,A={};X.T=A,Km(i,!1,r,o);try{var U=f(),ee=X.S;if(ee!==null&&ee(A,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var se=Xj(U,u);Ec(i,r,se,Xn(i))}else Ec(i,r,u,Xn(i))}catch(de){Ec(i,r,{then:function(){},status:"rejected",reason:de},Xn())}finally{re.p=v,X.T=w}}function tC(){}function $m(i,r,o,u){if(i.tag!==5)throw Error(s(476));var f=cx(i).queue;lx(i,f,r,J,o===null?tC:function(){return ux(i),o(u)})}function cx(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:J},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:o},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function ux(i){var r=cx(i).next.queue;Ec(i,r,{},Xn())}function Gm(){return En(Uc)}function dx(){return Vt().memoizedState}function hx(){return Vt().memoizedState}function nC(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var o=Xn();i=fr(o);var u=mr(r,i,o);u!==null&&(Wn(u,r,o),gc(u,r,o)),r={cache:Em()},i.payload=r;return}r=r.return}}function iC(i,r,o){var u=Xn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Vd(i)?mx(r,o):(o=hm(i,r,o,u),o!==null&&(Wn(o,i,u),px(o,r,u)))}function fx(i,r,o){var u=Xn();Ec(i,r,o,u)}function Ec(i,r,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Vd(i))mx(r,f);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var w=r.lastRenderedState,A=v(w,o);if(f.hasEagerState=!0,f.eagerState=A,$n(A,w))return bd(i,r,f,0),vt===null&&xd(),!1}catch{}finally{}if(o=hm(i,r,f,u),o!==null)return Wn(o,i,u),px(o,r,u),!0}return!1}function Km(i,r,o,u){if(u={lane:2,revertLane:Sp(),action:u,hasEagerState:!1,eagerState:null,next:null},Vd(i)){if(r)throw Error(s(479))}else r=hm(i,o,u,2),r!==null&&Wn(r,i,2)}function Vd(i){var r=i.alternate;return i===qe||r!==null&&r===qe}function mx(i,r){Lo=Od=!0;var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}function px(i,r,o){if((o&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,Hl(i,o)}}var zd={readContext:En,use:Md,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},gx={readContext:En,use:Md,useCallback:function(i,r){return Pn().memoizedState=[i,r===void 0?null:r],i},useContext:En,useEffect:J_,useImperativeHandle:function(i,r,o){o=o!=null?o.concat([i]):null,Ld(4194308,4,ix.bind(null,r,i),o)},useLayoutEffect:function(i,r){return Ld(4194308,4,i,r)},useInsertionEffect:function(i,r){Ld(4,2,i,r)},useMemo:function(i,r){var o=Pn();r=r===void 0?null:r;var u=i();if(za){qt(!0);try{i()}finally{qt(!1)}}return o.memoizedState=[u,r],u},useReducer:function(i,r,o){var u=Pn();if(o!==void 0){var f=o(r);if(za){qt(!0);try{o(r)}finally{qt(!1)}}}else f=r;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=iC.bind(null,qe,i),[u.memoizedState,i]},useRef:function(i){var r=Pn();return i={current:i},r.memoizedState=i},useState:function(i){i=Bm(i);var r=i.queue,o=fx.bind(null,qe,r);return r.dispatch=o,[i.memoizedState,o]},useDebugValue:Fm,useDeferredValue:function(i,r){var o=Pn();return Hm(o,i,r)},useTransition:function(){var i=Bm(!1);return i=lx.bind(null,qe,i.queue,!0,!1),Pn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,o){var u=qe,f=Pn();if(at){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),vt===null)throw Error(s(349));(Ze&124)!==0||L_(u,r,o)}f.memoizedState=o;var v={value:o,getSnapshot:r};return f.queue=v,J_(z_.bind(null,u,v,i),[i]),u.flags|=2048,zo(9,Pd(),V_.bind(null,u,v,o,r),null),o},useId:function(){var i=Pn(),r=vt.identifierPrefix;if(at){var o=js,u=Ns;o=(u&~(1<<32-bn(u)-1)).toString(32)+o,r=""+r+"R"+o,o=Dd++,0<o&&(r+="H"+o.toString(32)),r+=""}else o=Wj++,r=""+r+"r"+o.toString(32)+"";return i.memoizedState=r},useHostTransitionStatus:Gm,useFormState:Q_,useActionState:Q_,useOptimistic:function(i){var r=Pn();r.memoizedState=r.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Km.bind(null,qe,!0,o),o.dispatch=r,[i,r]},useMemoCache:Vm,useCacheRefresh:function(){return Pn().memoizedState=nC.bind(null,qe)}},vx={readContext:En,use:Md,useCallback:rx,useContext:En,useEffect:ex,useImperativeHandle:sx,useInsertionEffect:tx,useLayoutEffect:nx,useMemo:ax,useReducer:kd,useRef:Z_,useState:function(){return kd(Is)},useDebugValue:Fm,useDeferredValue:function(i,r){var o=Vt();return ox(o,ht.memoizedState,i,r)},useTransition:function(){var i=kd(Is)[0],r=Vt().memoizedState;return[typeof i=="boolean"?i:xc(i),r]},useSyncExternalStore:P_,useId:dx,useHostTransitionStatus:Gm,useFormState:Y_,useActionState:Y_,useOptimistic:function(i,r){var o=Vt();return q_(o,ht,i,r)},useMemoCache:Vm,useCacheRefresh:hx},sC={readContext:En,use:Md,useCallback:rx,useContext:En,useEffect:ex,useImperativeHandle:sx,useInsertionEffect:tx,useLayoutEffect:nx,useMemo:ax,useReducer:Um,useRef:Z_,useState:function(){return Um(Is)},useDebugValue:Fm,useDeferredValue:function(i,r){var o=Vt();return ht===null?Hm(o,i,r):ox(o,ht.memoizedState,i,r)},useTransition:function(){var i=Um(Is)[0],r=Vt().memoizedState;return[typeof i=="boolean"?i:xc(i),r]},useSyncExternalStore:P_,useId:dx,useHostTransitionStatus:Gm,useFormState:W_,useActionState:W_,useOptimistic:function(i,r){var o=Vt();return ht!==null?q_(o,ht,i,r):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Vm,useCacheRefresh:hx},Uo=null,Tc=0;function Ud(i){var r=Tc;return Tc+=1,Uo===null&&(Uo=[]),j_(Uo,i,r)}function wc(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Bd(i,r){throw r.$$typeof===x?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function yx(i){var r=i._init;return r(i._payload)}function _x(i){function r(Q,F){if(i){var Z=Q.deletions;Z===null?(Q.deletions=[F],Q.flags|=16):Z.push(F)}}function o(Q,F){if(!i)return null;for(;F!==null;)r(Q,F),F=F.sibling;return null}function u(Q){for(var F=new Map;Q!==null;)Q.key!==null?F.set(Q.key,Q):F.set(Q.index,Q),Q=Q.sibling;return F}function f(Q,F){return Q=As(Q,F),Q.index=0,Q.sibling=null,Q}function v(Q,F,Z){return Q.index=Z,i?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<F?(Q.flags|=67108866,F):Z):(Q.flags|=67108866,F)):(Q.flags|=1048576,F)}function w(Q){return i&&Q.alternate===null&&(Q.flags|=67108866),Q}function A(Q,F,Z,le){return F===null||F.tag!==6?(F=mm(Z,Q.mode,le),F.return=Q,F):(F=f(F,Z),F.return=Q,F)}function U(Q,F,Z,le){var Te=Z.type;return Te===j?se(Q,F,Z.props.children,le,Z.key):F!==null&&(F.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&yx(Te)===F.type)?(F=f(F,Z.props),wc(F,Z),F.return=Q,F):(F=Td(Z.type,Z.key,Z.props,null,Q.mode,le),wc(F,Z),F.return=Q,F)}function ee(Q,F,Z,le){return F===null||F.tag!==4||F.stateNode.containerInfo!==Z.containerInfo||F.stateNode.implementation!==Z.implementation?(F=pm(Z,Q.mode,le),F.return=Q,F):(F=f(F,Z.children||[]),F.return=Q,F)}function se(Q,F,Z,le,Te){return F===null||F.tag!==7?(F=Ia(Z,Q.mode,le,Te),F.return=Q,F):(F=f(F,Z),F.return=Q,F)}function de(Q,F,Z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=mm(""+F,Q.mode,Z),F.return=Q,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case T:return Z=Td(F.type,F.key,F.props,null,Q.mode,Z),wc(Z,F),Z.return=Q,Z;case S:return F=pm(F,Q.mode,Z),F.return=Q,F;case N:var le=F._init;return F=le(F._payload),de(Q,F,Z)}if(we(F)||L(F))return F=Ia(F,Q.mode,Z,null),F.return=Q,F;if(typeof F.then=="function")return de(Q,Ud(F),Z);if(F.$$typeof===B)return de(Q,Nd(Q,F),Z);Bd(Q,F)}return null}function te(Q,F,Z,le){var Te=F!==null?F.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Te!==null?null:A(Q,F,""+Z,le);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:return Z.key===Te?U(Q,F,Z,le):null;case S:return Z.key===Te?ee(Q,F,Z,le):null;case N:return Te=Z._init,Z=Te(Z._payload),te(Q,F,Z,le)}if(we(Z)||L(Z))return Te!==null?null:se(Q,F,Z,le,null);if(typeof Z.then=="function")return te(Q,F,Ud(Z),le);if(Z.$$typeof===B)return te(Q,F,Nd(Q,Z),le);Bd(Q,Z)}return null}function ne(Q,F,Z,le,Te){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Q=Q.get(Z)||null,A(F,Q,""+le,Te);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case T:return Q=Q.get(le.key===null?Z:le.key)||null,U(F,Q,le,Te);case S:return Q=Q.get(le.key===null?Z:le.key)||null,ee(F,Q,le,Te);case N:var He=le._init;return le=He(le._payload),ne(Q,F,Z,le,Te)}if(we(le)||L(le))return Q=Q.get(Z)||null,se(F,Q,le,Te,null);if(typeof le.then=="function")return ne(Q,F,Z,Ud(le),Te);if(le.$$typeof===B)return ne(Q,F,Z,Nd(F,le),Te);Bd(F,le)}return null}function ke(Q,F,Z,le){for(var Te=null,He=null,Ae=F,Ie=F=0,tn=null;Ae!==null&&Ie<Z.length;Ie++){Ae.index>Ie?(tn=Ae,Ae=null):tn=Ae.sibling;var it=te(Q,Ae,Z[Ie],le);if(it===null){Ae===null&&(Ae=tn);break}i&&Ae&&it.alternate===null&&r(Q,Ae),F=v(it,F,Ie),He===null?Te=it:He.sibling=it,He=it,Ae=tn}if(Ie===Z.length)return o(Q,Ae),at&&Da(Q,Ie),Te;if(Ae===null){for(;Ie<Z.length;Ie++)Ae=de(Q,Z[Ie],le),Ae!==null&&(F=v(Ae,F,Ie),He===null?Te=Ae:He.sibling=Ae,He=Ae);return at&&Da(Q,Ie),Te}for(Ae=u(Ae);Ie<Z.length;Ie++)tn=ne(Ae,Q,Ie,Z[Ie],le),tn!==null&&(i&&tn.alternate!==null&&Ae.delete(tn.key===null?Ie:tn.key),F=v(tn,F,Ie),He===null?Te=tn:He.sibling=tn,He=tn);return i&&Ae.forEach(function(Ir){return r(Q,Ir)}),at&&Da(Q,Ie),Te}function Ce(Q,F,Z,le){if(Z==null)throw Error(s(151));for(var Te=null,He=null,Ae=F,Ie=F=0,tn=null,it=Z.next();Ae!==null&&!it.done;Ie++,it=Z.next()){Ae.index>Ie?(tn=Ae,Ae=null):tn=Ae.sibling;var Ir=te(Q,Ae,it.value,le);if(Ir===null){Ae===null&&(Ae=tn);break}i&&Ae&&Ir.alternate===null&&r(Q,Ae),F=v(Ir,F,Ie),He===null?Te=Ir:He.sibling=Ir,He=Ir,Ae=tn}if(it.done)return o(Q,Ae),at&&Da(Q,Ie),Te;if(Ae===null){for(;!it.done;Ie++,it=Z.next())it=de(Q,it.value,le),it!==null&&(F=v(it,F,Ie),He===null?Te=it:He.sibling=it,He=it);return at&&Da(Q,Ie),Te}for(Ae=u(Ae);!it.done;Ie++,it=Z.next())it=ne(Ae,Q,Ie,it.value,le),it!==null&&(i&&it.alternate!==null&&Ae.delete(it.key===null?Ie:it.key),F=v(it,F,Ie),He===null?Te=it:He.sibling=it,He=it);return i&&Ae.forEach(function(r1){return r(Q,r1)}),at&&Da(Q,Ie),Te}function mt(Q,F,Z,le){if(typeof Z=="object"&&Z!==null&&Z.type===j&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:e:{for(var Te=Z.key;F!==null;){if(F.key===Te){if(Te=Z.type,Te===j){if(F.tag===7){o(Q,F.sibling),le=f(F,Z.props.children),le.return=Q,Q=le;break e}}else if(F.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&yx(Te)===F.type){o(Q,F.sibling),le=f(F,Z.props),wc(le,Z),le.return=Q,Q=le;break e}o(Q,F);break}else r(Q,F);F=F.sibling}Z.type===j?(le=Ia(Z.props.children,Q.mode,le,Z.key),le.return=Q,Q=le):(le=Td(Z.type,Z.key,Z.props,null,Q.mode,le),wc(le,Z),le.return=Q,Q=le)}return w(Q);case S:e:{for(Te=Z.key;F!==null;){if(F.key===Te)if(F.tag===4&&F.stateNode.containerInfo===Z.containerInfo&&F.stateNode.implementation===Z.implementation){o(Q,F.sibling),le=f(F,Z.children||[]),le.return=Q,Q=le;break e}else{o(Q,F);break}else r(Q,F);F=F.sibling}le=pm(Z,Q.mode,le),le.return=Q,Q=le}return w(Q);case N:return Te=Z._init,Z=Te(Z._payload),mt(Q,F,Z,le)}if(we(Z))return ke(Q,F,Z,le);if(L(Z)){if(Te=L(Z),typeof Te!="function")throw Error(s(150));return Z=Te.call(Z),Ce(Q,F,Z,le)}if(typeof Z.then=="function")return mt(Q,F,Ud(Z),le);if(Z.$$typeof===B)return mt(Q,F,Nd(Q,Z),le);Bd(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,F!==null&&F.tag===6?(o(Q,F.sibling),le=f(F,Z),le.return=Q,Q=le):(o(Q,F),le=mm(Z,Q.mode,le),le.return=Q,Q=le),w(Q)):o(Q,F)}return function(Q,F,Z,le){try{Tc=0;var Te=mt(Q,F,Z,le);return Uo=null,Te}catch(Ae){if(Ae===mc||Ae===Cd)throw Ae;var He=Gn(29,Ae,null,Q.mode);return He.lanes=le,He.return=Q,He}finally{}}}var Bo=_x(!0),xx=_x(!1),fi=G(null),$i=null;function gr(i){var r=i.alternate;ue(Kt,Kt.current&1),ue(fi,i),$i===null&&(r===null||Po.current!==null||r.memoizedState!==null)&&($i=i)}function bx(i){if(i.tag===22){if(ue(Kt,Kt.current),ue(fi,i),$i===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&($i=i)}}else vr()}function vr(){ue(Kt,Kt.current),ue(fi,fi.current)}function Os(i){ae(fi),$i===i&&($i=null),ae(Kt)}var Kt=G(0);function qd(i){for(var r=i;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Lp(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Qm(i,r,o,u){r=i.memoizedState,o=o(u,r),o=o==null?r:y({},r,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Ym={enqueueSetState:function(i,r,o){i=i._reactInternals;var u=Xn(),f=fr(u);f.payload=r,o!=null&&(f.callback=o),r=mr(i,f,u),r!==null&&(Wn(r,i,u),gc(r,i,u))},enqueueReplaceState:function(i,r,o){i=i._reactInternals;var u=Xn(),f=fr(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=mr(i,f,u),r!==null&&(Wn(r,i,u),gc(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var o=Xn(),u=fr(o);u.tag=2,r!=null&&(u.callback=r),r=mr(i,u,o),r!==null&&(Wn(r,i,o),gc(r,i,o))}};function Ex(i,r,o,u,f,v,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,v,w):r.prototype&&r.prototype.isPureReactComponent?!ac(o,u)||!ac(f,v):!0}function Tx(i,r,o,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==i&&Ym.enqueueReplaceState(r,r.state,null)}function Ua(i,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(i=i.defaultProps){o===r&&(o=y({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var Fd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function wx(i){Fd(i)}function Sx(i){console.error(i)}function Ax(i){Fd(i)}function Hd(i,r){try{var o=i.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Nx(i,r,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Xm(i,r,o){return o=fr(o),o.tag=3,o.payload={element:null},o.callback=function(){Hd(i,r)},o}function jx(i){return i=fr(i),i.tag=3,i}function Cx(i,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var v=u.value;i.payload=function(){return f(v)},i.callback=function(){Nx(r,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){Nx(r,o,u),typeof f!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function rC(i,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&dc(r,o,f,!0),o=fi.current,o!==null){switch(o.tag){case 13:return $i===null?xp():o.alternate===null&&Nt===0&&(Nt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Sm?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),Ep(i,u,f)),!1;case 22:return o.flags|=65536,u===Sm?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),Ep(i,u,f)),!1}throw Error(s(435,o.tag))}return Ep(i,u,f),xp(),!1}if(at)return r=fi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==ym&&(i=Error(s(422),{cause:u}),uc(ci(i,o)))):(u!==ym&&(r=Error(s(423),{cause:u}),uc(ci(r,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=ci(u,o),f=Xm(i.stateNode,u,f),jm(i,f),Nt!==4&&(Nt=2)),!1;var v=Error(s(520),{cause:u});if(v=ci(v,o),Ic===null?Ic=[v]:Ic.push(v),Nt!==4&&(Nt=2),r===null)return!0;u=ci(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=Xm(o.stateNode,u,i),jm(o,i),!1;case 1:if(r=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Tr===null||!Tr.has(v))))return o.flags|=65536,f&=-f,o.lanes|=f,f=jx(f),Cx(f,i,o,u),jm(o,f),!1}o=o.return}while(o!==null);return!1}var Rx=Error(s(461)),Jt=!1;function cn(i,r,o,u){r.child=i===null?xx(r,null,o,u):Bo(r,i.child,o,u)}function Ix(i,r,o,u,f){o=o.render;var v=r.ref;if("ref"in u){var w={};for(var A in u)A!=="ref"&&(w[A]=u[A])}else w=u;return La(r),u=Dm(i,r,o,w,v,f),A=Mm(),i!==null&&!Jt?(km(i,r,f),Ds(i,r,f)):(at&&A&&gm(r),r.flags|=1,cn(i,r,u,f),r.child)}function Ox(i,r,o,u,f){if(i===null){var v=o.type;return typeof v=="function"&&!fm(v)&&v.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=v,Dx(i,r,v,u,f)):(i=Td(o.type,null,u,r,r.mode,f),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!sp(i,f)){var w=v.memoizedProps;if(o=o.compare,o=o!==null?o:ac,o(w,u)&&i.ref===r.ref)return Ds(i,r,f)}return r.flags|=1,i=As(v,u),i.ref=r.ref,i.return=r,r.child=i}function Dx(i,r,o,u,f){if(i!==null){var v=i.memoizedProps;if(ac(v,u)&&i.ref===r.ref)if(Jt=!1,r.pendingProps=u=v,sp(i,f))(i.flags&131072)!==0&&(Jt=!0);else return r.lanes=i.lanes,Ds(i,r,f)}return Wm(i,r,o,u,f)}function Mx(i,r,o){var u=r.pendingProps,f=u.children,v=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=v!==null?v.baseLanes|o:o,i!==null){for(f=r.child=i.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;r.childLanes=v&~u}else r.childLanes=0,r.child=null;return kx(i,r,u,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&jd(r,v!==null?v.cachePool:null),v!==null?D_(r,v):Rm(),bx(r);else return r.lanes=r.childLanes=536870912,kx(i,r,v!==null?v.baseLanes|o:o,o)}else v!==null?(jd(r,v.cachePool),D_(r,v),vr(),r.memoizedState=null):(i!==null&&jd(r,null),Rm(),vr());return cn(i,r,f,o),r.child}function kx(i,r,o,u){var f=wm();return f=f===null?null:{parent:Gt._currentValue,pool:f},r.memoizedState={baseLanes:o,cachePool:f},i!==null&&jd(r,null),Rm(),bx(r),i!==null&&dc(i,r,u,!0),null}function $d(i,r){var o=r.ref;if(o===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(r.flags|=4194816)}}function Wm(i,r,o,u,f){return La(r),o=Dm(i,r,o,u,void 0,f),u=Mm(),i!==null&&!Jt?(km(i,r,f),Ds(i,r,f)):(at&&u&&gm(r),r.flags|=1,cn(i,r,o,f),r.child)}function Px(i,r,o,u,f,v){return La(r),r.updateQueue=null,o=k_(r,u,o,f),M_(i),u=Mm(),i!==null&&!Jt?(km(i,r,v),Ds(i,r,v)):(at&&u&&gm(r),r.flags|=1,cn(i,r,o,v),r.child)}function Lx(i,r,o,u,f){if(La(r),r.stateNode===null){var v=Io,w=o.contextType;typeof w=="object"&&w!==null&&(v=En(w)),v=new o(u,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Ym,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=u,v.state=r.memoizedState,v.refs={},Am(r),w=o.contextType,v.context=typeof w=="object"&&w!==null?En(w):Io,v.state=r.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Qm(r,o,w,u),v.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(w=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),w!==v.state&&Ym.enqueueReplaceState(v,v.state,null),yc(r,u,v,f),vc(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){v=r.stateNode;var A=r.memoizedProps,U=Ua(o,A);v.props=U;var ee=v.context,se=o.contextType;w=Io,typeof se=="object"&&se!==null&&(w=En(se));var de=o.getDerivedStateFromProps;se=typeof de=="function"||typeof v.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,se||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A||ee!==w)&&Tx(r,v,u,w),hr=!1;var te=r.memoizedState;v.state=te,yc(r,u,v,f),vc(),ee=r.memoizedState,A||te!==ee||hr?(typeof de=="function"&&(Qm(r,o,de,u),ee=r.memoizedState),(U=hr||Ex(r,o,U,u,te,ee,w))?(se||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=ee),v.props=u,v.state=ee,v.context=w,u=U):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{v=r.stateNode,Nm(i,r),w=r.memoizedProps,se=Ua(o,w),v.props=se,de=r.pendingProps,te=v.context,ee=o.contextType,U=Io,typeof ee=="object"&&ee!==null&&(U=En(ee)),A=o.getDerivedStateFromProps,(ee=typeof A=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==de||te!==U)&&Tx(r,v,u,U),hr=!1,te=r.memoizedState,v.state=te,yc(r,u,v,f),vc();var ne=r.memoizedState;w!==de||te!==ne||hr||i!==null&&i.dependencies!==null&&Ad(i.dependencies)?(typeof A=="function"&&(Qm(r,o,A,u),ne=r.memoizedState),(se=hr||Ex(r,o,se,u,te,ne,U)||i!==null&&i.dependencies!==null&&Ad(i.dependencies))?(ee||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,ne,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,ne,U)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||w===i.memoizedProps&&te===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&te===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ne),v.props=u,v.state=ne,v.context=U,u=se):(typeof v.componentDidUpdate!="function"||w===i.memoizedProps&&te===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&te===i.memoizedState||(r.flags|=1024),u=!1)}return v=u,$d(i,r),u=(r.flags&128)!==0,v||u?(v=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&u?(r.child=Bo(r,i.child,null,f),r.child=Bo(r,null,o,f)):cn(i,r,o,f),r.memoizedState=v.state,i=r.child):i=Ds(i,r,f),i}function Vx(i,r,o,u){return cc(),r.flags|=256,cn(i,r,o,u),r.child}var Zm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jm(i){return{baseLanes:i,cachePool:S_()}}function ep(i,r,o){return i=i!==null?i.childLanes&~o:0,r&&(i|=mi),i}function zx(i,r,o){var u=r.pendingProps,f=!1,v=(r.flags&128)!==0,w;if((w=v)||(w=i!==null&&i.memoizedState===null?!1:(Kt.current&2)!==0),w&&(f=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,i===null){if(at){if(f?gr(r):vr(),at){var A=At,U;if(U=A){e:{for(U=A,A=Hi;U.nodeType!==8;){if(!A){A=null;break e}if(U=Ni(U.nextSibling),U===null){A=null;break e}}A=U}A!==null?(r.memoizedState={dehydrated:A,treeContext:Oa!==null?{id:Ns,overflow:js}:null,retryLane:536870912,hydrationErrors:null},U=Gn(18,null,null,0),U.stateNode=A,U.return=r,r.child=U,Dn=r,At=null,U=!0):U=!1}U||ka(r)}if(A=r.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Lp(A)?r.lanes=32:r.lanes=536870912,null;Os(r)}return A=u.children,u=u.fallback,f?(vr(),f=r.mode,A=Gd({mode:"hidden",children:A},f),u=Ia(u,f,o,null),A.return=r,u.return=r,A.sibling=u,r.child=A,f=r.child,f.memoizedState=Jm(o),f.childLanes=ep(i,w,o),r.memoizedState=Zm,u):(gr(r),tp(r,A))}if(U=i.memoizedState,U!==null&&(A=U.dehydrated,A!==null)){if(v)r.flags&256?(gr(r),r.flags&=-257,r=np(i,r,o)):r.memoizedState!==null?(vr(),r.child=i.child,r.flags|=128,r=null):(vr(),f=u.fallback,A=r.mode,u=Gd({mode:"visible",children:u.children},A),f=Ia(f,A,o,null),f.flags|=2,u.return=r,f.return=r,u.sibling=f,r.child=u,Bo(r,i.child,null,o),u=r.child,u.memoizedState=Jm(o),u.childLanes=ep(i,w,o),r.memoizedState=Zm,r=f);else if(gr(r),Lp(A)){if(w=A.nextSibling&&A.nextSibling.dataset,w)var ee=w.dgst;w=ee,u=Error(s(419)),u.stack="",u.digest=w,uc({value:u,source:null,stack:null}),r=np(i,r,o)}else if(Jt||dc(i,r,o,!1),w=(o&i.childLanes)!==0,Jt||w){if(w=vt,w!==null&&(u=o&-o,u=(u&42)!==0?1:sr(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==U.retryLane))throw U.retryLane=u,Ro(i,u),Wn(w,i,u),Rx;A.data==="$?"||xp(),r=np(i,r,o)}else A.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=U.treeContext,At=Ni(A.nextSibling),Dn=r,at=!0,Ma=null,Hi=!1,i!==null&&(di[hi++]=Ns,di[hi++]=js,di[hi++]=Oa,Ns=i.id,js=i.overflow,Oa=r),r=tp(r,u.children),r.flags|=4096);return r}return f?(vr(),f=u.fallback,A=r.mode,U=i.child,ee=U.sibling,u=As(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,ee!==null?f=As(ee,f):(f=Ia(f,A,o,null),f.flags|=2),f.return=r,u.return=r,u.sibling=f,r.child=u,u=f,f=r.child,A=i.child.memoizedState,A===null?A=Jm(o):(U=A.cachePool,U!==null?(ee=Gt._currentValue,U=U.parent!==ee?{parent:ee,pool:ee}:U):U=S_(),A={baseLanes:A.baseLanes|o,cachePool:U}),f.memoizedState=A,f.childLanes=ep(i,w,o),r.memoizedState=Zm,u):(gr(r),o=i.child,i=o.sibling,o=As(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,i!==null&&(w=r.deletions,w===null?(r.deletions=[i],r.flags|=16):w.push(i)),r.child=o,r.memoizedState=null,o)}function tp(i,r){return r=Gd({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Gd(i,r){return i=Gn(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function np(i,r,o){return Bo(r,i.child,null,o),i=tp(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Ux(i,r,o){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),xm(i.return,r,o)}function ip(i,r,o,u,f){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f)}function Bx(i,r,o){var u=r.pendingProps,f=u.revealOrder,v=u.tail;if(cn(i,r,u.children,o),u=Kt.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ux(i,o,r);else if(i.tag===19)Ux(i,o,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(ue(Kt,u),f){case"forwards":for(o=r.child,f=null;o!==null;)i=o.alternate,i!==null&&qd(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),ip(r,!1,f,o,v);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(i=f.alternate,i!==null&&qd(i)===null){r.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}ip(r,!0,o,null,v);break;case"together":ip(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ds(i,r,o){if(i!==null&&(r.dependencies=i.dependencies),Er|=r.lanes,(o&r.childLanes)===0)if(i!==null){if(dc(i,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,o=As(i,i.pendingProps),r.child=o,o.return=r;i.sibling!==null;)i=i.sibling,o=o.sibling=As(i,i.pendingProps),o.return=r;o.sibling=null}return r.child}function sp(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Ad(i)))}function aC(i,r,o){switch(r.tag){case 3:Ue(r,r.stateNode.containerInfo),dr(r,Gt,i.memoizedState.cache),cc();break;case 27:case 5:an(r);break;case 4:Ue(r,r.stateNode.containerInfo);break;case 10:dr(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(gr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?zx(i,r,o):(gr(r),i=Ds(i,r,o),i!==null?i.sibling:null);gr(r);break;case 19:var f=(i.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(dc(i,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return Bx(i,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Kt,Kt.current),u)break;return null;case 22:case 23:return r.lanes=0,Mx(i,r,o);case 24:dr(r,Gt,i.memoizedState.cache)}return Ds(i,r,o)}function qx(i,r,o){if(i!==null)if(i.memoizedProps!==r.pendingProps)Jt=!0;else{if(!sp(i,o)&&(r.flags&128)===0)return Jt=!1,aC(i,r,o);Jt=(i.flags&131072)!==0}else Jt=!1,at&&(r.flags&1048576)!==0&&y_(r,Sd,r.index);switch(r.lanes=0,r.tag){case 16:e:{i=r.pendingProps;var u=r.elementType,f=u._init;if(u=f(u._payload),r.type=u,typeof u=="function")fm(u)?(i=Ua(u,i),r.tag=1,r=Lx(null,r,u,i,o)):(r.tag=0,r=Wm(null,r,u,i,o));else{if(u!=null){if(f=u.$$typeof,f===q){r.tag=11,r=Ix(null,r,u,i,o);break e}else if(f===M){r.tag=14,r=Ox(null,r,u,i,o);break e}}throw r=ve(u)||u,Error(s(306,r,""))}}return r;case 0:return Wm(i,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=Ua(u,r.pendingProps),Lx(i,r,u,f,o);case 3:e:{if(Ue(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var v=r.memoizedState;f=v.element,Nm(i,r),yc(r,u,null,o);var w=r.memoizedState;if(u=w.cache,dr(r,Gt,u),u!==v.cache&&bm(r,[Gt],o,!0),vc(),u=w.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=Vx(i,r,u,o);break e}else if(u!==f){f=ci(Error(s(424)),r),uc(f),r=Vx(i,r,u,o);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(At=Ni(i.firstChild),Dn=r,at=!0,Ma=null,Hi=!0,o=xx(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(cc(),u===f){r=Ds(i,r,o);break e}cn(i,r,u,o)}r=r.child}return r;case 26:return $d(i,r),i===null?(o=Gb(r.type,null,r.pendingProps,null))?r.memoizedState=o:at||(o=r.type,i=r.pendingProps,u=ah(Se.current).createElement(o),u[Ft]=r,u[kt]=i,dn(u,o,i),Ct(u),r.stateNode=u):r.memoizedState=Gb(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return an(r),i===null&&at&&(u=r.stateNode=Fb(r.type,r.pendingProps,Se.current),Dn=r,Hi=!0,f=At,Ar(r.type)?(Vp=f,At=Ni(u.firstChild)):At=f),cn(i,r,r.pendingProps.children,o),$d(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&at&&((f=u=At)&&(u=MC(u,r.type,r.pendingProps,Hi),u!==null?(r.stateNode=u,Dn=r,At=Ni(u.firstChild),Hi=!1,f=!0):f=!1),f||ka(r)),an(r),f=r.type,v=r.pendingProps,w=i!==null?i.memoizedProps:null,u=v.children,Mp(f,v)?u=null:w!==null&&Mp(f,w)&&(r.flags|=32),r.memoizedState!==null&&(f=Dm(i,r,Zj,null,null,o),Uc._currentValue=f),$d(i,r),cn(i,r,u,o),r.child;case 6:return i===null&&at&&((i=o=At)&&(o=kC(o,r.pendingProps,Hi),o!==null?(r.stateNode=o,Dn=r,At=null,i=!0):i=!1),i||ka(r)),null;case 13:return zx(i,r,o);case 4:return Ue(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=Bo(r,null,u,o):cn(i,r,u,o),r.child;case 11:return Ix(i,r,r.type,r.pendingProps,o);case 7:return cn(i,r,r.pendingProps,o),r.child;case 8:return cn(i,r,r.pendingProps.children,o),r.child;case 12:return cn(i,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,dr(r,r.type,u.value),cn(i,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,La(r),f=En(f),u=u(f),r.flags|=1,cn(i,r,u,o),r.child;case 14:return Ox(i,r,r.type,r.pendingProps,o);case 15:return Dx(i,r,r.type,r.pendingProps,o);case 19:return Bx(i,r,o);case 31:return u=r.pendingProps,o=r.mode,u={mode:u.mode,children:u.children},i===null?(o=Gd(u,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=As(i.child,u),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return Mx(i,r,o);case 24:return La(r),u=En(Gt),i===null?(f=wm(),f===null&&(f=vt,v=Em(),f.pooledCache=v,v.refCount++,v!==null&&(f.pooledCacheLanes|=o),f=v),r.memoizedState={parent:u,cache:f},Am(r),dr(r,Gt,f)):((i.lanes&o)!==0&&(Nm(i,r),yc(r,null,null,o),vc()),f=i.memoizedState,v=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),dr(r,Gt,u)):(u=v.cache,dr(r,Gt,u),u!==f.cache&&bm(r,[Gt],o,!0))),cn(i,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Ms(i){i.flags|=4}function Fx(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Wb(r)){if(r=fi.current,r!==null&&((Ze&4194048)===Ze?$i!==null:(Ze&62914560)!==Ze&&(Ze&536870912)===0||r!==$i))throw pc=Sm,A_;i.flags|=8192}}function Kd(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?ql():536870912,i.lanes|=r,$o|=r)}function Sc(i,r){if(!at)switch(i.tailMode){case"hidden":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Tt(i){var r=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(r)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,r}function oC(i,r,o){var u=r.pendingProps;switch(vm(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(r),null;case 1:return Tt(r),null;case 3:return o=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Rs(Gt),St(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(lc(r)?Ms(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,b_())),Tt(r),null;case 26:return o=r.memoizedState,i===null?(Ms(r),o!==null?(Tt(r),Fx(r,o)):(Tt(r),r.flags&=-16777217)):o?o!==i.memoizedState?(Ms(r),Tt(r),Fx(r,o)):(Tt(r),r.flags&=-16777217):(i.memoizedProps!==u&&Ms(r),Tt(r),r.flags&=-16777217),null;case 27:Xt(r),o=Se.current;var f=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ms(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return Tt(r),null}i=pe.current,lc(r)?__(r):(i=Fb(f,u,o),r.stateNode=i,Ms(r))}return Tt(r),null;case 5:if(Xt(r),o=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ms(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return Tt(r),null}if(i=pe.current,lc(r))__(r);else{switch(f=ah(Se.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}i[Ft]=r,i[kt]=u;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=i;e:switch(dn(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ms(r)}}return Tt(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Ms(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=Se.current,lc(r)){if(i=r.stateNode,o=r.memoizedProps,u=null,f=Dn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Ft]=r,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Pb(i.nodeValue,o)),i||ka(r)}else i=ah(i).createTextNode(u),i[Ft]=r,r.stateNode=i}return Tt(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=lc(r),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ft]=r}else cc(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Tt(r),f=!1}else f=b_(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Os(r),r):(Os(r),null)}if(Os(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var v=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==f&&(u.flags|=2048)}return o!==i&&o&&(r.child.flags|=8192),Kd(r,r.updateQueue),Tt(r),null;case 4:return St(),i===null&&Cp(r.stateNode.containerInfo),Tt(r),null;case 10:return Rs(r.type),Tt(r),null;case 19:if(ae(Kt),f=r.memoizedState,f===null)return Tt(r),null;if(u=(r.flags&128)!==0,v=f.rendering,v===null)if(u)Sc(f,!1);else{if(Nt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=qd(i),v!==null){for(r.flags|=128,Sc(f,!1),i=v.updateQueue,r.updateQueue=i,Kd(r,i),r.subtreeFlags=0,i=o,o=r.child;o!==null;)v_(o,i),o=o.sibling;return ue(Kt,Kt.current&1|2),r.child}i=i.sibling}f.tail!==null&&jt()>Xd&&(r.flags|=128,u=!0,Sc(f,!1),r.lanes=4194304)}else{if(!u)if(i=qd(v),i!==null){if(r.flags|=128,u=!0,i=i.updateQueue,r.updateQueue=i,Kd(r,i),Sc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!at)return Tt(r),null}else 2*jt()-f.renderingStartTime>Xd&&o!==536870912&&(r.flags|=128,u=!0,Sc(f,!1),r.lanes=4194304);f.isBackwards?(v.sibling=r.child,r.child=v):(i=f.last,i!==null?i.sibling=v:r.child=v,f.last=v)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=jt(),r.sibling=null,i=Kt.current,ue(Kt,u?i&1|2:i&1),r):(Tt(r),null);case 22:case 23:return Os(r),Im(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(Tt(r),r.subtreeFlags&6&&(r.flags|=8192)):Tt(r),o=r.updateQueue,o!==null&&Kd(r,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),i!==null&&ae(Va),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Rs(Gt),Tt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function lC(i,r){switch(vm(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Rs(Gt),St(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Xt(r),null;case 13:if(Os(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));cc()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ae(Kt),null;case 4:return St(),null;case 10:return Rs(r.type),null;case 22:case 23:return Os(r),Im(),i!==null&&ae(Va),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Rs(Gt),null;case 25:return null;default:return null}}function Hx(i,r){switch(vm(r),r.tag){case 3:Rs(Gt),St();break;case 26:case 27:case 5:Xt(r);break;case 4:St();break;case 13:Os(r);break;case 19:ae(Kt);break;case 10:Rs(r.type);break;case 22:case 23:Os(r),Im(),i!==null&&ae(Va);break;case 24:Rs(Gt)}}function Ac(i,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var v=o.create,w=o.inst;u=v(),w.destroy=u}o=o.next}while(o!==f)}}catch(A){pt(r,r.return,A)}}function yr(i,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var v=f.next;u=v;do{if((u.tag&i)===i){var w=u.inst,A=w.destroy;if(A!==void 0){w.destroy=void 0,f=r;var U=o,ee=A;try{ee()}catch(se){pt(f,U,se)}}}u=u.next}while(u!==v)}}catch(se){pt(r,r.return,se)}}function $x(i){var r=i.updateQueue;if(r!==null){var o=i.stateNode;try{O_(r,o)}catch(u){pt(i,i.return,u)}}}function Gx(i,r,o){o.props=Ua(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){pt(i,r,u)}}function Nc(i,r){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){pt(i,r,f)}}function Gi(i,r){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){pt(i,r,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){pt(i,r,f)}else o.current=null}function Kx(i){var r=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){pt(i,i.return,f)}}function rp(i,r,o){try{var u=i.stateNode;CC(u,i.type,o,r),u[kt]=r}catch(f){pt(i,i.return,f)}}function Qx(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ar(i.type)||i.tag===4}function ap(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Qx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ar(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function op(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(i),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=rh));else if(u!==4&&(u===27&&Ar(i.type)&&(o=i.stateNode,r=null),i=i.child,i!==null))for(op(i,r,o),i=i.sibling;i!==null;)op(i,r,o),i=i.sibling}function Qd(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?o.insertBefore(i,r):o.appendChild(i);else if(u!==4&&(u===27&&Ar(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Qd(i,r,o),i=i.sibling;i!==null;)Qd(i,r,o),i=i.sibling}function Yx(i){var r=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);dn(r,u,o),r[Ft]=i,r[kt]=o}catch(v){pt(i,i.return,v)}}var ks=!1,It=!1,lp=!1,Xx=typeof WeakSet=="function"?WeakSet:Set,en=null;function cC(i,r){if(i=i.containerInfo,Op=hh,i=o_(i),am(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var w=0,A=-1,U=-1,ee=0,se=0,de=i,te=null;t:for(;;){for(var ne;de!==o||f!==0&&de.nodeType!==3||(A=w+f),de!==v||u!==0&&de.nodeType!==3||(U=w+u),de.nodeType===3&&(w+=de.nodeValue.length),(ne=de.firstChild)!==null;)te=de,de=ne;for(;;){if(de===i)break t;if(te===o&&++ee===f&&(A=w),te===v&&++se===u&&(U=w),(ne=de.nextSibling)!==null)break;de=te,te=de.parentNode}de=ne}o=A===-1||U===-1?null:{start:A,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(Dp={focusedElem:i,selectionRange:o},hh=!1,en=r;en!==null;)if(r=en,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,en=i;else for(;en!==null;){switch(r=en,v=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,o=r,f=v.memoizedProps,v=v.memoizedState,u=o.stateNode;try{var ke=Ua(o.type,f,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(ke,v),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ce){pt(o,o.return,Ce)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,o=i.nodeType,o===9)Pp(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Pp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,en=i;break}en=r.return}}function Wx(i,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:_r(i,o),u&4&&Ac(5,o);break;case 1:if(_r(i,o),u&4)if(i=o.stateNode,r===null)try{i.componentDidMount()}catch(w){pt(o,o.return,w)}else{var f=Ua(o.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(f,r,i.__reactInternalSnapshotBeforeUpdate)}catch(w){pt(o,o.return,w)}}u&64&&$x(o),u&512&&Nc(o,o.return);break;case 3:if(_r(i,o),u&64&&(i=o.updateQueue,i!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{O_(i,r)}catch(w){pt(o,o.return,w)}}break;case 27:r===null&&u&4&&Yx(o);case 26:case 5:_r(i,o),r===null&&u&4&&Kx(o),u&512&&Nc(o,o.return);break;case 12:_r(i,o);break;case 13:_r(i,o),u&4&&eb(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=yC.bind(null,o),PC(i,o))));break;case 22:if(u=o.memoizedState!==null||ks,!u){r=r!==null&&r.memoizedState!==null||It,f=ks;var v=It;ks=u,(It=r)&&!v?xr(i,o,(o.subtreeFlags&8772)!==0):_r(i,o),ks=f,It=v}break;case 30:break;default:_r(i,o)}}function Zx(i){var r=i.alternate;r!==null&&(i.alternate=null,Zx(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&or(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Et=null,Ln=!1;function Ps(i,r,o){for(o=o.child;o!==null;)Jx(i,r,o),o=o.sibling}function Jx(i,r,o){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(Ne,o)}catch{}switch(o.tag){case 26:It||Gi(o,r),Ps(i,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:It||Gi(o,r);var u=Et,f=Ln;Ar(o.type)&&(Et=o.stateNode,Ln=!1),Ps(i,r,o),Pc(o.stateNode),Et=u,Ln=f;break;case 5:It||Gi(o,r);case 6:if(u=Et,f=Ln,Et=null,Ps(i,r,o),Et=u,Ln=f,Et!==null)if(Ln)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(o.stateNode)}catch(v){pt(o,r,v)}else try{Et.removeChild(o.stateNode)}catch(v){pt(o,r,v)}break;case 18:Et!==null&&(Ln?(i=Et,Bb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Hc(i)):Bb(Et,o.stateNode));break;case 4:u=Et,f=Ln,Et=o.stateNode.containerInfo,Ln=!0,Ps(i,r,o),Et=u,Ln=f;break;case 0:case 11:case 14:case 15:It||yr(2,o,r),It||yr(4,o,r),Ps(i,r,o);break;case 1:It||(Gi(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Gx(o,r,u)),Ps(i,r,o);break;case 21:Ps(i,r,o);break;case 22:It=(u=It)||o.memoizedState!==null,Ps(i,r,o),It=u;break;default:Ps(i,r,o)}}function eb(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Hc(i)}catch(o){pt(r,r.return,o)}}function uC(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Xx),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Xx),r;default:throw Error(s(435,i.tag))}}function cp(i,r){var o=uC(i);r.forEach(function(u){var f=_C.bind(null,i,u);o.has(u)||(o.add(u),u.then(f,f))})}function Kn(i,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],v=i,w=r,A=w;e:for(;A!==null;){switch(A.tag){case 27:if(Ar(A.type)){Et=A.stateNode,Ln=!1;break e}break;case 5:Et=A.stateNode,Ln=!1;break e;case 3:case 4:Et=A.stateNode.containerInfo,Ln=!0;break e}A=A.return}if(Et===null)throw Error(s(160));Jx(v,w,f),Et=null,Ln=!1,v=f.alternate,v!==null&&(v.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)tb(r,i),r=r.sibling}var Ai=null;function tb(i,r){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Kn(r,i),Qn(i),u&4&&(yr(3,i,i.return),Ac(3,i),yr(5,i,i.return));break;case 1:Kn(r,i),Qn(i),u&512&&(It||o===null||Gi(o,o.return)),u&64&&ks&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Ai;if(Kn(r,i),Qn(i),u&512&&(It||o===null||Gi(o,o.return)),u&4){var v=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":v=f.getElementsByTagName("title")[0],(!v||v[pa]||v[Ft]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=f.createElement(u),f.head.insertBefore(v,f.querySelector("head > title"))),dn(v,u,o),v[Ft]=i,Ct(v),u=v;break e;case"link":var w=Yb("link","href",f).get(u+(o.href||""));if(w){for(var A=0;A<w.length;A++)if(v=w[A],v.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(A,1);break t}}v=f.createElement(u),dn(v,u,o),f.head.appendChild(v);break;case"meta":if(w=Yb("meta","content",f).get(u+(o.content||""))){for(A=0;A<w.length;A++)if(v=w[A],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(A,1);break t}}v=f.createElement(u),dn(v,u,o),f.head.appendChild(v);break;default:throw Error(s(468,u))}v[Ft]=i,Ct(v),u=v}i.stateNode=u}else Xb(f,i.type,i.stateNode);else i.stateNode=Qb(f,u,i.memoizedProps);else v!==u?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,u===null?Xb(f,i.type,i.stateNode):Qb(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&rp(i,i.memoizedProps,o.memoizedProps)}break;case 27:Kn(r,i),Qn(i),u&512&&(It||o===null||Gi(o,o.return)),o!==null&&u&4&&rp(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Kn(r,i),Qn(i),u&512&&(It||o===null||Gi(o,o.return)),i.flags&32){f=i.stateNode;try{ri(f,"")}catch(ne){pt(i,i.return,ne)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,rp(i,f,o!==null?o.memoizedProps:f)),u&1024&&(lp=!0);break;case 6:if(Kn(r,i),Qn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(ne){pt(i,i.return,ne)}}break;case 3:if(ch=null,f=Ai,Ai=oh(r.containerInfo),Kn(r,i),Ai=f,Qn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Hc(r.containerInfo)}catch(ne){pt(i,i.return,ne)}lp&&(lp=!1,nb(i));break;case 4:u=Ai,Ai=oh(i.stateNode.containerInfo),Kn(r,i),Qn(i),Ai=u;break;case 12:Kn(r,i),Qn(i);break;case 13:Kn(r,i),Qn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(pp=jt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,cp(i,u)));break;case 22:f=i.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,ee=ks,se=It;if(ks=ee||f,It=se||U,Kn(r,i),It=se,ks=ee,Qn(i),u&8192)e:for(r=i.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||U||ks||It||Ba(i)),o=null,r=i;;){if(r.tag===5||r.tag===26){if(o===null){U=o=r;try{if(v=U.stateNode,f)w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{A=U.stateNode;var de=U.memoizedProps.style,te=de!=null&&de.hasOwnProperty("display")?de.display:null;A.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ne){pt(U,U.return,ne)}}}else if(r.tag===6){if(o===null){U=r;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(ne){pt(U,U.return,ne)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,cp(i,o))));break;case 19:Kn(r,i),Qn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,cp(i,u)));break;case 30:break;case 21:break;default:Kn(r,i),Qn(i)}}function Qn(i){var r=i.flags;if(r&2){try{for(var o,u=i.return;u!==null;){if(Qx(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,v=ap(i);Qd(i,v,f);break;case 5:var w=o.stateNode;o.flags&32&&(ri(w,""),o.flags&=-33);var A=ap(i);Qd(i,A,w);break;case 3:case 4:var U=o.stateNode.containerInfo,ee=ap(i);op(i,ee,U);break;default:throw Error(s(161))}}catch(se){pt(i,i.return,se)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function nb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;nb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function _r(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Wx(i,r.alternate,r),r=r.sibling}function Ba(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:yr(4,r,r.return),Ba(r);break;case 1:Gi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Gx(r,r.return,o),Ba(r);break;case 27:Pc(r.stateNode);case 26:case 5:Gi(r,r.return),Ba(r);break;case 22:r.memoizedState===null&&Ba(r);break;case 30:Ba(r);break;default:Ba(r)}i=i.sibling}}function xr(i,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=i,v=r,w=v.flags;switch(v.tag){case 0:case 11:case 15:xr(f,v,o),Ac(4,v);break;case 1:if(xr(f,v,o),u=v,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){pt(u,u.return,ee)}if(u=v,f=u.updateQueue,f!==null){var A=u.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)I_(U[f],A)}catch(ee){pt(u,u.return,ee)}}o&&w&64&&$x(v),Nc(v,v.return);break;case 27:Yx(v);case 26:case 5:xr(f,v,o),o&&u===null&&w&4&&Kx(v),Nc(v,v.return);break;case 12:xr(f,v,o);break;case 13:xr(f,v,o),o&&w&4&&eb(f,v);break;case 22:v.memoizedState===null&&xr(f,v,o),Nc(v,v.return);break;case 30:break;default:xr(f,v,o)}r=r.sibling}}function up(i,r){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&hc(o))}function dp(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&hc(i))}function Ki(i,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ib(i,r,o,u),r=r.sibling}function ib(i,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Ki(i,r,o,u),f&2048&&Ac(9,r);break;case 1:Ki(i,r,o,u);break;case 3:Ki(i,r,o,u),f&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&hc(i)));break;case 12:if(f&2048){Ki(i,r,o,u),i=r.stateNode;try{var v=r.memoizedProps,w=v.id,A=v.onPostCommit;typeof A=="function"&&A(w,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){pt(r,r.return,U)}}else Ki(i,r,o,u);break;case 13:Ki(i,r,o,u);break;case 23:break;case 22:v=r.stateNode,w=r.alternate,r.memoizedState!==null?v._visibility&2?Ki(i,r,o,u):jc(i,r):v._visibility&2?Ki(i,r,o,u):(v._visibility|=2,qo(i,r,o,u,(r.subtreeFlags&10256)!==0)),f&2048&&up(w,r);break;case 24:Ki(i,r,o,u),f&2048&&dp(r.alternate,r);break;default:Ki(i,r,o,u)}}function qo(i,r,o,u,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var v=i,w=r,A=o,U=u,ee=w.flags;switch(w.tag){case 0:case 11:case 15:qo(v,w,A,U,f),Ac(8,w);break;case 23:break;case 22:var se=w.stateNode;w.memoizedState!==null?se._visibility&2?qo(v,w,A,U,f):jc(v,w):(se._visibility|=2,qo(v,w,A,U,f)),f&&ee&2048&&up(w.alternate,w);break;case 24:qo(v,w,A,U,f),f&&ee&2048&&dp(w.alternate,w);break;default:qo(v,w,A,U,f)}r=r.sibling}}function jc(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=i,u=r,f=u.flags;switch(u.tag){case 22:jc(o,u),f&2048&&up(u.alternate,u);break;case 24:jc(o,u),f&2048&&dp(u.alternate,u);break;default:jc(o,u)}r=r.sibling}}var Cc=8192;function Fo(i){if(i.subtreeFlags&Cc)for(i=i.child;i!==null;)sb(i),i=i.sibling}function sb(i){switch(i.tag){case 26:Fo(i),i.flags&Cc&&i.memoizedState!==null&&YC(Ai,i.memoizedState,i.memoizedProps);break;case 5:Fo(i);break;case 3:case 4:var r=Ai;Ai=oh(i.stateNode.containerInfo),Fo(i),Ai=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=Cc,Cc=16777216,Fo(i),Cc=r):Fo(i));break;default:Fo(i)}}function rb(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Rc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];en=u,ob(u,i)}rb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ab(i),i=i.sibling}function ab(i){switch(i.tag){case 0:case 11:case 15:Rc(i),i.flags&2048&&yr(9,i,i.return);break;case 3:Rc(i);break;case 12:Rc(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Yd(i)):Rc(i);break;default:Rc(i)}}function Yd(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];en=u,ob(u,i)}rb(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:yr(8,r,r.return),Yd(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Yd(r));break;default:Yd(r)}i=i.sibling}}function ob(i,r){for(;en!==null;){var o=en;switch(o.tag){case 0:case 11:case 15:yr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,en=u;else e:for(o=i;en!==null;){u=en;var f=u.sibling,v=u.return;if(Zx(u),u===o){en=null;break e}if(f!==null){f.return=v,en=f;break e}en=v}}}var dC={getCacheForType:function(i){var r=En(Gt),o=r.data.get(i);return o===void 0&&(o=i(),r.data.set(i,o)),o}},hC=typeof WeakMap=="function"?WeakMap:Map,ct=0,vt=null,$e=null,Ze=0,ut=0,Yn=null,br=!1,Ho=!1,hp=!1,Ls=0,Nt=0,Er=0,qa=0,fp=0,mi=0,$o=0,Ic=null,Vn=null,mp=!1,pp=0,Xd=1/0,Wd=null,Tr=null,un=0,wr=null,Go=null,Ko=0,gp=0,vp=null,lb=null,Oc=0,yp=null;function Xn(){if((ct&2)!==0&&Ze!==0)return Ze&-Ze;if(X.T!==null){var i=Mo;return i!==0?i:Sp()}return rr()}function cb(){mi===0&&(mi=(Ze&536870912)===0||at?Bl():536870912);var i=fi.current;return i!==null&&(i.flags|=32),mi}function Wn(i,r,o){(i===vt&&(ut===2||ut===9)||i.cancelPendingCommit!==null)&&(Qo(i,0),Sr(i,Ze,mi,!1)),ps(i,o),((ct&2)===0||i!==vt)&&(i===vt&&((ct&2)===0&&(qa|=o),Nt===4&&Sr(i,Ze,mi,!1)),Qi(i))}function ub(i,r,o){if((ct&6)!==0)throw Error(s(327));var u=!o&&(r&124)===0&&(r&i.expiredLanes)===0||ma(i,r),f=u?pC(i,r):bp(i,r,!0),v=u;do{if(f===0){Ho&&!u&&Sr(i,r,0,!1);break}else{if(o=i.current.alternate,v&&!fC(o)){f=bp(i,r,!1),v=!1;continue}if(f===2){if(v=r,i.errorRecoveryDisabledLanes&v)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var A=i;f=Ic;var U=A.current.memoizedState.isDehydrated;if(U&&(Qo(A,w).flags|=256),w=bp(A,w,!1),w!==2){if(hp&&!U){A.errorRecoveryDisabledLanes|=v,qa|=v,f=4;break e}v=Vn,Vn=f,v!==null&&(Vn===null?Vn=v:Vn.push.apply(Vn,v))}f=w}if(v=!1,f!==2)continue}}if(f===1){Qo(i,0),Sr(i,r,0,!0);break}e:{switch(u=i,v=f,v){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Sr(u,r,mi,!br);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=pp+300-jt(),10<f)){if(Sr(u,r,mi,!br),uo(u,0,!0)!==0)break e;u.timeoutHandle=zb(db.bind(null,u,o,Vn,Wd,mp,r,mi,qa,$o,br,v,2,-0,0),f);break e}db(u,o,Vn,Wd,mp,r,mi,qa,$o,br,v,0,-0,0)}}break}while(!0);Qi(i)}function db(i,r,o,u,f,v,w,A,U,ee,se,de,te,ne){if(i.timeoutHandle=-1,de=r.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(zc={stylesheets:null,count:0,unsuspend:QC},sb(r),de=XC(),de!==null)){i.cancelPendingCommit=de(yb.bind(null,i,r,v,o,u,f,w,A,U,se,1,te,ne)),Sr(i,v,w,!ee);return}yb(i,r,v,o,u,f,w,A,U)}function fC(i){for(var r=i;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],v=f.getSnapshot;f=f.value;try{if(!$n(v(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Sr(i,r,o,u){r&=~fp,r&=~qa,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var f=r;0<f;){var v=31-bn(f),w=1<<v;u[v]=-1,f&=~w}o!==0&&Di(i,o,r)}function Zd(){return(ct&6)===0?(Dc(0),!1):!0}function _p(){if($e!==null){if(ut===0)var i=$e.return;else i=$e,Cs=Pa=null,Pm(i),Uo=null,Tc=0,i=$e;for(;i!==null;)Hx(i.alternate,i),i=i.return;$e=null}}function Qo(i,r){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,IC(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),_p(),vt=i,$e=o=As(i.current,null),Ze=r,ut=0,Yn=null,br=!1,Ho=ma(i,r),hp=!1,$o=mi=fp=qa=Er=Nt=0,Vn=Ic=null,mp=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var f=31-bn(u),v=1<<f;r|=i[f],u&=~v}return Ls=r,xd(),o}function hb(i,r){qe=null,X.H=zd,r===mc||r===Cd?(r=C_(),ut=3):r===A_?(r=C_(),ut=4):ut=r===Rx?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Yn=r,$e===null&&(Nt=1,Hd(i,ci(r,i.current)))}function fb(){var i=X.H;return X.H=zd,i===null?zd:i}function mb(){var i=X.A;return X.A=dC,i}function xp(){Nt=4,br||(Ze&4194048)!==Ze&&fi.current!==null||(Ho=!0),(Er&134217727)===0&&(qa&134217727)===0||vt===null||Sr(vt,Ze,mi,!1)}function bp(i,r,o){var u=ct;ct|=2;var f=fb(),v=mb();(vt!==i||Ze!==r)&&(Wd=null,Qo(i,r)),r=!1;var w=Nt;e:do try{if(ut!==0&&$e!==null){var A=$e,U=Yn;switch(ut){case 8:_p(),w=6;break e;case 3:case 2:case 9:case 6:fi.current===null&&(r=!0);var ee=ut;if(ut=0,Yn=null,Yo(i,A,U,ee),o&&Ho){w=0;break e}break;default:ee=ut,ut=0,Yn=null,Yo(i,A,U,ee)}}mC(),w=Nt;break}catch(se){hb(i,se)}while(!0);return r&&i.shellSuspendCounter++,Cs=Pa=null,ct=u,X.H=f,X.A=v,$e===null&&(vt=null,Ze=0,xd()),w}function mC(){for(;$e!==null;)pb($e)}function pC(i,r){var o=ct;ct|=2;var u=fb(),f=mb();vt!==i||Ze!==r?(Wd=null,Xd=jt()+500,Qo(i,r)):Ho=ma(i,r);e:do try{if(ut!==0&&$e!==null){r=$e;var v=Yn;t:switch(ut){case 1:ut=0,Yn=null,Yo(i,r,v,1);break;case 2:case 9:if(N_(v)){ut=0,Yn=null,gb(r);break}r=function(){ut!==2&&ut!==9||vt!==i||(ut=7),Qi(i)},v.then(r,r);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:N_(v)?(ut=0,Yn=null,gb(r)):(ut=0,Yn=null,Yo(i,r,v,7));break;case 5:var w=null;switch($e.tag){case 26:w=$e.memoizedState;case 5:case 27:var A=$e;if(!w||Wb(w)){ut=0,Yn=null;var U=A.sibling;if(U!==null)$e=U;else{var ee=A.return;ee!==null?($e=ee,Jd(ee)):$e=null}break t}}ut=0,Yn=null,Yo(i,r,v,5);break;case 6:ut=0,Yn=null,Yo(i,r,v,6);break;case 8:_p(),Nt=6;break e;default:throw Error(s(462))}}gC();break}catch(se){hb(i,se)}while(!0);return Cs=Pa=null,X.H=u,X.A=f,ct=o,$e!==null?0:(vt=null,Ze=0,xd(),Nt)}function gC(){for(;$e!==null&&!nt();)pb($e)}function pb(i){var r=qx(i.alternate,i,Ls);i.memoizedProps=i.pendingProps,r===null?Jd(i):$e=r}function gb(i){var r=i,o=r.alternate;switch(r.tag){case 15:case 0:r=Px(o,r,r.pendingProps,r.type,void 0,Ze);break;case 11:r=Px(o,r,r.pendingProps,r.type.render,r.ref,Ze);break;case 5:Pm(r);default:Hx(o,r),r=$e=v_(r,Ls),r=qx(o,r,Ls)}i.memoizedProps=i.pendingProps,r===null?Jd(i):$e=r}function Yo(i,r,o,u){Cs=Pa=null,Pm(r),Uo=null,Tc=0;var f=r.return;try{if(rC(i,f,r,o,Ze)){Nt=1,Hd(i,ci(o,i.current)),$e=null;return}}catch(v){if(f!==null)throw $e=f,v;Nt=1,Hd(i,ci(o,i.current)),$e=null;return}r.flags&32768?(at||u===1?i=!0:Ho||(Ze&536870912)!==0?i=!1:(br=i=!0,(u===2||u===9||u===3||u===6)&&(u=fi.current,u!==null&&u.tag===13&&(u.flags|=16384))),vb(r,i)):Jd(r)}function Jd(i){var r=i;do{if((r.flags&32768)!==0){vb(r,br);return}i=r.return;var o=oC(r.alternate,r,Ls);if(o!==null){$e=o;return}if(r=r.sibling,r!==null){$e=r;return}$e=r=i}while(r!==null);Nt===0&&(Nt=5)}function vb(i,r){do{var o=lC(i.alternate,i);if(o!==null){o.flags&=32767,$e=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(i=i.sibling,i!==null)){$e=i;return}$e=i=o}while(i!==null);Nt=6,$e=null}function yb(i,r,o,u,f,v,w,A,U){i.cancelPendingCommit=null;do eh();while(un!==0);if((ct&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(v=r.lanes|r.childLanes,v|=dm,Fl(i,o,v,w,A,U),i===vt&&($e=vt=null,Ze=0),Go=r,wr=i,Ko=o,gp=v,vp=f,lb=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,xC(kn,function(){return Tb(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,f=re.p,re.p=2,w=ct,ct|=4;try{cC(i,r,o)}finally{ct=w,re.p=f,X.T=u}}un=1,_b(),xb(),bb()}}function _b(){if(un===1){un=0;var i=wr,r=Go,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=re.p;re.p=2;var f=ct;ct|=4;try{tb(r,i);var v=Dp,w=o_(i.containerInfo),A=v.focusedElem,U=v.selectionRange;if(w!==A&&A&&A.ownerDocument&&a_(A.ownerDocument.documentElement,A)){if(U!==null&&am(A)){var ee=U.start,se=U.end;if(se===void 0&&(se=ee),"selectionStart"in A)A.selectionStart=ee,A.selectionEnd=Math.min(se,A.value.length);else{var de=A.ownerDocument||document,te=de&&de.defaultView||window;if(te.getSelection){var ne=te.getSelection(),ke=A.textContent.length,Ce=Math.min(U.start,ke),mt=U.end===void 0?Ce:Math.min(U.end,ke);!ne.extend&&Ce>mt&&(w=mt,mt=Ce,Ce=w);var Q=r_(A,Ce),F=r_(A,mt);if(Q&&F&&(ne.rangeCount!==1||ne.anchorNode!==Q.node||ne.anchorOffset!==Q.offset||ne.focusNode!==F.node||ne.focusOffset!==F.offset)){var Z=de.createRange();Z.setStart(Q.node,Q.offset),ne.removeAllRanges(),Ce>mt?(ne.addRange(Z),ne.extend(F.node,F.offset)):(Z.setEnd(F.node,F.offset),ne.addRange(Z))}}}}for(de=[],ne=A;ne=ne.parentNode;)ne.nodeType===1&&de.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<de.length;A++){var le=de[A];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}hh=!!Op,Dp=Op=null}finally{ct=f,re.p=u,X.T=o}}i.current=r,un=2}}function xb(){if(un===2){un=0;var i=wr,r=Go,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=re.p;re.p=2;var f=ct;ct|=4;try{Wx(i,r.alternate,r)}finally{ct=f,re.p=u,X.T=o}}un=3}}function bb(){if(un===4||un===3){un=0,ni();var i=wr,r=Go,o=Ko,u=lb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?un=5:(un=0,Go=wr=null,Eb(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(Tr=null),ho(o),r=r.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(Ne,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=X.T,f=re.p,re.p=2,X.T=null;try{for(var v=i.onRecoverableError,w=0;w<u.length;w++){var A=u[w];v(A.value,{componentStack:A.stack})}}finally{X.T=r,re.p=f}}(Ko&3)!==0&&eh(),Qi(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===yp?Oc++:(Oc=0,yp=i):Oc=0,Dc(0)}}function Eb(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,hc(r)))}function eh(i){return _b(),xb(),bb(),Tb()}function Tb(){if(un!==5)return!1;var i=wr,r=gp;gp=0;var o=ho(Ko),u=X.T,f=re.p;try{re.p=32>o?32:o,X.T=null,o=vp,vp=null;var v=wr,w=Ko;if(un=0,Go=wr=null,Ko=0,(ct&6)!==0)throw Error(s(331));var A=ct;if(ct|=4,ab(v.current),ib(v,v.current,w,o),ct=A,Dc(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(Ne,v)}catch{}return!0}finally{re.p=f,X.T=u,Eb(i,r)}}function wb(i,r,o){r=ci(o,r),r=Xm(i.stateNode,r,2),i=mr(i,r,2),i!==null&&(ps(i,2),Qi(i))}function pt(i,r,o){if(i.tag===3)wb(i,i,o);else for(;r!==null;){if(r.tag===3){wb(r,i,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Tr===null||!Tr.has(u))){i=ci(o,i),o=jx(2),u=mr(r,o,2),u!==null&&(Cx(o,u,r,i),ps(u,2),Qi(u));break}}r=r.return}}function Ep(i,r,o){var u=i.pingCache;if(u===null){u=i.pingCache=new hC;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(hp=!0,f.add(o),i=vC.bind(null,i,r,o),r.then(i,i))}function vC(i,r,o){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,vt===i&&(Ze&o)===o&&(Nt===4||Nt===3&&(Ze&62914560)===Ze&&300>jt()-pp?(ct&2)===0&&Qo(i,0):fp|=o,$o===Ze&&($o=0)),Qi(i)}function Sb(i,r){r===0&&(r=ql()),i=Ro(i,r),i!==null&&(ps(i,r),Qi(i))}function yC(i){var r=i.memoizedState,o=0;r!==null&&(o=r.retryLane),Sb(i,o)}function _C(i,r){var o=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),Sb(i,o)}function xC(i,r){return yn(i,r)}var th=null,Xo=null,Tp=!1,nh=!1,wp=!1,Fa=0;function Qi(i){i!==Xo&&i.next===null&&(Xo===null?th=Xo=i:Xo=Xo.next=i),nh=!0,Tp||(Tp=!0,EC())}function Dc(i,r){if(!wp&&nh){wp=!0;do for(var o=!1,u=th;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var v=0;else{var w=u.suspendedLanes,A=u.pingedLanes;v=(1<<31-bn(42|i)+1)-1,v&=f&~(w&~A),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(o=!0,Cb(u,v))}else v=Ze,v=uo(u,u===vt?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||ma(u,v)||(o=!0,Cb(u,v));u=u.next}while(o);wp=!1}}function bC(){Ab()}function Ab(){nh=Tp=!1;var i=0;Fa!==0&&(RC()&&(i=Fa),Fa=0);for(var r=jt(),o=null,u=th;u!==null;){var f=u.next,v=Nb(u,r);v===0?(u.next=null,o===null?th=f:o.next=f,f===null&&(Xo=o)):(o=u,(i!==0||(v&3)!==0)&&(nh=!0)),u=f}Dc(i)}function Nb(i,r){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var w=31-bn(v),A=1<<w,U=f[w];U===-1?((A&o)===0||(A&u)!==0)&&(f[w]=Ul(A,r)):U<=r&&(i.expiredLanes|=A),v&=~A}if(r=vt,o=Ze,o=uo(i,i===r?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===r&&(ut===2||ut===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&_n(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||ma(i,o)){if(r=o&-o,r===i.callbackPriority)return r;switch(u!==null&&_n(u),ho(o)){case 2:case 8:o=xn;break;case 32:o=kn;break;case 268435456:o=bi;break;default:o=kn}return u=jb.bind(null,i),o=yn(o,u),i.callbackPriority=r,i.callbackNode=o,r}return u!==null&&u!==null&&_n(u),i.callbackPriority=2,i.callbackNode=null,2}function jb(i,r){if(un!==0&&un!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(eh()&&i.callbackNode!==o)return null;var u=Ze;return u=uo(i,i===vt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(ub(i,u,r),Nb(i,jt()),i.callbackNode!=null&&i.callbackNode===o?jb.bind(null,i):null)}function Cb(i,r){if(eh())return null;ub(i,r,!0)}function EC(){OC(function(){(ct&6)!==0?yn(hs,bC):Ab()})}function Sp(){return Fa===0&&(Fa=Bl()),Fa}function Rb(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:yo(""+i)}function Ib(i,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,i.id&&o.setAttribute("form",i.id),r.parentNode.insertBefore(o,r),i=new FormData(i),o.parentNode.removeChild(o),i}function TC(i,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var v=Rb((f[kt]||null).action),w=u.submitter;w&&(r=(r=w[kt]||null)?Rb(r.formAction):w.getAttribute("formAction"),r!==null&&(v=r,w=null));var A=new _o("action","action",null,u,f);i.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Fa!==0){var U=w?Ib(f,w):new FormData(f);$m(o,{pending:!0,data:U,method:f.method,action:v},null,U)}}else typeof v=="function"&&(A.preventDefault(),U=w?Ib(f,w):new FormData(f),$m(o,{pending:!0,data:U,method:f.method,action:v},v,U))},currentTarget:f}]})}}for(var Ap=0;Ap<um.length;Ap++){var Np=um[Ap],wC=Np.toLowerCase(),SC=Np[0].toUpperCase()+Np.slice(1);Si(wC,"on"+SC)}Si(u_,"onAnimationEnd"),Si(d_,"onAnimationIteration"),Si(h_,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(qj,"onTransitionRun"),Si(Fj,"onTransitionStart"),Si(Hj,"onTransitionCancel"),Si(f_,"onTransitionEnd"),vs("onMouseEnter",["mouseout","mouseover"]),vs("onMouseLeave",["mouseout","mouseover"]),vs("onPointerEnter",["pointerout","pointerover"]),vs("onPointerLeave",["pointerout","pointerover"]),Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mc));function Ob(i,r){r=(r&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;e:{var v=void 0;if(r)for(var w=u.length-1;0<=w;w--){var A=u[w],U=A.instance,ee=A.currentTarget;if(A=A.listener,U!==v&&f.isPropagationStopped())break e;v=A,f.currentTarget=ee;try{v(f)}catch(se){Fd(se)}f.currentTarget=null,v=U}else for(w=0;w<u.length;w++){if(A=u[w],U=A.instance,ee=A.currentTarget,A=A.listener,U!==v&&f.isPropagationStopped())break e;v=A,f.currentTarget=ee;try{v(f)}catch(se){Fd(se)}f.currentTarget=null,v=U}}}}function Ge(i,r){var o=r[$l];o===void 0&&(o=r[$l]=new Set);var u=i+"__bubble";o.has(u)||(Db(r,i,2,!1),o.add(u))}function jp(i,r,o){var u=0;r&&(u|=4),Db(o,i,u,r)}var ih="_reactListening"+Math.random().toString(36).slice(2);function Cp(i){if(!i[ih]){i[ih]=!0,Gl.forEach(function(o){o!=="selectionchange"&&(AC.has(o)||jp(o,!1,i),jp(o,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[ih]||(r[ih]=!0,jp("selectionchange",!1,r))}}function Db(i,r,o,u){switch(iE(r)){case 2:var f=JC;break;case 8:f=e1;break;default:f=Fp}o=f.bind(null,r,o,i),f=void 0,!oi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(r,o,{capture:!0,passive:f}):i.addEventListener(r,o,!0):f!==void 0?i.addEventListener(r,o,{passive:f}):i.addEventListener(r,o,!1)}function Rp(i,r,o,u,f){var v=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var A=u.stateNode.containerInfo;if(A===f)break;if(w===4)for(w=u.return;w!==null;){var U=w.tag;if((U===3||U===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;A!==null;){if(w=gs(A),w===null)return;if(U=w.tag,U===5||U===6||U===26||U===27){u=v=w;continue e}A=A.parentNode}}u=u.return}rd(function(){var ee=v,se=ai(o),de=[];e:{var te=m_.get(i);if(te!==void 0){var ne=_o,ke=i;switch(i){case"keypress":if(zi(o)===0)break e;case"keydown":case"keyup":ne=So;break;case"focusin":ke="focus",ne=Eo;break;case"focusout":ke="blur",ne=Eo;break;case"beforeblur":case"afterblur":ne=Eo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=li;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=nm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=fd;break;case u_:case d_:case h_:ne=To;break;case f_:ne=pd;break;case"scroll":case"scrollend":ne=ad;break;case"wheel":ne=Ao;break;case"copy":case"cut":case"paste":ne=wo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=sc;break;case"toggle":case"beforetoggle":ne=vd}var Ce=(r&4)!==0,mt=!Ce&&(i==="scroll"||i==="scrollend"),Q=Ce?te!==null?te+"Capture":null:te;Ce=[];for(var F=ee,Z;F!==null;){var le=F;if(Z=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Z===null||Q===null||(le=Ea(F,Q),le!=null&&Ce.push(kc(F,le,Z))),mt)break;F=F.return}0<Ce.length&&(te=new ne(te,ke,null,o,se),de.push({event:te,listeners:Ce}))}}if((r&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ne=i==="mouseout"||i==="pointerout",te&&o!==xs&&(ke=o.relatedTarget||o.fromElement)&&(gs(ke)||ke[si]))break e;if((ne||te)&&(te=se.window===se?se:(te=se.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(ke=o.relatedTarget||o.toElement,ne=ee,ke=ke?gs(ke):null,ke!==null&&(mt=c(ke),Ce=ke.tag,ke!==mt||Ce!==5&&Ce!==27&&Ce!==6)&&(ke=null)):(ne=null,ke=ee),ne!==ke)){if(Ce=li,le="onMouseLeave",Q="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(Ce=sc,le="onPointerLeave",Q="onPointerEnter",F="pointer"),mt=ne==null?te:ki(ne),Z=ke==null?te:ki(ke),te=new Ce(le,F+"leave",ne,o,se),te.target=mt,te.relatedTarget=Z,le=null,gs(se)===ee&&(Ce=new Ce(Q,F+"enter",ke,o,se),Ce.target=Z,Ce.relatedTarget=mt,le=Ce),mt=le,ne&&ke)t:{for(Ce=ne,Q=ke,F=0,Z=Ce;Z;Z=Wo(Z))F++;for(Z=0,le=Q;le;le=Wo(le))Z++;for(;0<F-Z;)Ce=Wo(Ce),F--;for(;0<Z-F;)Q=Wo(Q),Z--;for(;F--;){if(Ce===Q||Q!==null&&Ce===Q.alternate)break t;Ce=Wo(Ce),Q=Wo(Q)}Ce=null}else Ce=null;ne!==null&&Mb(de,te,ne,Ce,!1),ke!==null&&mt!==null&&Mb(de,mt,ke,Ce,!0)}}e:{if(te=ee?ki(ee):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var Te=Jy;else if($t(te))if(e_)Te=zj;else{Te=Lj;var He=Pj}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&Wl(ee.elementType)&&(Te=Jy):Te=Vj;if(Te&&(Te=Te(i,ee))){Ss(de,Te,o,se);break e}He&&He(i,te,ee),i==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&cr(te,"number",te.value)}switch(He=ee?ki(ee):window,i){case"focusin":($t(He)||He.contentEditable==="true")&&(No=He,om=ee,oc=null);break;case"focusout":oc=om=No=null;break;case"mousedown":lm=!0;break;case"contextmenu":case"mouseup":case"dragend":lm=!1,l_(de,o,se);break;case"selectionchange":if(Bj)break;case"keydown":case"keyup":l_(de,o,se)}var Ae;if(qi)e:{switch(i){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Xe?ie(i,o)&&(Ie="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Ie="onCompositionStart");Ie&&(E&&o.locale!=="ko"&&(Xe||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Xe&&(Ae=Jl()):(Vi=se,ur="value"in Vi?Vi.value:Vi.textContent,Xe=!0)),He=sh(ee,Ie),0<He.length&&(Ie=new nc(Ie,i,null,o,se),de.push({event:Ie,listeners:He}),Ae?Ie.data=Ae:(Ae=ge(o),Ae!==null&&(Ie.data=Ae)))),(Ae=_?Ht(i,o):We(i,o))&&(Ie=sh(ee,"onBeforeInput"),0<Ie.length&&(He=new nc("onBeforeInput","beforeinput",null,o,se),de.push({event:He,listeners:Ie}),He.data=Ae)),TC(de,i,ee,o,se)}Ob(de,r)})}function kc(i,r,o){return{instance:i,listener:r,currentTarget:o}}function sh(i,r){for(var o=r+"Capture",u=[];i!==null;){var f=i,v=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||v===null||(f=Ea(i,o),f!=null&&u.unshift(kc(i,f,v)),f=Ea(i,r),f!=null&&u.push(kc(i,f,v))),i.tag===3)return u;i=i.return}return[]}function Wo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Mb(i,r,o,u,f){for(var v=r._reactName,w=[];o!==null&&o!==u;){var A=o,U=A.alternate,ee=A.stateNode;if(A=A.tag,U!==null&&U===u)break;A!==5&&A!==26&&A!==27||ee===null||(U=ee,f?(ee=Ea(o,v),ee!=null&&w.unshift(kc(o,ee,U))):f||(ee=Ea(o,v),ee!=null&&w.push(kc(o,ee,U)))),o=o.return}w.length!==0&&i.push({event:r,listeners:w})}var NC=/\r\n?/g,jC=/\u0000|\uFFFD/g;function kb(i){return(typeof i=="string"?i:""+i).replace(NC,`
`).replace(jC,"")}function Pb(i,r){return r=kb(r),kb(i)===r}function rh(){}function ft(i,r,o,u,f,v){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||ri(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&ri(i,""+u);break;case"className":Pi(i,"class",u);break;case"tabIndex":Pi(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Pi(i,o,u);break;case"style":Xl(i,u,v);break;case"data":if(r!=="object"){Pi(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=yo(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(r!=="input"&&ft(i,r,"name",f.name,f,null),ft(i,r,"formEncType",f.formEncType,f,null),ft(i,r,"formMethod",f.formMethod,f,null),ft(i,r,"formTarget",f.formTarget,f,null)):(ft(i,r,"encType",f.encType,f,null),ft(i,r,"method",f.method,f,null),ft(i,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=yo(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=rh);break;case"onScroll":u!=null&&Ge("scroll",i);break;case"onScrollEnd":u!=null&&Ge("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=yo(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Ge("beforetoggle",i),Ge("toggle",i),lr(i,"popover",u);break;case"xlinkActuate":on(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":on(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":on(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":on(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":on(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":on(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":on(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":on(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":on(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":lr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=em.get(o)||o,lr(i,o,u))}}function Ip(i,r,o,u,f,v){switch(o){case"style":Xl(i,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof u=="string"?ri(i,u):(typeof u=="number"||typeof u=="bigint")&&ri(i,""+u);break;case"onScroll":u!=null&&Ge("scroll",i);break;case"onScrollEnd":u!=null&&Ge("scrollend",i);break;case"onClick":u!=null&&(i.onclick=rh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fo.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),v=i[kt]||null,v=v!=null?v[o]:null,typeof v=="function"&&i.removeEventListener(r,v,f),typeof u=="function")){typeof v!="function"&&v!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(r,u,f);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):lr(i,o,u)}}}function dn(i,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",i),Ge("load",i);var u=!1,f=!1,v;for(v in o)if(o.hasOwnProperty(v)){var w=o[v];if(w!=null)switch(v){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ft(i,r,v,w,o,null)}}f&&ft(i,r,"srcSet",o.srcSet,o,null),u&&ft(i,r,"src",o.src,o,null);return;case"input":Ge("invalid",i);var A=v=w=f=null,U=null,ee=null;for(u in o)if(o.hasOwnProperty(u)){var se=o[u];if(se!=null)switch(u){case"name":f=se;break;case"type":w=se;break;case"checked":U=se;break;case"defaultChecked":ee=se;break;case"value":v=se;break;case"defaultValue":A=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,r));break;default:ft(i,r,u,se,o,null)}}_a(i,v,A,U,ee,w,f,!1),vo(i);return;case"select":Ge("invalid",i),u=w=v=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":v=A;break;case"defaultValue":w=A;break;case"multiple":u=A;default:ft(i,r,f,A,o,null)}r=v,o=w,i.multiple=!!u,r!=null?_s(i,!!u,r,!1):o!=null&&_s(i,!!u,o,!0);return;case"textarea":Ge("invalid",i),v=f=u=null;for(w in o)if(o.hasOwnProperty(w)&&(A=o[w],A!=null))switch(w){case"value":u=A;break;case"defaultValue":f=A;break;case"children":v=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:ft(i,r,w,A,o,null)}xa(i,u,f,v),vo(i);return;case"option":for(U in o)if(o.hasOwnProperty(U)&&(u=o[U],u!=null))switch(U){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ft(i,r,U,u,o,null)}return;case"dialog":Ge("beforetoggle",i),Ge("toggle",i),Ge("cancel",i),Ge("close",i);break;case"iframe":case"object":Ge("load",i);break;case"video":case"audio":for(u=0;u<Mc.length;u++)Ge(Mc[u],i);break;case"image":Ge("error",i),Ge("load",i);break;case"details":Ge("toggle",i);break;case"embed":case"source":case"link":Ge("error",i),Ge("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in o)if(o.hasOwnProperty(ee)&&(u=o[ee],u!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ft(i,r,ee,u,o,null)}return;default:if(Wl(r)){for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!==void 0&&Ip(i,r,se,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&ft(i,r,A,u,o,null))}function CC(i,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,v=null,w=null,A=null,U=null,ee=null,se=null;for(ne in o){var de=o[ne];if(o.hasOwnProperty(ne)&&de!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":U=de;default:u.hasOwnProperty(ne)||ft(i,r,ne,null,u,de)}}for(var te in u){var ne=u[te];if(de=o[te],u.hasOwnProperty(te)&&(ne!=null||de!=null))switch(te){case"type":v=ne;break;case"name":f=ne;break;case"checked":ee=ne;break;case"defaultChecked":se=ne;break;case"value":w=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,r));break;default:ne!==de&&ft(i,r,te,ne,u,de)}}Hn(i,w,A,U,ee,se,v,f);return;case"select":ne=w=A=te=null;for(v in o)if(U=o[v],o.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":ne=U;default:u.hasOwnProperty(v)||ft(i,r,v,null,u,U)}for(f in u)if(v=u[f],U=o[f],u.hasOwnProperty(f)&&(v!=null||U!=null))switch(f){case"value":te=v;break;case"defaultValue":A=v;break;case"multiple":w=v;default:v!==U&&ft(i,r,f,v,u,U)}r=A,o=w,u=ne,te!=null?_s(i,!!o,te,!1):!!u!=!!o&&(r!=null?_s(i,!!o,r,!0):_s(i,!!o,o?[]:"",!1));return;case"textarea":ne=te=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ft(i,r,A,null,u,f)}for(w in u)if(f=u[w],v=o[w],u.hasOwnProperty(w)&&(f!=null||v!=null))switch(w){case"value":te=f;break;case"defaultValue":ne=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==v&&ft(i,r,w,f,u,v)}dt(i,te,ne);return;case"option":for(var ke in o)if(te=o[ke],o.hasOwnProperty(ke)&&te!=null&&!u.hasOwnProperty(ke))switch(ke){case"selected":i.selected=!1;break;default:ft(i,r,ke,null,u,te)}for(U in u)if(te=u[U],ne=o[U],u.hasOwnProperty(U)&&te!==ne&&(te!=null||ne!=null))switch(U){case"selected":i.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:ft(i,r,U,te,u,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in o)te=o[Ce],o.hasOwnProperty(Ce)&&te!=null&&!u.hasOwnProperty(Ce)&&ft(i,r,Ce,null,u,te);for(ee in u)if(te=u[ee],ne=o[ee],u.hasOwnProperty(ee)&&te!==ne&&(te!=null||ne!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,r));break;default:ft(i,r,ee,te,u,ne)}return;default:if(Wl(r)){for(var mt in o)te=o[mt],o.hasOwnProperty(mt)&&te!==void 0&&!u.hasOwnProperty(mt)&&Ip(i,r,mt,void 0,u,te);for(se in u)te=u[se],ne=o[se],!u.hasOwnProperty(se)||te===ne||te===void 0&&ne===void 0||Ip(i,r,se,te,u,ne);return}}for(var Q in o)te=o[Q],o.hasOwnProperty(Q)&&te!=null&&!u.hasOwnProperty(Q)&&ft(i,r,Q,null,u,te);for(de in u)te=u[de],ne=o[de],!u.hasOwnProperty(de)||te===ne||te==null&&ne==null||ft(i,r,de,te,u,ne)}var Op=null,Dp=null;function ah(i){return i.nodeType===9?i:i.ownerDocument}function Lb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vb(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Mp(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var kp=null;function RC(){var i=window.event;return i&&i.type==="popstate"?i===kp?!1:(kp=i,!0):(kp=null,!1)}var zb=typeof setTimeout=="function"?setTimeout:void 0,IC=typeof clearTimeout=="function"?clearTimeout:void 0,Ub=typeof Promise=="function"?Promise:void 0,OC=typeof queueMicrotask=="function"?queueMicrotask:typeof Ub<"u"?function(i){return Ub.resolve(null).then(i).catch(DC)}:zb;function DC(i){setTimeout(function(){throw i})}function Ar(i){return i==="head"}function Bb(i,r){var o=r,u=0,f=0;do{var v=o.nextSibling;if(i.removeChild(o),v&&v.nodeType===8)if(o=v.data,o==="/$"){if(0<u&&8>u){o=u;var w=i.ownerDocument;if(o&1&&Pc(w.documentElement),o&2&&Pc(w.body),o&4)for(o=w.head,Pc(o),w=o.firstChild;w;){var A=w.nextSibling,U=w.nodeName;w[pa]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=A}}if(f===0){i.removeChild(v),Hc(r);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=v}while(o);Hc(r)}function Pp(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Pp(o),or(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function MC(i,r,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[pa])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Ni(i.nextSibling),i===null)break}return null}function kC(i,r,o){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ni(i.nextSibling),i===null))return null;return i}function Lp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function PC(i,r){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ni(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var Vp=null;function qb(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return i;r--}else o==="/$"&&r++}i=i.previousSibling}return null}function Fb(i,r,o){switch(r=ah(o),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Pc(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);or(i)}var pi=new Map,Hb=new Set;function oh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Vs=re.d;re.d={f:LC,r:VC,D:zC,C:UC,L:BC,m:qC,X:HC,S:FC,M:$C};function LC(){var i=Vs.f(),r=Zd();return i||r}function VC(i){var r=Mi(i);r!==null&&r.tag===5&&r.type==="form"?ux(r):Vs.r(i)}var Zo=typeof document>"u"?null:document;function $b(i,r,o){var u=Zo;if(u&&typeof r=="string"&&r){var f=Pt(r);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Hb.has(f)||(Hb.add(f),i={rel:i,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),dn(r,"link",i),Ct(r),u.head.appendChild(r)))}}function zC(i){Vs.D(i),$b("dns-prefetch",i,null)}function UC(i,r){Vs.C(i,r),$b("preconnect",i,r)}function BC(i,r,o){Vs.L(i,r,o);var u=Zo;if(u&&i&&r){var f='link[rel="preload"][as="'+Pt(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Pt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Pt(o.imageSizes)+'"]')):f+='[href="'+Pt(i)+'"]';var v=f;switch(r){case"style":v=Jo(i);break;case"script":v=el(i)}pi.has(v)||(i=y({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:i,as:r},o),pi.set(v,i),u.querySelector(f)!==null||r==="style"&&u.querySelector(Lc(v))||r==="script"&&u.querySelector(Vc(v))||(r=u.createElement("link"),dn(r,"link",i),Ct(r),u.head.appendChild(r)))}}function qC(i,r){Vs.m(i,r);var o=Zo;if(o&&i){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Pt(u)+'"][href="'+Pt(i)+'"]',v=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=el(i)}if(!pi.has(v)&&(i=y({rel:"modulepreload",href:i},r),pi.set(v,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Vc(v)))return}u=o.createElement("link"),dn(u,"link",i),Ct(u),o.head.appendChild(u)}}}function FC(i,r,o){Vs.S(i,r,o);var u=Zo;if(u&&i){var f=Rn(u).hoistableStyles,v=Jo(i);r=r||"default";var w=f.get(v);if(!w){var A={loading:0,preload:null};if(w=u.querySelector(Lc(v)))A.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":r},o),(o=pi.get(v))&&zp(i,o);var U=w=u.createElement("link");Ct(U),dn(U,"link",i),U._p=new Promise(function(ee,se){U.onload=ee,U.onerror=se}),U.addEventListener("load",function(){A.loading|=1}),U.addEventListener("error",function(){A.loading|=2}),A.loading|=4,lh(w,r,u)}w={type:"stylesheet",instance:w,count:1,state:A},f.set(v,w)}}}function HC(i,r){Vs.X(i,r);var o=Zo;if(o&&i){var u=Rn(o).hoistableScripts,f=el(i),v=u.get(f);v||(v=o.querySelector(Vc(f)),v||(i=y({src:i,async:!0},r),(r=pi.get(f))&&Up(i,r),v=o.createElement("script"),Ct(v),dn(v,"link",i),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(f,v))}}function $C(i,r){Vs.M(i,r);var o=Zo;if(o&&i){var u=Rn(o).hoistableScripts,f=el(i),v=u.get(f);v||(v=o.querySelector(Vc(f)),v||(i=y({src:i,async:!0,type:"module"},r),(r=pi.get(f))&&Up(i,r),v=o.createElement("script"),Ct(v),dn(v,"link",i),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(f,v))}}function Gb(i,r,o,u){var f=(f=Se.current)?oh(f):null;if(!f)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Jo(o.href),o=Rn(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Jo(o.href);var v=Rn(f).hoistableStyles,w=v.get(i);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,w),(v=f.querySelector(Lc(i)))&&!v._p&&(w.instance=v,w.state.loading=5),pi.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},pi.set(i,o),v||GC(f,i,o,w.state))),r&&u===null)throw Error(s(528,""));return w}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=el(o),o=Rn(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Jo(i){return'href="'+Pt(i)+'"'}function Lc(i){return'link[rel="stylesheet"]['+i+"]"}function Kb(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function GC(i,r,o,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),dn(r,"link",o),Ct(r),i.head.appendChild(r))}function el(i){return'[src="'+Pt(i)+'"]'}function Vc(i){return"script[async]"+i}function Qb(i,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+Pt(o.href)+'"]');if(u)return r.instance=u,Ct(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Ct(u),dn(u,"style",f),lh(u,o.precedence,i),r.instance=u;case"stylesheet":f=Jo(o.href);var v=i.querySelector(Lc(f));if(v)return r.state.loading|=4,r.instance=v,Ct(v),v;u=Kb(o),(f=pi.get(f))&&zp(u,f),v=(i.ownerDocument||i).createElement("link"),Ct(v);var w=v;return w._p=new Promise(function(A,U){w.onload=A,w.onerror=U}),dn(v,"link",u),r.state.loading|=4,lh(v,o.precedence,i),r.instance=v;case"script":return v=el(o.src),(f=i.querySelector(Vc(v)))?(r.instance=f,Ct(f),f):(u=o,(f=pi.get(v))&&(u=y({},o),Up(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Ct(f),dn(f,"link",u),i.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,lh(u,o.precedence,i));return r.instance}function lh(i,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,v=f,w=0;w<u.length;w++){var A=u[w];if(A.dataset.precedence===r)v=A;else if(v!==f)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(i,r.firstChild))}function zp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Up(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var ch=null;function Yb(i,r,o){if(ch===null){var u=new Map,f=ch=new Map;f.set(o,u)}else f=ch,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var v=o[f];if(!(v[pa]||v[Ft]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var w=v.getAttribute(r)||"";w=i+w;var A=u.get(w);A?A.push(v):u.set(w,[v])}}return u}function Xb(i,r,o){i=i.ownerDocument||i,i.head.insertBefore(o,r==="title"?i.querySelector("head > title"):null)}function KC(i,r,o){if(o===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Wb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var zc=null;function QC(){}function YC(i,r,o){if(zc===null)throw Error(s(475));var u=zc;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Jo(o.href),v=i.querySelector(Lc(f));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=uh.bind(u),i.then(u,u)),r.state.loading|=4,r.instance=v,Ct(v);return}v=i.ownerDocument||i,o=Kb(o),(f=pi.get(f))&&zp(o,f),v=v.createElement("link"),Ct(v);var w=v;w._p=new Promise(function(A,U){w.onload=A,w.onerror=U}),dn(v,"link",o),r.instance=v}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=uh.bind(u),i.addEventListener("load",r),i.addEventListener("error",r))}}function XC(){if(zc===null)throw Error(s(475));var i=zc;return i.stylesheets&&i.count===0&&Bp(i,i.stylesheets),0<i.count?function(r){var o=setTimeout(function(){if(i.stylesheets&&Bp(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(o)}}:null}function uh(){if(this.count--,this.count===0){if(this.stylesheets)Bp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var dh=null;function Bp(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,dh=new Map,r.forEach(WC,i),dh=null,uh.call(i))}function WC(i,r){if(!(r.state.loading&4)){var o=dh.get(i);if(o)var u=o.get(null);else{o=new Map,dh.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<f.length;v++){var w=f[v];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}f=r.instance,w=f.getAttribute("data-precedence"),v=o.get(w)||u,v===u&&o.set(null,f),o.set(w,f),this.count++,u=uh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),v?v.parentNode.insertBefore(f,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),r.state.loading|=4}}var Uc={$$typeof:B,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function ZC(i,r,o,u,f,v,w,A){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ms(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ms(0),this.hiddenUpdates=ms(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=v,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Zb(i,r,o,u,f,v,w,A,U,ee,se,de){return i=new ZC(i,r,o,w,A,U,ee,de),r=1,v===!0&&(r|=24),v=Gn(3,null,null,r),i.current=v,v.stateNode=i,r=Em(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:u,isDehydrated:o,cache:r},Am(v),i}function Jb(i){return i?(i=Io,i):Io}function eE(i,r,o,u,f,v){f=Jb(f),u.context===null?u.context=f:u.pendingContext=f,u=fr(r),u.payload={element:o},v=v===void 0?null:v,v!==null&&(u.callback=v),o=mr(i,u,r),o!==null&&(Wn(o,i,r),gc(o,i,r))}function tE(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<r?o:r}}function qp(i,r){tE(i,r),(i=i.alternate)&&tE(i,r)}function nE(i){if(i.tag===13){var r=Ro(i,67108864);r!==null&&Wn(r,i,67108864),qp(i,67108864)}}var hh=!0;function JC(i,r,o,u){var f=X.T;X.T=null;var v=re.p;try{re.p=2,Fp(i,r,o,u)}finally{re.p=v,X.T=f}}function e1(i,r,o,u){var f=X.T;X.T=null;var v=re.p;try{re.p=8,Fp(i,r,o,u)}finally{re.p=v,X.T=f}}function Fp(i,r,o,u){if(hh){var f=Hp(u);if(f===null)Rp(i,r,u,fh,o),sE(i,u);else if(n1(f,i,r,o,u))u.stopPropagation();else if(sE(i,u),r&4&&-1<t1.indexOf(i)){for(;f!==null;){var v=Mi(f);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var w=Ei(v.pendingLanes);if(w!==0){var A=v;for(A.pendingLanes|=2,A.entangledLanes|=2;w;){var U=1<<31-bn(w);A.entanglements[1]|=U,w&=~U}Qi(v),(ct&6)===0&&(Xd=jt()+500,Dc(0))}}break;case 13:A=Ro(v,2),A!==null&&Wn(A,v,2),Zd(),qp(v,2)}if(v=Hp(u),v===null&&Rp(i,r,u,fh,o),v===f)break;f=v}f!==null&&u.stopPropagation()}else Rp(i,r,u,null,o)}}function Hp(i){return i=ai(i),$p(i)}var fh=null;function $p(i){if(fh=null,i=gs(i),i!==null){var r=c(i);if(r===null)i=null;else{var o=r.tag;if(o===13){if(i=d(r),i!==null)return i;i=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return fh=i,null}function iE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ua()){case hs:return 2;case xn:return 8;case kn:case ir:return 32;case bi:return 268435456;default:return 32}default:return 32}}var Gp=!1,Nr=null,jr=null,Cr=null,Bc=new Map,qc=new Map,Rr=[],t1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sE(i,r){switch(i){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Bc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(r.pointerId)}}function Fc(i,r,o,u,f,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:v,targetContainers:[f]},r!==null&&(r=Mi(r),r!==null&&nE(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),i)}function n1(i,r,o,u,f){switch(r){case"focusin":return Nr=Fc(Nr,i,r,o,u,f),!0;case"dragenter":return jr=Fc(jr,i,r,o,u,f),!0;case"mouseover":return Cr=Fc(Cr,i,r,o,u,f),!0;case"pointerover":var v=f.pointerId;return Bc.set(v,Fc(Bc.get(v)||null,i,r,o,u,f)),!0;case"gotpointercapture":return v=f.pointerId,qc.set(v,Fc(qc.get(v)||null,i,r,o,u,f)),!0}return!1}function rE(i){var r=gs(i.target);if(r!==null){var o=c(r);if(o!==null){if(r=o.tag,r===13){if(r=d(o),r!==null){i.blockedOn=r,Zu(i.priority,function(){if(o.tag===13){var u=Xn();u=sr(u);var f=Ro(o,u);f!==null&&Wn(f,o,u),qp(o,u)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function mh(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var o=Hp(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);xs=u,o.target.dispatchEvent(u),xs=null}else return r=Mi(o),r!==null&&nE(r),i.blockedOn=o,!1;r.shift()}return!0}function aE(i,r,o){mh(i)&&o.delete(r)}function i1(){Gp=!1,Nr!==null&&mh(Nr)&&(Nr=null),jr!==null&&mh(jr)&&(jr=null),Cr!==null&&mh(Cr)&&(Cr=null),Bc.forEach(aE),qc.forEach(aE)}function ph(i,r){i.blockedOn===r&&(i.blockedOn=null,Gp||(Gp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,i1)))}var gh=null;function oE(i){gh!==i&&(gh=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){gh===i&&(gh=null);for(var r=0;r<i.length;r+=3){var o=i[r],u=i[r+1],f=i[r+2];if(typeof u!="function"){if($p(u||o)===null)continue;break}var v=Mi(o);v!==null&&(i.splice(r,3),r-=3,$m(v,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Hc(i){function r(U){return ph(U,i)}Nr!==null&&ph(Nr,i),jr!==null&&ph(jr,i),Cr!==null&&ph(Cr,i),Bc.forEach(r),qc.forEach(r);for(var o=0;o<Rr.length;o++){var u=Rr[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Rr.length&&(o=Rr[0],o.blockedOn===null);)rE(o),o.blockedOn===null&&Rr.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],v=o[u+1],w=f[kt]||null;if(typeof v=="function")w||oE(o);else if(w){var A=null;if(v&&v.hasAttribute("formAction")){if(f=v,w=v[kt]||null)A=w.formAction;else if($p(f)!==null)continue}else A=w.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),oE(o)}}}function Kp(i){this._internalRoot=i}vh.prototype.render=Kp.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,u=Xn();eE(o,u,i,r,null,null)},vh.prototype.unmount=Kp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;eE(i.current,2,null,i,null,null),Zd(),r[si]=null}};function vh(i){this._internalRoot=i}vh.prototype.unstable_scheduleHydration=function(i){if(i){var r=rr();i={blockedOn:null,target:i,priority:r};for(var o=0;o<Rr.length&&r!==0&&r<Rr[o].priority;o++);Rr.splice(o,0,i),o===0&&rE(i)}};var lE=e.version;if(lE!=="19.1.0")throw Error(s(527,lE,"19.1.0"));re.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(r),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var s1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{Ne=yh.inject(s1),Be=yh}catch{}}return Gc.createRoot=function(i,r){if(!a(i))throw Error(s(299));var o=!1,u="",f=wx,v=Sx,w=Ax,A=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(A=r.unstable_transitionCallbacks)),r=Zb(i,1,!1,null,null,o,u,f,v,w,A,null),i[si]=r.current,Cp(i),new Kp(r)},Gc.hydrateRoot=function(i,r,o){if(!a(i))throw Error(s(299));var u=!1,f="",v=wx,w=Sx,A=Ax,U=null,ee=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(U=o.unstable_transitionCallbacks),o.formState!==void 0&&(ee=o.formState)),r=Zb(i,1,!0,r,o??null,u,f,v,w,A,U,ee),r.context=Jb(null),o=r.current,u=Xn(),u=sr(u),f=fr(u),f.callback=null,mr(o,f,u),o=u,r.current.lanes=o,ps(r,o),Qi(r),i[si]=r.current,Cp(i),new vh(r)},Gc.version="19.1.0",Gc}var yE;function p1(){if(yE)return Xp.exports;yE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xp.exports=m1(),Xp.exports}var g1=p1(),HT=FT();const ll=Nu(HT);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hu(){return hu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},hu.apply(this,arguments)}var Vr;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Vr||(Vr={}));const _E="popstate";function v1(n){n===void 0&&(n={});function e(s,a){let{pathname:c,search:d,hash:m}=s.location;return Cg("",{pathname:c,search:d,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:Uh(a)}return _1(e,t,null,n)}function Mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $T(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function y1(){return Math.random().toString(36).substr(2,8)}function xE(n,e){return{usr:n.state,key:n.key,idx:e}}function Cg(n,e,t,s){return t===void 0&&(t=null),hu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Nl(e):e,{state:t,key:e&&e.key||s||y1()})}function Uh(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Nl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function _1(n,e,t,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:c=!1}=s,d=a.history,m=Vr.Pop,p=null,g=y();g==null&&(g=0,d.replaceState(hu({},d.state,{idx:g}),""));function y(){return(d.state||{idx:null}).idx}function x(){m=Vr.Pop;let I=y(),Y=I==null?null:I-g;g=I,p&&p({action:m,location:k.location,delta:Y})}function T(I,Y){m=Vr.Push;let $=Cg(k.location,I,Y);g=y()+1;let B=xE($,g),q=k.createHref($);try{d.pushState(B,"",q)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;a.location.assign(q)}c&&p&&p({action:m,location:k.location,delta:1})}function S(I,Y){m=Vr.Replace;let $=Cg(k.location,I,Y);g=y();let B=xE($,g),q=k.createHref($);d.replaceState(B,"",q),c&&p&&p({action:m,location:k.location,delta:0})}function j(I){let Y=a.location.origin!=="null"?a.location.origin:a.location.href,$=typeof I=="string"?I:Uh(I);return $=$.replace(/ $/,"%20"),Mt(Y,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,Y)}let k={get action(){return m},get location(){return n(a,d)},listen(I){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(_E,x),p=I,()=>{a.removeEventListener(_E,x),p=null}},createHref(I){return e(a,I)},createURL:j,encodeLocation(I){let Y=j(I);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:T,replace:S,go(I){return d.go(I)}};return k}var bE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(bE||(bE={}));function x1(n,e,t){return t===void 0&&(t="/"),b1(n,e,t)}function b1(n,e,t,s){let a=typeof e=="string"?Nl(e):e,c=yv(a.pathname||"/",t);if(c==null)return null;let d=GT(n);E1(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=M1(c);m=I1(d[p],g)}return m}function GT(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let a=(c,d,m)=>{let p={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};p.relativePath.startsWith("/")&&(Mt(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let g=qr([s,p.relativePath]),y=t.concat(p);c.children&&c.children.length>0&&(Mt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),GT(c.children,e,y,g)),!(c.path==null&&!c.index)&&e.push({path:g,score:C1(g,c.index),routesMeta:y})};return n.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))a(c,d);else for(let p of KT(c.path))a(c,d,p)}),e}function KT(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),c=t.replace(/\?$/,"");if(s.length===0)return a?[c,""]:[c];let d=KT(s.join("/")),m=[];return m.push(...d.map(p=>p===""?c:[c,p].join("/"))),a&&m.push(...d),m.map(p=>n.startsWith("/")&&p===""?"/":p)}function E1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:R1(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const T1=/^:[\w-]+$/,w1=3,S1=2,A1=1,N1=10,j1=-2,EE=n=>n==="*";function C1(n,e){let t=n.split("/"),s=t.length;return t.some(EE)&&(s+=j1),e&&(s+=S1),t.filter(a=>!EE(a)).reduce((a,c)=>a+(T1.test(c)?w1:c===""?A1:N1),s)}function R1(n,e){return n.length===e.length&&n.slice(0,-1).every((s,a)=>s===e[a])?n[n.length-1]-e[e.length-1]:0}function I1(n,e,t){let{routesMeta:s}=n,a={},c="/",d=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,y=c==="/"?e:e.slice(c.length)||"/",x=O1({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),T=p.route;if(!x)return null;Object.assign(a,x.params),d.push({params:a,pathname:qr([c,x.pathname]),pathnameBase:V1(qr([c,x.pathnameBase])),route:T}),x.pathnameBase!=="/"&&(c=qr([c,x.pathnameBase]))}return d}function O1(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=D1(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let c=a[0],d=c.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:s.reduce((g,y,x)=>{let{paramName:T,isOptional:S}=y;if(T==="*"){let k=m[x]||"";d=c.slice(0,c.length-k.length).replace(/(.)\/+$/,"$1")}const j=m[x];return S&&!j?g[T]=void 0:g[T]=(j||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:n}}function D1(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),$T(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function M1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $T(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function yv(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function k1(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:a=""}=typeof n=="string"?Nl(n):n;return{pathname:t?t.startsWith("/")?t:P1(t,e):e,search:z1(s),hash:U1(a)}}function P1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function eg(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function L1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _v(n,e){let t=L1(n);return e?t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function xv(n,e,t,s){s===void 0&&(s=!1);let a;typeof n=="string"?a=Nl(n):(a=hu({},n),Mt(!a.pathname||!a.pathname.includes("?"),eg("?","pathname","search",a)),Mt(!a.pathname||!a.pathname.includes("#"),eg("#","pathname","hash",a)),Mt(!a.search||!a.search.includes("#"),eg("#","search","hash",a)));let c=n===""||a.pathname==="",d=c?"/":a.pathname,m;if(d==null)m=t;else{let x=e.length-1;if(!s&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),x-=1;a.pathname=T.join("/")}m=x>=0?e[x]:"/"}let p=k1(a,m),g=d&&d!=="/"&&d.endsWith("/"),y=(c||d===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}const qr=n=>n.join("/").replace(/\/\/+/g,"/"),V1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),z1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,U1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function B1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const QT=["post","put","patch","delete"];new Set(QT);const q1=["get",...QT];new Set(q1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},fu.apply(this,arguments)}const bv=b.createContext(null),F1=b.createContext(null),sa=b.createContext(null),ff=b.createContext(null),us=b.createContext({outlet:null,matches:[],isDataRoute:!1}),YT=b.createContext(null);function H1(n,e){let{relative:t}=e===void 0?{}:e;jl()||Mt(!1);let{basename:s,navigator:a}=b.useContext(sa),{hash:c,pathname:d,search:m}=WT(n,{relative:t}),p=d;return s!=="/"&&(p=d==="/"?s:qr([s,d])),a.createHref({pathname:p,search:m,hash:c})}function jl(){return b.useContext(ff)!=null}function Oi(){return jl()||Mt(!1),b.useContext(ff).location}function XT(n){b.useContext(sa).static||b.useLayoutEffect(n)}function Yt(){let{isDataRoute:n}=b.useContext(us);return n?rR():$1()}function $1(){jl()||Mt(!1);let n=b.useContext(bv),{basename:e,future:t,navigator:s}=b.useContext(sa),{matches:a}=b.useContext(us),{pathname:c}=Oi(),d=JSON.stringify(_v(a,t.v7_relativeSplatPath)),m=b.useRef(!1);return XT(()=>{m.current=!0}),b.useCallback(function(g,y){if(y===void 0&&(y={}),!m.current)return;if(typeof g=="number"){s.go(g);return}let x=xv(g,JSON.parse(d),c,y.relative==="path");n==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:qr([e,x.pathname])),(y.replace?s.replace:s.push)(x,y.state,y)},[e,s,d,c,n])}const G1=b.createContext(null);function K1(n){let e=b.useContext(us).outlet;return e&&b.createElement(G1.Provider,{value:n},e)}function ti(){let{matches:n}=b.useContext(us),e=n[n.length-1];return e?e.params:{}}function WT(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=b.useContext(sa),{matches:a}=b.useContext(us),{pathname:c}=Oi(),d=JSON.stringify(_v(a,s.v7_relativeSplatPath));return b.useMemo(()=>xv(n,JSON.parse(d),c,t==="path"),[n,d,c,t])}function Q1(n,e){return Y1(n,e)}function Y1(n,e,t,s){jl()||Mt(!1);let{navigator:a}=b.useContext(sa),{matches:c}=b.useContext(us),d=c[c.length-1],m=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let g=Oi(),y;if(e){var x;let I=typeof e=="string"?Nl(e):e;p==="/"||(x=I.pathname)!=null&&x.startsWith(p)||Mt(!1),y=I}else y=g;let T=y.pathname||"/",S=T;if(p!=="/"){let I=p.replace(/^\//,"").split("/");S="/"+T.replace(/^\//,"").split("/").slice(I.length).join("/")}let j=x1(n,{pathname:S}),k=eR(j&&j.map(I=>Object.assign({},I,{params:Object.assign({},m,I.params),pathname:qr([p,a.encodeLocation?a.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?p:qr([p,a.encodeLocation?a.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),c,t,s);return e&&k?b.createElement(ff.Provider,{value:{location:fu({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Vr.Pop}},k):k}function X1(){let n=sR(),e=B1(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:a},t):null,null)}const W1=b.createElement(X1,null);class Z1 extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?b.createElement(us.Provider,{value:this.props.routeContext},b.createElement(YT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J1(n){let{routeContext:e,match:t,children:s}=n,a=b.useContext(bv);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(us.Provider,{value:e},s)}function eR(n,e,t,s){var a;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var c;if(!t)return null;if(t.errors)n=t.matches;else if((c=s)!=null&&c.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let d=n,m=(a=t)==null?void 0:a.errors;if(m!=null){let y=d.findIndex(x=>x.route.id&&m?.[x.route.id]!==void 0);y>=0||Mt(!1),d=d.slice(0,Math.min(d.length,y+1))}let p=!1,g=-1;if(t&&s&&s.v7_partialHydration)for(let y=0;y<d.length;y++){let x=d[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=y),x.route.id){let{loaderData:T,errors:S}=t,j=x.route.loader&&T[x.route.id]===void 0&&(!S||S[x.route.id]===void 0);if(x.route.lazy||j){p=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((y,x,T)=>{let S,j=!1,k=null,I=null;t&&(S=m&&x.route.id?m[x.route.id]:void 0,k=x.route.errorElement||W1,p&&(g<0&&T===0?(aR("route-fallback"),j=!0,I=null):g===T&&(j=!0,I=x.route.hydrateFallbackElement||null)));let Y=e.concat(d.slice(0,T+1)),$=()=>{let B;return S?B=k:j?B=I:x.route.Component?B=b.createElement(x.route.Component,null):x.route.element?B=x.route.element:B=y,b.createElement(J1,{match:x,routeContext:{outlet:y,matches:Y,isDataRoute:t!=null},children:B})};return t&&(x.route.ErrorBoundary||x.route.errorElement||T===0)?b.createElement(Z1,{location:t.location,revalidation:t.revalidation,component:k,error:S,children:$(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):$()},null)}var ZT=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(ZT||{}),JT=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(JT||{});function tR(n){let e=b.useContext(bv);return e||Mt(!1),e}function nR(n){let e=b.useContext(F1);return e||Mt(!1),e}function iR(n){let e=b.useContext(us);return e||Mt(!1),e}function ew(n){let e=iR(),t=e.matches[e.matches.length-1];return t.route.id||Mt(!1),t.route.id}function sR(){var n;let e=b.useContext(YT),t=nR(),s=ew();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function rR(){let{router:n}=tR(ZT.UseNavigateStable),e=ew(JT.UseNavigateStable),t=b.useRef(!1);return XT(()=>{t.current=!0}),b.useCallback(function(a,c){c===void 0&&(c={}),t.current&&(typeof a=="number"?n.navigate(a):n.navigate(a,fu({fromRouteId:e},c)))},[n,e])}const TE={};function aR(n,e,t){TE[n]||(TE[n]=!0)}function oR(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function tw(n){let{to:e,replace:t,state:s,relative:a}=n;jl()||Mt(!1);let{future:c,static:d}=b.useContext(sa),{matches:m}=b.useContext(us),{pathname:p}=Oi(),g=Yt(),y=xv(e,_v(m,c.v7_relativeSplatPath),p,a==="path"),x=JSON.stringify(y);return b.useEffect(()=>g(JSON.parse(x),{replace:t,state:s,relative:a}),[g,x,a,t,s]),null}function mf(n){return K1(n.context)}function et(n){Mt(!1)}function lR(n){let{basename:e="/",children:t=null,location:s,navigationType:a=Vr.Pop,navigator:c,static:d=!1,future:m}=n;jl()&&Mt(!1);let p=e.replace(/^\/*/,"/"),g=b.useMemo(()=>({basename:p,navigator:c,static:d,future:fu({v7_relativeSplatPath:!1},m)}),[p,m,c,d]);typeof s=="string"&&(s=Nl(s));let{pathname:y="/",search:x="",hash:T="",state:S=null,key:j="default"}=s,k=b.useMemo(()=>{let I=yv(y,p);return I==null?null:{location:{pathname:I,search:x,hash:T,state:S,key:j},navigationType:a}},[p,y,x,T,S,j,a]);return k==null?null:b.createElement(sa.Provider,{value:g},b.createElement(ff.Provider,{children:t,value:k}))}function cR(n){let{children:e,location:t}=n;return Q1(Rg(e),t)}new Promise(()=>{});function Rg(n,e){e===void 0&&(e=[]);let t=[];return b.Children.forEach(n,(s,a)=>{if(!b.isValidElement(s))return;let c=[...e,a];if(s.type===b.Fragment){t.push.apply(t,Rg(s.props.children,c));return}s.type!==et&&Mt(!1),!s.props.index||!s.props.children||Mt(!1);let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Rg(s.props.children,c)),t.push(d)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ig(){return Ig=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Ig.apply(this,arguments)}function uR(n,e){if(n==null)return{};var t={},s=Object.keys(n),a,c;for(c=0;c<s.length;c++)a=s[c],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}function dR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function hR(n,e){return n.button===0&&(!e||e==="_self")&&!dR(n)}function Og(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(a=>[t,a]):[[t,s]])},[]))}function fR(n,e){let t=Og(n);return e&&e.forEach((s,a)=>{t.has(a)||e.getAll(a).forEach(c=>{t.append(a,c)})}),t}const mR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pR="6";try{window.__reactRouterVersion=pR}catch{}const gR="startTransition",wE=u1[gR];function vR(n){let{basename:e,children:t,future:s,window:a}=n,c=b.useRef();c.current==null&&(c.current=v1({window:a,v5Compat:!0}));let d=c.current,[m,p]=b.useState({action:d.action,location:d.location}),{v7_startTransition:g}=s||{},y=b.useCallback(x=>{g&&wE?wE(()=>p(x)):p(x)},[p,g]);return b.useLayoutEffect(()=>d.listen(y),[d,y]),b.useEffect(()=>oR(s),[s]),b.createElement(lR,{basename:e,children:t,location:m.location,navigationType:m.action,navigator:d,future:s})}const yR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_R=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=b.forwardRef(function(e,t){let{onClick:s,relative:a,reloadDocument:c,replace:d,state:m,target:p,to:g,preventScrollReset:y,viewTransition:x}=e,T=uR(e,mR),{basename:S}=b.useContext(sa),j,k=!1;if(typeof g=="string"&&_R.test(g)&&(j=g,yR))try{let B=new URL(window.location.href),q=g.startsWith("//")?new URL(B.protocol+g):new URL(g),H=yv(q.pathname,S);q.origin===B.origin&&H!=null?g=H+q.search+q.hash:k=!0}catch{}let I=H1(g,{relative:a}),Y=xR(g,{replace:d,state:m,target:p,preventScrollReset:y,relative:a,viewTransition:x});function $(B){s&&s(B),B.defaultPrevented||Y(B)}return b.createElement("a",Ig({},T,{href:j||I,onClick:k||c?s:$,ref:t,target:p}))});var SE;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(SE||(SE={}));var AE;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(AE||(AE={}));function xR(n,e){let{target:t,replace:s,state:a,preventScrollReset:c,relative:d,viewTransition:m}=e===void 0?{}:e,p=Yt(),g=Oi(),y=WT(n,{relative:d});return b.useCallback(x=>{if(hR(x,t)){x.preventDefault();let T=s!==void 0?s:Uh(g)===Uh(y);p(n,{replace:T,state:a,preventScrollReset:c,relative:d,viewTransition:m})}},[g,p,y,s,a,t,n,c,d,m])}function bR(n){let e=b.useRef(Og(n)),t=b.useRef(!1),s=Oi(),a=b.useMemo(()=>fR(s.search,t.current?null:e.current),[s.search]),c=Yt(),d=b.useCallback((m,p)=>{const g=Og(typeof m=="function"?m(a):m);t.current=!0,c("?"+g,p)},[c,a]);return[a,d]}function ER(){const{pathname:n}=Oi();return b.useEffect(()=>{window.scrollTo(0,0)},[n]),null}const TR=()=>{};var NE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},wR=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=n[t++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=n[t++],d=n[t++],m=n[t++],p=((a&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const c=n[t++],d=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},iw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const c=n[a],d=a+1<n.length,m=d?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,y=c>>2,x=(c&3)<<4|m>>4;let T=(m&15)<<2|g>>6,S=g&63;p||(S=64,d||(T=64)),s.push(t[y],t[x],t[T],t[S])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const c=t[n.charAt(a++)],m=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const x=a<n.length?t[n.charAt(a)]:64;if(++a,c==null||m==null||g==null||x==null)throw new SR;const T=c<<2|m>>4;if(s.push(T),g!==64){const S=m<<4&240|g>>2;if(s.push(S),x!==64){const j=g<<6&192|x;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class SR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AR=function(n){const e=nw(n);return iw.encodeByteArray(e,!0)},Bh=function(n){return AR(n).replace(/\./g,"")},sw=function(n){try{return iw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=()=>NR().__FIREBASE_DEFAULTS__,CR=()=>{if(typeof process>"u"||typeof NE>"u")return;const n=NE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sw(n[1]);return e&&JSON.parse(e)},pf=()=>{try{return TR()||jR()||CR()||RR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rw=n=>{var e,t;return(t=(e=pf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},IR=n=>{const e=rw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},aw=()=>{var n;return(n=pf())===null||n===void 0?void 0:n.config},ow=n=>{var e;return(e=pf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Bh(JSON.stringify(t)),Bh(JSON.stringify(d)),""].join(".")}const nu={};function MR(){const n={prod:[],emulator:[]};for(const e of Object.keys(nu))nu[e]?n.emulator.push(e):n.prod.push(e);return n}function kR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let jE=!1;function cw(n,e){if(typeof window>"u"||typeof document>"u"||!Cl(window.location.host)||nu[n]===e||nu[n]||jE)return;nu[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",c=MR().prod.length>0;function d(){const T=document.getElementById(s);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,S){T.setAttribute("width","24"),T.setAttribute("id",S),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{jE=!0,d()},T}function y(T,S){T.setAttribute("id",S),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=kR(s),S=t("text"),j=document.getElementById(S)||document.createElement("span"),k=t("learnmore"),I=document.getElementById(k)||document.createElement("a"),Y=t("preprendIcon"),$=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const B=T.element;m(B),y(I,k);const q=g();p($,Y),B.append($,j,I,q),document.body.appendChild(B)}c?(j.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function LR(){var n;const e=(n=pf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function UR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BR(){const n=Cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qR(){return!LR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FR(){try{return typeof indexedDB=="object"}catch{return!1}}function HR(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="FirebaseError";class tr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=$R,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ju.prototype.create)}}class ju{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?GR(c,s):"Error",m=`${this.serviceName}: ${d} (${a}).`;return new tr(a,m,s)}}function GR(n,e){return n.replace(KR,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const KR=/\{\$([^}]+)}/g;function QR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ya(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const c=n[a],d=e[a];if(CE(c)&&CE(d)){if(!Ya(c,d))return!1}else if(c!==d)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function CE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Yc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,c]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function Xc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function YR(n,e){const t=new XR(n,e);return t.subscribe.bind(t)}class XR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");WR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=tg),a.error===void 0&&(a.error=tg),a.complete===void 0&&(a.complete=tg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n){return n&&n._delegate?n._delegate:n}class Xa{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZR=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new OR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e?.identifier),a=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eI(e))try{this.getOrInitializeService({instanceIdentifier:Ha})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ha){return this.instances.has(e)}getOptions(e=Ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:JR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ha){return this.component?this.component.multipleInstances?e:Ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JR(n){return n===Ha?void 0:n}function eI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const nI={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},iI=Ke.INFO,sI={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},rI=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=sI[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ev{constructor(e){this.name=e,this._logLevel=iI,this._logHandler=rI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const aI=(n,e)=>e.some(t=>n instanceof t);let RE,IE;function oI(){return RE||(RE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lI(){return IE||(IE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uw=new WeakMap,Dg=new WeakMap,dw=new WeakMap,ng=new WeakMap,Tv=new WeakMap;function cI(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",c),n.removeEventListener("error",d)},c=()=>{t(Fr(n.result)),a()},d=()=>{s(n.error),a()};n.addEventListener("success",c),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&uw.set(t,n)}).catch(()=>{}),Tv.set(e,n),e}function uI(n){if(Dg.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",d),n.removeEventListener("abort",d)},c=()=>{t(),a()},d=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",c),n.addEventListener("error",d),n.addEventListener("abort",d)});Dg.set(n,e)}let Mg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Dg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function dI(n){Mg=n(Mg)}function hI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(ig(this),e,...t);return dw.set(s,e.sort?e.sort():[e]),Fr(s)}:lI().includes(n)?function(...e){return n.apply(ig(this),e),Fr(uw.get(this))}:function(...e){return Fr(n.apply(ig(this),e))}}function fI(n){return typeof n=="function"?hI(n):(n instanceof IDBTransaction&&uI(n),aI(n,oI())?new Proxy(n,Mg):n)}function Fr(n){if(n instanceof IDBRequest)return cI(n);if(ng.has(n))return ng.get(n);const e=fI(n);return e!==n&&(ng.set(n,e),Tv.set(e,n)),e}const ig=n=>Tv.get(n);function mI(n,e,{blocked:t,upgrade:s,blocking:a,terminated:c}={}){const d=indexedDB.open(n,e),m=Fr(d);return s&&d.addEventListener("upgradeneeded",p=>{s(Fr(d.result),p.oldVersion,p.newVersion,Fr(d.transaction),p)}),t&&d.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const pI=["get","getKey","getAll","getAllKeys","count"],gI=["put","add","delete","clear"],sg=new Map;function OE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sg.get(e))return sg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=gI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||pI.includes(t)))return;const c=async function(d,...m){const p=this.transaction(d,a?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[t](...m),a&&p.done]))[0]};return sg.set(e,c),c}dI(n=>({...n,get:(e,t,s)=>OE(e,t)||n.get(e,t,s),has:(e,t)=>!!OE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function yI(n){const e=n.getComponent();return e?.type==="VERSION"}const kg="@firebase/app",DE="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Ev("@firebase/app"),_I="@firebase/app-compat",xI="@firebase/analytics-compat",bI="@firebase/analytics",EI="@firebase/app-check-compat",TI="@firebase/app-check",wI="@firebase/auth",SI="@firebase/auth-compat",AI="@firebase/database",NI="@firebase/data-connect",jI="@firebase/database-compat",CI="@firebase/functions",RI="@firebase/functions-compat",II="@firebase/installations",OI="@firebase/installations-compat",DI="@firebase/messaging",MI="@firebase/messaging-compat",kI="@firebase/performance",PI="@firebase/performance-compat",LI="@firebase/remote-config",VI="@firebase/remote-config-compat",zI="@firebase/storage",UI="@firebase/storage-compat",BI="@firebase/firestore",qI="@firebase/ai",FI="@firebase/firestore-compat",HI="firebase",$I="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="[DEFAULT]",GI={[kg]:"fire-core",[_I]:"fire-core-compat",[bI]:"fire-analytics",[xI]:"fire-analytics-compat",[TI]:"fire-app-check",[EI]:"fire-app-check-compat",[wI]:"fire-auth",[SI]:"fire-auth-compat",[AI]:"fire-rtdb",[NI]:"fire-data-connect",[jI]:"fire-rtdb-compat",[CI]:"fire-fn",[RI]:"fire-fn-compat",[II]:"fire-iid",[OI]:"fire-iid-compat",[DI]:"fire-fcm",[MI]:"fire-fcm-compat",[kI]:"fire-perf",[PI]:"fire-perf-compat",[LI]:"fire-rc",[VI]:"fire-rc-compat",[zI]:"fire-gcs",[UI]:"fire-gcs-compat",[BI]:"fire-fst",[FI]:"fire-fst-compat",[qI]:"fire-vertex","fire-js":"fire-js",[HI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Map,KI=new Map,Lg=new Map;function ME(n,e){try{n.container.addComponent(e)}catch(t){Gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vl(n){const e=n.name;if(Lg.has(e))return Gs.debug(`There were multiple attempts to register component ${e}.`),!1;Lg.set(e,n);for(const t of qh.values())ME(t,n);for(const t of KI.values())ME(t,n);return!0}function wv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hr=new ju("app","Firebase",QI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=$I;function hw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Pg,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw Hr.create("bad-app-name",{appName:String(a)});if(t||(t=aw()),!t)throw Hr.create("no-options");const c=qh.get(a);if(c){if(Ya(t,c.options)&&Ya(s,c.config))return c;throw Hr.create("duplicate-app",{appName:a})}const d=new tI(a);for(const p of Lg.values())d.addComponent(p);const m=new YI(t,s,d);return qh.set(a,m),m}function fw(n=Pg){const e=qh.get(n);if(!e&&n===Pg&&aw())return hw();if(!e)throw Hr.create("no-app",{appName:n});return e}function $r(n,e,t){var s;let a=(s=GI[n])!==null&&s!==void 0?s:n;t&&(a+=`-${t}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gs.warn(m.join(" "));return}vl(new Xa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="firebase-heartbeat-database",WI=1,mu="firebase-heartbeat-store";let rg=null;function mw(){return rg||(rg=mI(XI,WI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(mu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Hr.create("idb-open",{originalErrorMessage:n.message})})),rg}async function ZI(n){try{const t=(await mw()).transaction(mu),s=await t.objectStore(mu).get(pw(n));return await t.done,s}catch(e){if(e instanceof tr)Gs.warn(e.message);else{const t=Hr.create("idb-get",{originalErrorMessage:e?.message});Gs.warn(t.message)}}}async function kE(n,e){try{const s=(await mw()).transaction(mu,"readwrite");await s.objectStore(mu).put(e,pw(n)),await s.done}catch(t){if(t instanceof tr)Gs.warn(t.message);else{const s=Hr.create("idb-set",{originalErrorMessage:t?.message});Gs.warn(s.message)}}}function pw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=1024,e2=30;class t2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new i2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=PE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>e2){const d=s2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Gs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=PE(),{heartbeatsToSend:s,unsentEntries:a}=n2(this._heartbeatsCache.heartbeats),c=Bh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Gs.warn(t),""}}}function PE(){return new Date().toISOString().substring(0,10)}function n2(n,e=JI){const t=[];let s=n.slice();for(const a of n){const c=t.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),LE(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),LE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class i2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FR()?HR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ZI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return kE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return kE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function LE(n){return Bh(JSON.stringify({version:2,heartbeats:n})).length}function s2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(n){vl(new Xa("platform-logger",e=>new vI(e),"PRIVATE")),vl(new Xa("heartbeat",e=>new t2(e),"PRIVATE")),$r(kg,DE,n),$r(kg,DE,"esm2017"),$r("fire-js","")}r2("");var a2="firebase",o2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(a2,o2,"app");function Sv(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function gw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l2=gw,vw=new ju("auth","Firebase",gw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new Ev("@firebase/auth");function c2(n,...e){Fh.logLevel<=Ke.WARN&&Fh.warn(`Auth (${Rl}): ${n}`,...e)}function Ch(n,...e){Fh.logLevel<=Ke.ERROR&&Fh.error(`Auth (${Rl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(n,...e){throw Av(n,...e)}function Wi(n,...e){return Av(n,...e)}function yw(n,e,t){const s=Object.assign(Object.assign({},l2()),{[e]:t});return new ju("auth","Firebase",s).create(e,{appName:n.name})}function Zi(n){return yw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Av(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return vw.create(n,...e)}function De(n,e,...t){if(!n)throw Av(e,...t)}function qs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ch(e),new Error(e)}function Ks(n,e){n||qs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function u2(){return VE()==="http:"||VE()==="https:"}function VE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(u2()||zR()||"connection"in navigator)?navigator.onLine:!0}function h2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ks(t>e,"Short delay should be less than long delay!"),this.isMobile=PR()||UR()}get(){return d2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n,e){Ks(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],p2=new Ru(3e4,6e4);function ra(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ds(n,e,t,s,a={}){return xw(n,a,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const m=Cu(Object.assign({key:n.config.apiKey},d)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:p},c);return VR()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Cl(n.emulatorConfig.host)&&(g.credentials="include"),_w.fetch()(await bw(n,n.config.apiHost,t,m),g)})}async function xw(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},f2),e);try{const a=new v2(n),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw _h(n,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw _h(n,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw _h(n,"email-already-in-use",d);if(p==="USER_DISABLED")throw _h(n,"user-disabled",d);const y=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw yw(n,y,g);Ri(n,y)}}catch(a){if(a instanceof tr)throw a;Ri(n,"network-request-failed",{message:String(a)})}}async function Iu(n,e,t,s,a={}){const c=await ds(n,e,t,s,a);return"mfaPendingCredential"in c&&Ri(n,"multi-factor-auth-required",{_serverResponse:c}),c}async function bw(n,e,t,s){const a=`${e}${t}?${s}`,c=n,d=c.config.emulator?Nv(n.config,a):`${n.config.apiScheme}://${a}`;return m2.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function g2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class v2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Wi(this.auth,"network-request-failed")),p2.get())})}}function _h(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Wi(n,e,s);return a.customData._tokenResponse=t,a}function zE(n){return n!==void 0&&n.enterprise!==void 0}class y2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return g2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _2(n,e){return ds(n,"GET","/v2/recaptchaConfig",ra(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(n,e){return ds(n,"POST","/v1/accounts:delete",e)}async function Hh(n,e){return ds(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function b2(n,e=!1){const t=xt(n),s=await t.getIdToken(e),a=jv(s);De(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,d=c?.sign_in_provider;return{claims:a,token:s,authTime:iu(ag(a.auth_time)),issuedAtTime:iu(ag(a.iat)),expirationTime:iu(ag(a.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function ag(n){return Number(n)*1e3}function jv(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{const a=sw(t);return a?JSON.parse(a):(Ch("Failed to decode base64 JWT payload"),null)}catch(a){return Ch("Caught error parsing JWT payload as JSON",a?.toString()),null}}function UE(n){const e=jv(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof tr&&E2(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function E2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(n){var e;const t=n.auth,s=await n.getIdToken(),a=await Wa(n,Hh(t,{idToken:s}));De(a?.users.length,t,"internal-error");const c=a.users[0];n._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Ew(c.providerUserInfo):[],m=S2(n.providerData,d),p=n.isAnonymous,g=!(n.email&&c.passwordHash)&&!m?.length,y=p?g:!1,x={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new zg(c.createdAt,c.lastLoginAt),isAnonymous:y};Object.assign(n,x)}async function w2(n){const e=xt(n);await $h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S2(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function Ew(n){return n.map(e=>{var{providerId:t}=e,s=Sv(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(n,e){const t=await xw(n,{},async()=>{const s=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=n.config,d=await bw(n,a,"/v1/token",`key=${c}`),m=await n._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return n.emulatorConfig&&Cl(n.emulatorConfig.host)&&(p.credentials="include"),_w.fetch()(d,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function N2(n,e){return ds(n,"POST","/v2/accounts:revokeToken",ra(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=UE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:c}=await A2(e,t);this.updateTokensAndExpiration(s,a,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:c}=t,d=new dl;return s&&(De(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),a&&(De(typeof a=="string","internal-error",{appName:e}),d.accessToken=a),c&&(De(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ci{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,c=Sv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new T2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new zg(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await Wa(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return b2(this,e)}reload(){return w2(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await $h(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Zi(this.auth));const e=await this.getIdToken();return await Wa(this,x2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,c,d,m,p,g,y;const x=(s=t.displayName)!==null&&s!==void 0?s:void 0,T=(a=t.email)!==null&&a!==void 0?a:void 0,S=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,j=(d=t.photoURL)!==null&&d!==void 0?d:void 0,k=(m=t.tenantId)!==null&&m!==void 0?m:void 0,I=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(g=t.createdAt)!==null&&g!==void 0?g:void 0,$=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:B,emailVerified:q,isAnonymous:H,providerData:K,stsTokenManager:M}=t;De(B&&M,e,"internal-error");const N=dl.fromJSON(this.name,M);De(typeof B=="string",e,"internal-error"),Or(x,e.name),Or(T,e.name),De(typeof q=="boolean",e,"internal-error"),De(typeof H=="boolean",e,"internal-error"),Or(S,e.name),Or(j,e.name),Or(k,e.name),Or(I,e.name),Or(Y,e.name),Or($,e.name);const O=new Ci({uid:B,auth:e,email:T,emailVerified:q,displayName:x,isAnonymous:H,photoURL:j,phoneNumber:S,tenantId:k,stsTokenManager:N,createdAt:Y,lastLoginAt:$});return K&&Array.isArray(K)&&(O.providerData=K.map(D=>Object.assign({},D))),I&&(O._redirectEventId=I),O}static async _fromIdTokenResponse(e,t,s=!1){const a=new dl;a.updateFromServerResponse(t);const c=new Ci({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await $h(c),c}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];De(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?Ew(a.providerUserInfo):[],d=!(a.email&&a.passwordHash)&&!c?.length,m=new dl;m.updateFromIdToken(s);const p=new Ci({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:d}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new zg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!c?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new Map;function Fs(n){Ks(n instanceof Function,"Expected a class definition");let e=BE.get(n);return e?(Ks(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,BE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Tw.type="NONE";const qE=Tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(n,e,t){return`firebase:${n}:${e}:${t}`}class hl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:c}=this.auth;this.fullUserKey=Rh(this.userKey,a.apiKey,c),this.fullPersistenceKey=Rh("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Hh(this.auth,{idToken:e}).catch(()=>{});return t?Ci._fromGetAccountInfoResponse(this.auth,t,e):null}return Ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new hl(Fs(qE),e,s);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=a[0]||Fs(qE);const d=Rh(s,e.config.apiKey,e.name);let m=null;for(const g of t)try{const y=await g._get(d);if(y){let x;if(typeof y=="string"){const T=await Hh(e,{idToken:y}).catch(()=>{});if(!T)break;x=await Ci._fromGetAccountInfoResponse(e,T,y)}else x=Ci._fromJSON(e,y);g!==c&&(m=x),c=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new hl(c,e,s):(c=p[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new hl(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ww(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cw(e))return"Blackberry";if(Rw(e))return"Webos";if(Sw(e))return"Safari";if((e.includes("chrome/")||Aw(e))&&!e.includes("edge/"))return"Chrome";if(jw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function ww(n=Cn()){return/firefox\//i.test(n)}function Sw(n=Cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Aw(n=Cn()){return/crios\//i.test(n)}function Nw(n=Cn()){return/iemobile/i.test(n)}function jw(n=Cn()){return/android/i.test(n)}function Cw(n=Cn()){return/blackberry/i.test(n)}function Rw(n=Cn()){return/webos/i.test(n)}function Cv(n=Cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function j2(n=Cn()){var e;return Cv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function C2(){return BR()&&document.documentMode===10}function Iw(n=Cn()){return Cv(n)||jw(n)||Rw(n)||Cw(n)||/windows phone/i.test(n)||Nw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(n,e=[]){let t;switch(n){case"Browser":t=FE(Cn());break;case"Worker":t=`${FE(Cn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Rl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,m)=>{try{const p=e(c);d(p)}catch(p){m(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2(n,e={}){return ds(n,"GET","/v2/passwordPolicy",ra(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=6;class D2{constructor(e){var t,s,a,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:O2,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,c,d,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new HE(this),this.idTokenSubscription=new HE(this),this.beforeStateQueue=new R2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fs(t)),this._initializationPromise=this.queue(async()=>{var s,a,c;if(!this._deleted&&(this.persistenceManager=await hl.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Hh(this,{idToken:e}),s=await Ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Zn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=a?._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===m)&&p?.user&&(a=p.user,c=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(a)}catch(d){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $h(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=h2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Zi(this));const t=e?xt(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await I2(this),t=new D2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ju("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await N2(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fs(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await hl.create(this,[Fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{d=!0,p()}}else{const p=e.addObserver(t);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ow(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&c2(`Error while retrieving App Check token: ${t.error}`),t?.token}}function io(n){return xt(n)}class HE{constructor(e){this.auth=e,this.observer=null,this.addObserver=YR(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k2(n){gf=n}function Dw(n){return gf.loadJS(n)}function P2(){return gf.recaptchaEnterpriseScript}function L2(){return gf.gapiScript}function V2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class z2{constructor(){this.enterprise=new U2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class U2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const B2="recaptcha-enterprise",Mw="NO_RECAPTCHA";class q2{constructor(e){this.type=B2,this.auth=io(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{_2(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new y2(p);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,d(g.siteKey)}}).catch(p=>{m(p)})})}function a(c,d,m){const p=window.grecaptcha;zE(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(g=>{d(g)}).catch(()=>{d(Mw)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new z2().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(m=>{if(!t&&zE(window.grecaptcha))a(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=P2();p.length!==0&&(p+=m),Dw(p).then(()=>{a(m,c,d)}).catch(g=>{d(g)})}}).catch(m=>{d(m)})})}}async function $E(n,e,t,s=!1,a=!1){const c=new q2(n);let d;if(a)d=Mw;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Ug(n,e,t,s,a){var c;if(!((c=n._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await $E(n,e,t,t==="getOobCode");return s(n,d)}else return s(n,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await $E(n,e,t,t==="getOobCode");return s(n,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(n,e){const t=wv(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(Ya(c,e??{}))return a;Ri(a,"already-initialized")}return t.initialize({options:e})}function H2(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Fs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function $2(n,e,t){const s=io(n);De(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,c=kw(e),{host:d,port:m}=G2(e),p=m===null?"":`:${m}`,g={url:`${c}//${d}${p}/`},y=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){De(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),De(Ya(g,s.config.emulator)&&Ya(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,Cl(d)?(lw(`${c}//${d}${p}`),cw("Auth",!0)):K2()}function kw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function G2(n){const e=kw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const c=a[1];return{host:c,port:GE(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:GE(d)}}}function GE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function K2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qs("not implemented")}_getIdTokenResponse(e){return qs("not implemented")}_linkToIdToken(e,t){return qs("not implemented")}_getReauthenticationResolver(e){return qs("not implemented")}}async function Q2(n,e){return ds(n,"POST","/v1/accounts:update",e)}async function Y2(n,e){return ds(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(n,e){return Iu(n,"POST","/v1/accounts:signInWithPassword",ra(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(n,e){return Iu(n,"POST","/v1/accounts:signInWithEmailLink",ra(n,e))}async function Z2(n,e){return Iu(n,"POST","/v1/accounts:signInWithEmailLink",ra(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends Rv{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new pu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new pu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ug(e,t,"signInWithPassword",X2);case"emailLink":return W2(e,{email:this._email,oobCode:this._password});default:Ri(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ug(e,s,"signUpPassword",Y2);case"emailLink":return Z2(e,{idToken:t,email:this._email,oobCode:this._password});default:Ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(n,e){return Iu(n,"POST","/v1/accounts:signInWithIdp",ra(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="http://localhost";class Za extends Rv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Za(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,c=Sv(t,["providerId","signInMethod"]);if(!s||!a)return null;const d=new Za(s,a);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return fl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,fl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fl(e,t)}buildRequest(){const e={requestUri:J2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tO(n){const e=Yc(Xc(n)).link,t=e?Yc(Xc(e)).deep_link_id:null,s=Yc(Xc(n)).deep_link_id;return(s?Yc(Xc(s)).link:null)||s||t||e||n}class Iv{constructor(e){var t,s,a,c,d,m;const p=Yc(Xc(e)),g=(t=p.apiKey)!==null&&t!==void 0?t:null,y=(s=p.oobCode)!==null&&s!==void 0?s:null,x=eO((a=p.mode)!==null&&a!==void 0?a:null);De(g&&y&&x,"argument-error"),this.apiKey=g,this.operation=x,this.code=y,this.continueUrl=(c=p.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=p.lang)!==null&&d!==void 0?d:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=tO(e);try{return new Iv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.providerId=so.PROVIDER_ID}static credential(e,t){return pu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Iv.parseLink(t);return De(s,"argument-error"),pu._fromEmailAndCode(e,s.code,s.tenantId)}}so.PROVIDER_ID="password";so.EMAIL_PASSWORD_SIGN_IN_METHOD="password";so.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends Pw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Ou{constructor(){super("facebook.com")}static credential(e){return Za._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Za._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return kr.credential(t,s)}catch{return null}}}kr.GOOGLE_SIGN_IN_METHOD="google.com";kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Ou{constructor(){super("github.com")}static credential(e){return Za._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Ou{constructor(){super("twitter.com")}static credential(e,t){return Za._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Lr.credential(t,s)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(n,e){return Iu(n,"POST","/v1/accounts:signUp",ra(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const c=await Ci._fromIdTokenResponse(e,s,a),d=KE(s);return new Ja({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=KE(s);return new Ja({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function KE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends tr{constructor(e,t,s,a){var c;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Gh(e,t,s,a)}}function Lw(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(n,c,e,s):c})}async function iO(n,e,t=!1){const s=await Wa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ja._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(n,e,t=!1){const{auth:s}=n;if(Zn(s.app))return Promise.reject(Zi(s));const a="reauthenticate";try{const c=await Wa(n,Lw(s,a,e,n),t);De(c.idToken,s,"internal-error");const d=jv(c.idToken);De(d,s,"internal-error");const{sub:m}=d;return De(n.uid===m,s,"user-mismatch"),Ja._forOperation(n,a,c)}catch(c){throw c?.code==="auth/user-not-found"&&Ri(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(n,e,t=!1){if(Zn(n.app))return Promise.reject(Zi(n));const s="signIn",a=await Lw(n,s,e),c=await Ja._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(c.user),c}async function sO(n,e){return zw(io(n),e)}async function rO(n,e){return Vw(xt(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uw(n){const e=io(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aO(n,e,t){if(Zn(n.app))return Promise.reject(Zi(n));const s=io(n),d=await Ug(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nO).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Uw(n),p}),m=await Ja._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function oO(n,e,t){return Zn(n.app)?Promise.reject(Zi(n)):sO(xt(n),so.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Uw(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(n,e){return ds(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bw(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=xt(n),c={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await Wa(s,lO(s.auth,c));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const m=s.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function cO(n,e){const t=xt(n);return Zn(t.auth.app)?Promise.reject(Zi(t.auth)):qw(t,e,null)}function uO(n,e){return qw(xt(n),null,e)}async function qw(n,e,t){const{auth:s}=n,c={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(c.email=e),t&&(c.password=t);const d=await Wa(n,Q2(s,c));await n._updateTokensIfNecessary(d,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(n,e){return xt(n).setPersistence(e)}function hO(n,e,t,s){return xt(n).onIdTokenChanged(e,t,s)}function fO(n,e,t){return xt(n).beforeAuthStateChanged(e,t)}function Du(n,e,t,s){return xt(n).onAuthStateChanged(e,t,s)}function Fw(n){return xt(n).signOut()}const Kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=1e3,pO=10;class $w extends Hw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Iw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);C2()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,pO):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},mO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$w.type="LOCAL";const Gw=$w;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw extends Hw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Kw.type="SESSION";const Qw=Kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new vf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:c}=t.data,d=this.handlersMap[a];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const m=Array.from(d).map(async g=>g(t.origin,c)),p=await gO(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,d;return new Promise((m,p)=>{const g=Ov("",20);a.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:a,onMessage(x){const T=x;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(y),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(T.data.response);break;default:clearTimeout(y),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),a.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(){return window}function yO(n){Ji().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(){return typeof Ji().WorkerGlobalScope<"u"&&typeof Ji().importScripts=="function"}async function _O(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xO(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function bO(){return Yw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="firebaseLocalStorageDb",EO=1,Qh="firebaseLocalStorage",Ww="fbase_key";class Mu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yf(n,e){return n.transaction([Qh],e?"readwrite":"readonly").objectStore(Qh)}function TO(){const n=indexedDB.deleteDatabase(Xw);return new Mu(n).toPromise()}function Bg(){const n=indexedDB.open(Xw,EO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Qh,{keyPath:Ww})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Qh)?e(s):(s.close(),await TO(),e(await Bg()))})})}async function QE(n,e,t){const s=yf(n,!0).put({[Ww]:e,value:t});return new Mu(s).toPromise()}async function wO(n,e){const t=yf(n,!1).get(e),s=await new Mu(t).toPromise();return s===void 0?null:s.value}function YE(n,e){const t=yf(n,!0).delete(e);return new Mu(t).toPromise()}const SO=800,AO=3;class Zw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>AO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vf._getInstance(bO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _O(),!this.activeServiceWorker)return;this.sender=new vO(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bg();return await QE(e,Kh,"1"),await YE(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>QE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>wO(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>YE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=yf(a,!1).getAll();return new Mu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zw.type="LOCAL";const NO=Zw;new Ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(n,e){return e?Fs(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv extends Rv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function CO(n){return zw(n.auth,new Dv(n),n.bypassAuthState)}function RO(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),Vw(t,new Dv(n),n.bypassAuthState)}async function IO(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),iO(t,new Dv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,t,s,a,c=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CO;case"linkViaPopup":case"linkViaRedirect":return IO;case"reauthViaPopup":case"reauthViaRedirect":return RO;default:Ri(this.auth,"internal-error")}}resolve(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=new Ru(2e3,1e4);class cl extends Jw{constructor(e,t,s,a,c){super(e,t,a,c),this.provider=s,this.authWindow=null,this.pollId=null,cl.currentPopupAction&&cl.currentPopupAction.cancel(),cl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Ks(this.filter.length===1,"Popup operations only handle one event");const e=Ov();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OO.get())};e()}}cl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO="pendingRedirect",Ih=new Map;class MO extends Jw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ih.get(this.auth._key());if(!e){try{const s=await kO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ih.set(this.auth._key(),e)}return this.bypassAuthState||Ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kO(n,e){const t=VO(e),s=LO(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function PO(n,e){Ih.set(n._key(),e)}function LO(n){return Fs(n._redirectPersistence)}function VO(n){return Rh(DO,n.config.apiKey,n.name)}async function zO(n,e,t=!1){if(Zn(n.app))return Promise.reject(Zi(n));const s=io(n),a=jO(s,e),d=await new MO(s,a,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=10*60*1e3;class BO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!eS(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Wi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UO&&this.cachedEventUids.clear(),this.cachedEventUids.has(XE(e))}saveEventToCache(e){this.cachedEventUids.add(XE(e)),this.lastProcessedEventTime=Date.now()}}function XE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function eS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function qO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(n,e={}){return ds(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$O=/^https?/;async function GO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await FO(n);for(const t of e)try{if(KO(t))return}catch{}Ri(n,"unauthorized-domain")}function KO(n){const e=Vg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!$O.test(t))return!1;if(HO.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=new Ru(3e4,6e4);function WE(){const n=Ji().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function YO(n){return new Promise((e,t)=>{var s,a,c;function d(){WE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WE(),t(Wi(n,"network-request-failed"))},timeout:QO.get()})}if(!((a=(s=Ji().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((c=Ji().gapi)===null||c===void 0)&&c.load)d();else{const m=V2("iframefcb");return Ji()[m]=()=>{gapi.load?d():t(Wi(n,"network-request-failed"))},Dw(`${L2()}?onload=${m}`).catch(p=>t(p))}}).catch(e=>{throw Oh=null,e})}let Oh=null;function XO(n){return Oh=Oh||YO(n),Oh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new Ru(5e3,15e3),ZO="__/auth/iframe",JO="emulator/auth/iframe",eD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nD(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Nv(e,JO):`https://${n.config.authDomain}/${ZO}`,s={apiKey:e.apiKey,appName:n.name,v:Rl},a=tD.get(n.config.apiHost);a&&(s.eid=a);const c=n._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Cu(s).slice(1)}`}async function iD(n){const e=await XO(n),t=Ji().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:nD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eD,dontclear:!0},s=>new Promise(async(a,c)=>{await s.restyle({setHideOnLeave:!1});const d=Wi(n,"network-request-failed"),m=Ji().setTimeout(()=>{c(d)},WO.get());function p(){Ji().clearTimeout(m),a(s)}s.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rD=500,aD=600,oD="_blank",lD="http://localhost";class ZE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cD(n,e,t,s=rD,a=aD){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},sD),{width:s.toString(),height:a.toString(),top:c,left:d}),g=Cn().toLowerCase();t&&(m=Aw(g)?oD:t),ww(g)&&(e=e||lD,p.scrollbars="yes");const y=Object.entries(p).reduce((T,[S,j])=>`${T}${S}=${j},`,"");if(j2(g)&&m!=="_self")return uD(e||"",m),new ZE(null);const x=window.open(e||"",m,y);De(x,n,"popup-blocked");try{x.focus()}catch{}return new ZE(x)}function uD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="__/auth/handler",hD="emulator/auth/handler",fD=encodeURIComponent("fac");async function JE(n,e,t,s,a,c){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Rl,eventId:a};if(e instanceof Pw){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",QR(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,x]of Object.entries({}))d[y]=x}if(e instanceof Ou){const y=e.getScopes().filter(x=>x!=="");y.length>0&&(d.scopes=y.join(","))}n.tenantId&&(d.tid=n.tenantId);const m=d;for(const y of Object.keys(m))m[y]===void 0&&delete m[y];const p=await n._getAppCheckToken(),g=p?`#${fD}=${encodeURIComponent(p)}`:"";return`${mD(n)}?${Cu(m).slice(1)}${g}`}function mD({config:n}){return n.emulator?Nv(n,hD):`https://${n.authDomain}/${dD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="webStorageSupport";class pD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qw,this._completeRedirectFn=zO,this._overrideRedirectResult=PO}async _openPopup(e,t,s,a){var c;Ks((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await JE(e,t,s,Vg(),a);return cD(e,d,Ov())}async _openRedirect(e,t,s,a){await this._originValidation(e);const c=await JE(e,t,s,Vg(),a);return yO(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Ks(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await iD(e),s=new BO(e);return t.register("authEvent",a=>(De(a?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(og,{type:og},a=>{var c;const d=(c=a?.[0])===null||c===void 0?void 0:c[og];d!==void 0&&t(!!d),Ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Iw()||Sw()||Cv()}}const gD=pD;var e0="@firebase/auth",t0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _D(n){vl(new Xa("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;De(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:m,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ow(n)},g=new M2(s,a,c,p);return H2(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),vl(new Xa("auth-internal",e=>{const t=io(e.getProvider("auth").getImmediate());return(s=>new vD(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(e0,t0,yD(n)),$r(e0,t0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=5*60,bD=ow("authIdTokenMaxAge")||xD;let n0=null;const ED=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>bD)return;const a=t?.token;n0!==a&&(n0=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function TD(n=fw()){const e=wv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=F2(n,{popupRedirectResolver:gD,persistence:[NO,Gw,Qw]}),s=ow("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=ED(c.toString());fO(t,d,()=>d(t.currentUser)),hO(t,m=>d(m))}}const a=rw("auth");return a&&$2(t,`http://${a}`),t}function wD(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}k2({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const c=Wi("internal-error");c.customData=a,t(c)},s.type="text/javascript",s.charset="UTF-8",wD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_D("Browser");var i0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gr,tS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function O(){}O.prototype=N.prototype,M.D=N.prototype,M.prototype=new O,M.prototype.constructor=M,M.C=function(D,P,L){for(var C=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)C[ve-2]=arguments[ve];return N.prototype[P].apply(D,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,N,O){O||(O=0);var D=Array(16);if(typeof N=="string")for(var P=0;16>P;++P)D[P]=N.charCodeAt(O++)|N.charCodeAt(O++)<<8|N.charCodeAt(O++)<<16|N.charCodeAt(O++)<<24;else for(P=0;16>P;++P)D[P]=N[O++]|N[O++]<<8|N[O++]<<16|N[O++]<<24;N=M.g[0],O=M.g[1],P=M.g[2];var L=M.g[3],C=N+(L^O&(P^L))+D[0]+3614090360&4294967295;N=O+(C<<7&4294967295|C>>>25),C=L+(P^N&(O^P))+D[1]+3905402710&4294967295,L=N+(C<<12&4294967295|C>>>20),C=P+(O^L&(N^O))+D[2]+606105819&4294967295,P=L+(C<<17&4294967295|C>>>15),C=O+(N^P&(L^N))+D[3]+3250441966&4294967295,O=P+(C<<22&4294967295|C>>>10),C=N+(L^O&(P^L))+D[4]+4118548399&4294967295,N=O+(C<<7&4294967295|C>>>25),C=L+(P^N&(O^P))+D[5]+1200080426&4294967295,L=N+(C<<12&4294967295|C>>>20),C=P+(O^L&(N^O))+D[6]+2821735955&4294967295,P=L+(C<<17&4294967295|C>>>15),C=O+(N^P&(L^N))+D[7]+4249261313&4294967295,O=P+(C<<22&4294967295|C>>>10),C=N+(L^O&(P^L))+D[8]+1770035416&4294967295,N=O+(C<<7&4294967295|C>>>25),C=L+(P^N&(O^P))+D[9]+2336552879&4294967295,L=N+(C<<12&4294967295|C>>>20),C=P+(O^L&(N^O))+D[10]+4294925233&4294967295,P=L+(C<<17&4294967295|C>>>15),C=O+(N^P&(L^N))+D[11]+2304563134&4294967295,O=P+(C<<22&4294967295|C>>>10),C=N+(L^O&(P^L))+D[12]+1804603682&4294967295,N=O+(C<<7&4294967295|C>>>25),C=L+(P^N&(O^P))+D[13]+4254626195&4294967295,L=N+(C<<12&4294967295|C>>>20),C=P+(O^L&(N^O))+D[14]+2792965006&4294967295,P=L+(C<<17&4294967295|C>>>15),C=O+(N^P&(L^N))+D[15]+1236535329&4294967295,O=P+(C<<22&4294967295|C>>>10),C=N+(P^L&(O^P))+D[1]+4129170786&4294967295,N=O+(C<<5&4294967295|C>>>27),C=L+(O^P&(N^O))+D[6]+3225465664&4294967295,L=N+(C<<9&4294967295|C>>>23),C=P+(N^O&(L^N))+D[11]+643717713&4294967295,P=L+(C<<14&4294967295|C>>>18),C=O+(L^N&(P^L))+D[0]+3921069994&4294967295,O=P+(C<<20&4294967295|C>>>12),C=N+(P^L&(O^P))+D[5]+3593408605&4294967295,N=O+(C<<5&4294967295|C>>>27),C=L+(O^P&(N^O))+D[10]+38016083&4294967295,L=N+(C<<9&4294967295|C>>>23),C=P+(N^O&(L^N))+D[15]+3634488961&4294967295,P=L+(C<<14&4294967295|C>>>18),C=O+(L^N&(P^L))+D[4]+3889429448&4294967295,O=P+(C<<20&4294967295|C>>>12),C=N+(P^L&(O^P))+D[9]+568446438&4294967295,N=O+(C<<5&4294967295|C>>>27),C=L+(O^P&(N^O))+D[14]+3275163606&4294967295,L=N+(C<<9&4294967295|C>>>23),C=P+(N^O&(L^N))+D[3]+4107603335&4294967295,P=L+(C<<14&4294967295|C>>>18),C=O+(L^N&(P^L))+D[8]+1163531501&4294967295,O=P+(C<<20&4294967295|C>>>12),C=N+(P^L&(O^P))+D[13]+2850285829&4294967295,N=O+(C<<5&4294967295|C>>>27),C=L+(O^P&(N^O))+D[2]+4243563512&4294967295,L=N+(C<<9&4294967295|C>>>23),C=P+(N^O&(L^N))+D[7]+1735328473&4294967295,P=L+(C<<14&4294967295|C>>>18),C=O+(L^N&(P^L))+D[12]+2368359562&4294967295,O=P+(C<<20&4294967295|C>>>12),C=N+(O^P^L)+D[5]+4294588738&4294967295,N=O+(C<<4&4294967295|C>>>28),C=L+(N^O^P)+D[8]+2272392833&4294967295,L=N+(C<<11&4294967295|C>>>21),C=P+(L^N^O)+D[11]+1839030562&4294967295,P=L+(C<<16&4294967295|C>>>16),C=O+(P^L^N)+D[14]+4259657740&4294967295,O=P+(C<<23&4294967295|C>>>9),C=N+(O^P^L)+D[1]+2763975236&4294967295,N=O+(C<<4&4294967295|C>>>28),C=L+(N^O^P)+D[4]+1272893353&4294967295,L=N+(C<<11&4294967295|C>>>21),C=P+(L^N^O)+D[7]+4139469664&4294967295,P=L+(C<<16&4294967295|C>>>16),C=O+(P^L^N)+D[10]+3200236656&4294967295,O=P+(C<<23&4294967295|C>>>9),C=N+(O^P^L)+D[13]+681279174&4294967295,N=O+(C<<4&4294967295|C>>>28),C=L+(N^O^P)+D[0]+3936430074&4294967295,L=N+(C<<11&4294967295|C>>>21),C=P+(L^N^O)+D[3]+3572445317&4294967295,P=L+(C<<16&4294967295|C>>>16),C=O+(P^L^N)+D[6]+76029189&4294967295,O=P+(C<<23&4294967295|C>>>9),C=N+(O^P^L)+D[9]+3654602809&4294967295,N=O+(C<<4&4294967295|C>>>28),C=L+(N^O^P)+D[12]+3873151461&4294967295,L=N+(C<<11&4294967295|C>>>21),C=P+(L^N^O)+D[15]+530742520&4294967295,P=L+(C<<16&4294967295|C>>>16),C=O+(P^L^N)+D[2]+3299628645&4294967295,O=P+(C<<23&4294967295|C>>>9),C=N+(P^(O|~L))+D[0]+4096336452&4294967295,N=O+(C<<6&4294967295|C>>>26),C=L+(O^(N|~P))+D[7]+1126891415&4294967295,L=N+(C<<10&4294967295|C>>>22),C=P+(N^(L|~O))+D[14]+2878612391&4294967295,P=L+(C<<15&4294967295|C>>>17),C=O+(L^(P|~N))+D[5]+4237533241&4294967295,O=P+(C<<21&4294967295|C>>>11),C=N+(P^(O|~L))+D[12]+1700485571&4294967295,N=O+(C<<6&4294967295|C>>>26),C=L+(O^(N|~P))+D[3]+2399980690&4294967295,L=N+(C<<10&4294967295|C>>>22),C=P+(N^(L|~O))+D[10]+4293915773&4294967295,P=L+(C<<15&4294967295|C>>>17),C=O+(L^(P|~N))+D[1]+2240044497&4294967295,O=P+(C<<21&4294967295|C>>>11),C=N+(P^(O|~L))+D[8]+1873313359&4294967295,N=O+(C<<6&4294967295|C>>>26),C=L+(O^(N|~P))+D[15]+4264355552&4294967295,L=N+(C<<10&4294967295|C>>>22),C=P+(N^(L|~O))+D[6]+2734768916&4294967295,P=L+(C<<15&4294967295|C>>>17),C=O+(L^(P|~N))+D[13]+1309151649&4294967295,O=P+(C<<21&4294967295|C>>>11),C=N+(P^(O|~L))+D[4]+4149444226&4294967295,N=O+(C<<6&4294967295|C>>>26),C=L+(O^(N|~P))+D[11]+3174756917&4294967295,L=N+(C<<10&4294967295|C>>>22),C=P+(N^(L|~O))+D[2]+718787259&4294967295,P=L+(C<<15&4294967295|C>>>17),C=O+(L^(P|~N))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,M.g[2]=M.g[2]+P&4294967295,M.g[3]=M.g[3]+L&4294967295}s.prototype.u=function(M,N){N===void 0&&(N=M.length);for(var O=N-this.blockSize,D=this.B,P=this.h,L=0;L<N;){if(P==0)for(;L<=O;)a(this,M,L),L+=this.blockSize;if(typeof M=="string"){for(;L<N;)if(D[P++]=M.charCodeAt(L++),P==this.blockSize){a(this,D),P=0;break}}else for(;L<N;)if(D[P++]=M[L++],P==this.blockSize){a(this,D),P=0;break}}this.h=P,this.o+=N},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;var O=8*this.o;for(N=M.length-8;N<M.length;++N)M[N]=O&255,O/=256;for(this.u(M),M=Array(16),N=O=0;4>N;++N)for(var D=0;32>D;D+=8)M[O++]=this.g[N]>>>D&255;return M};function c(M,N){var O=m;return Object.prototype.hasOwnProperty.call(O,M)?O[M]:O[M]=N(M)}function d(M,N){this.h=N;for(var O=[],D=!0,P=M.length-1;0<=P;P--){var L=M[P]|0;D&&L==N||(O[P]=L,D=!1)}this.g=O}var m={};function p(M){return-128<=M&&128>M?c(M,function(N){return new d([N|0],0>N?-1:0)}):new d([M|0],0>M?-1:0)}function g(M){if(isNaN(M)||!isFinite(M))return x;if(0>M)return I(g(-M));for(var N=[],O=1,D=0;M>=O;D++)N[D]=M/O|0,O*=4294967296;return new d(N,0)}function y(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return I(y(M.substring(1),N));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=g(Math.pow(N,8)),D=x,P=0;P<M.length;P+=8){var L=Math.min(8,M.length-P),C=parseInt(M.substring(P,P+L),N);8>L?(L=g(Math.pow(N,L)),D=D.j(L).add(g(C))):(D=D.j(O),D=D.add(g(C)))}return D}var x=p(0),T=p(1),S=p(16777216);n=d.prototype,n.m=function(){if(k(this))return-I(this).m();for(var M=0,N=1,O=0;O<this.g.length;O++){var D=this.i(O);M+=(0<=D?D:4294967296+D)*N,N*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(j(this))return"0";if(k(this))return"-"+I(this).toString(M);for(var N=g(Math.pow(M,6)),O=this,D="";;){var P=q(O,N).g;O=Y(O,P.j(N));var L=((0<O.g.length?O.g[0]:O.h)>>>0).toString(M);if(O=P,j(O))return L+D;for(;6>L.length;)L="0"+L;D=L+D}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function j(M){if(M.h!=0)return!1;for(var N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function k(M){return M.h==-1}n.l=function(M){return M=Y(this,M),k(M)?-1:j(M)?0:1};function I(M){for(var N=M.g.length,O=[],D=0;D<N;D++)O[D]=~M.g[D];return new d(O,~M.h).add(T)}n.abs=function(){return k(this)?I(this):this},n.add=function(M){for(var N=Math.max(this.g.length,M.g.length),O=[],D=0,P=0;P<=N;P++){var L=D+(this.i(P)&65535)+(M.i(P)&65535),C=(L>>>16)+(this.i(P)>>>16)+(M.i(P)>>>16);D=C>>>16,L&=65535,C&=65535,O[P]=C<<16|L}return new d(O,O[O.length-1]&-2147483648?-1:0)};function Y(M,N){return M.add(I(N))}n.j=function(M){if(j(this)||j(M))return x;if(k(this))return k(M)?I(this).j(I(M)):I(I(this).j(M));if(k(M))return I(this.j(I(M)));if(0>this.l(S)&&0>M.l(S))return g(this.m()*M.m());for(var N=this.g.length+M.g.length,O=[],D=0;D<2*N;D++)O[D]=0;for(D=0;D<this.g.length;D++)for(var P=0;P<M.g.length;P++){var L=this.i(D)>>>16,C=this.i(D)&65535,ve=M.i(P)>>>16,we=M.i(P)&65535;O[2*D+2*P]+=C*we,$(O,2*D+2*P),O[2*D+2*P+1]+=L*we,$(O,2*D+2*P+1),O[2*D+2*P+1]+=C*ve,$(O,2*D+2*P+1),O[2*D+2*P+2]+=L*ve,$(O,2*D+2*P+2)}for(D=0;D<N;D++)O[D]=O[2*D+1]<<16|O[2*D];for(D=N;D<2*N;D++)O[D]=0;return new d(O,0)};function $(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function B(M,N){this.g=M,this.h=N}function q(M,N){if(j(N))throw Error("division by zero");if(j(M))return new B(x,x);if(k(M))return N=q(I(M),N),new B(I(N.g),I(N.h));if(k(N))return N=q(M,I(N)),new B(I(N.g),N.h);if(30<M.g.length){if(k(M)||k(N))throw Error("slowDivide_ only works with positive integers.");for(var O=T,D=N;0>=D.l(M);)O=H(O),D=H(D);var P=K(O,1),L=K(D,1);for(D=K(D,2),O=K(O,2);!j(D);){var C=L.add(D);0>=C.l(M)&&(P=P.add(O),L=C),D=K(D,1),O=K(O,1)}return N=Y(M,P.j(N)),new B(P,N)}for(P=x;0<=M.l(N);){for(O=Math.max(1,Math.floor(M.m()/N.m())),D=Math.ceil(Math.log(O)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),L=g(O),C=L.j(N);k(C)||0<C.l(M);)O-=D,L=g(O),C=L.j(N);j(L)&&(L=T),P=P.add(L),M=Y(M,C)}return new B(P,M)}n.A=function(M){return q(this,M).h},n.and=function(M){for(var N=Math.max(this.g.length,M.g.length),O=[],D=0;D<N;D++)O[D]=this.i(D)&M.i(D);return new d(O,this.h&M.h)},n.or=function(M){for(var N=Math.max(this.g.length,M.g.length),O=[],D=0;D<N;D++)O[D]=this.i(D)|M.i(D);return new d(O,this.h|M.h)},n.xor=function(M){for(var N=Math.max(this.g.length,M.g.length),O=[],D=0;D<N;D++)O[D]=this.i(D)^M.i(D);return new d(O,this.h^M.h)};function H(M){for(var N=M.g.length+1,O=[],D=0;D<N;D++)O[D]=M.i(D)<<1|M.i(D-1)>>>31;return new d(O,M.h)}function K(M,N){var O=N>>5;N%=32;for(var D=M.g.length-O,P=[],L=0;L<D;L++)P[L]=0<N?M.i(L+O)>>>N|M.i(L+O+1)<<32-N:M.i(L+O);return new d(P,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,tS=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=y,Gr=d}).apply(typeof i0<"u"?i0:typeof self<"u"?self:typeof window<"u"?window:{});var xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nS,Wc,iS,Dh,qg,sS,rS,aS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof xh=="object"&&xh];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=t(this);function a(h,_){if(_)e:{var E=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var W=h[R];if(!(W in E))break e;E=E[W]}h=h[h.length-1],R=E[h],_=_(R),_!=R&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}function c(h,_){h instanceof String&&(h+="");var E=0,R=!1,W={next:function(){if(!R&&E<h.length){var ie=E++;return{value:_(ie,h[ie]),done:!1}}return R=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}a("Array.prototype.values",function(h){return h||function(){return c(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function g(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,E){return h.call.apply(h.bind,arguments)}function x(h,_,E){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,R),h.apply(_,W)}}return function(){return h.apply(_,arguments)}}function T(h,_,E){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:x,T.apply(null,arguments)}function S(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function j(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(R,W,ie){for(var ge=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)ge[Xe-2]=arguments[Xe];return _.prototype[W].apply(R,ge)}}function k(h){const _=h.length;if(0<_){const E=Array(_);for(let R=0;R<_;R++)E[R]=h[R];return E}return[]}function I(h,_){for(let E=1;E<arguments.length;E++){const R=arguments[E];if(p(R)){const W=h.length||0,ie=R.length||0;h.length=W+ie;for(let ge=0;ge<ie;ge++)h[W+ge]=R[ge]}else h.push(R)}}class Y{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function $(h){return/^[\s\xa0]*$/.test(h)}function B(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function q(h){return q[" "](h),h}q[" "]=function(){};var H=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function K(h,_,E){for(const R in h)_.call(E,h[R],R,h)}function M(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function N(h){const _={};for(const E in h)_[E]=h[E];return _}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,_){let E,R;for(let W=1;W<arguments.length;W++){R=arguments[W];for(E in R)h[E]=R[E];for(let ie=0;ie<O.length;ie++)E=O[ie],Object.prototype.hasOwnProperty.call(R,E)&&(h[E]=R[E])}}function P(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function L(h){m.setTimeout(()=>{throw h},0)}function C(){var h=me;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ve{constructor(){this.h=this.g=null}add(_,E){const R=we.get();R.set(_,E),this.h?this.h.next=R:this.g=R,this.h=R}}var we=new Y(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let re,J=!1,me=new ve,z=()=>{const h=m.Promise.resolve(void 0);re=()=>{h.then(G)}};var G=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(E){L(E)}var _=we;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}J=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};m.addEventListener("test",E,_),m.removeEventListener("test",E,_)}catch{}return h}();function xe(h,_){if(ue.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(H){e:{try{q(_.nodeName);var W=!0;break e}catch{}W=!1}W||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Se[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&xe.aa.h.call(this)}}j(xe,ue);var Se={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var rt="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function St(h,_,E,R,W){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!R,this.ha=W,this.key=++Ue,this.da=this.fa=!1}function an(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Xt(h){this.src=h,this.g={},this.h=0}Xt.prototype.add=function(h,_,E,R,W){var ie=h.toString();h=this.g[ie],h||(h=this.g[ie]=[],this.h++);var ge=yn(h,_,R,W);return-1<ge?(_=h[ge],E||(_.fa=!1)):(_=new St(_,this.src,ie,!!R,W),_.fa=E,h.push(_)),_};function vn(h,_){var E=_.type;if(E in h.g){var R=h.g[E],W=Array.prototype.indexOf.call(R,_,void 0),ie;(ie=0<=W)&&Array.prototype.splice.call(R,W,1),ie&&(an(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function yn(h,_,E,R){for(var W=0;W<h.length;++W){var ie=h[W];if(!ie.da&&ie.listener==_&&ie.capture==!!E&&ie.ha==R)return W}return-1}var _n="closure_lm_"+(1e6*Math.random()|0),nt={};function ni(h,_,E,R,W){if(Array.isArray(_)){for(var ie=0;ie<_.length;ie++)ni(h,_[ie],E,R,W);return null}return E=fs(E),h&&h[rt]?h.K(_,E,g(R)?!!R.capture:!1,W):jt(h,_,E,!1,R,W)}function jt(h,_,E,R,W,ie){if(!_)throw Error("Invalid event type");var ge=g(W)?!!W.capture:!!W,Xe=bi(h);if(Xe||(h[_n]=Xe=new Xt(h)),E=Xe.add(_,E,R,ge,ie),E.proxy)return E;if(R=ua(),E.proxy=R,R.src=h,R.listener=E,h.addEventListener)pe||(W=ge),W===void 0&&(W=!1),h.addEventListener(_.toString(),R,W);else if(h.attachEvent)h.attachEvent(kn(_.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ua(){function h(E){return _.call(h.src,h.listener,E)}const _=ir;return h}function hs(h,_,E,R,W){if(Array.isArray(_))for(var ie=0;ie<_.length;ie++)hs(h,_[ie],E,R,W);else R=g(R)?!!R.capture:!!R,E=fs(E),h&&h[rt]?(h=h.i,_=String(_).toString(),_ in h.g&&(ie=h.g[_],E=yn(ie,E,R,W),-1<E&&(an(ie[E]),Array.prototype.splice.call(ie,E,1),ie.length==0&&(delete h.g[_],h.h--)))):h&&(h=bi(h))&&(_=h.g[_.toString()],h=-1,_&&(h=yn(_,E,R,W)),(E=-1<h?_[h]:null)&&xn(E))}function xn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[rt])vn(_.i,h);else{var E=h.type,R=h.proxy;_.removeEventListener?_.removeEventListener(E,R,h.capture):_.detachEvent?_.detachEvent(kn(E),R):_.addListener&&_.removeListener&&_.removeListener(R),(E=bi(_))?(vn(E,h),E.h==0&&(E.src=null,_[_n]=null)):an(h)}}}function kn(h){return h in nt?nt[h]:nt[h]="on"+h}function ir(h,_){if(h.da)h=!0;else{_=new xe(_,this);var E=h.listener,R=h.ha||h.src;h.fa&&xn(h),h=E.call(R,_)}return h}function bi(h){return h=h[_n],h instanceof Xt?h:null}var ii="__closure_events_fn_"+(1e9*Math.random()>>>0);function fs(h){return typeof h=="function"?h:(h[ii]||(h[ii]=function(_){return h.handleEvent(_)}),h[ii])}function Ne(){ae.call(this),this.i=new Xt(this),this.M=this,this.F=null}j(Ne,ae),Ne.prototype[rt]=!0,Ne.prototype.removeEventListener=function(h,_,E,R){hs(this,h,_,E,R)};function Be(h,_){var E,R=h.F;if(R)for(E=[];R;R=R.F)E.push(R);if(h=h.M,R=_.type||_,typeof _=="string")_=new ue(_,h);else if(_ instanceof ue)_.target=_.target||h;else{var W=_;_=new ue(R,h),D(_,W)}if(W=!0,E)for(var ie=E.length-1;0<=ie;ie--){var ge=_.g=E[ie];W=qt(ge,R,!0,_)&&W}if(ge=_.g=h,W=qt(ge,R,!0,_)&&W,W=qt(ge,R,!1,_)&&W,E)for(ie=0;ie<E.length;ie++)ge=_.g=E[ie],W=qt(ge,R,!1,_)&&W}Ne.prototype.N=function(){if(Ne.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],R=0;R<E.length;R++)an(E[R]);delete h.g[_],h.h--}}this.F=null},Ne.prototype.K=function(h,_,E,R){return this.i.add(String(h),_,!1,E,R)},Ne.prototype.L=function(h,_,E,R){return this.i.add(String(h),_,!0,E,R)};function qt(h,_,E,R){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var W=!0,ie=0;ie<_.length;++ie){var ge=_[ie];if(ge&&!ge.da&&ge.capture==E){var Xe=ge.listener,Ht=ge.ha||ge.src;ge.fa&&vn(h.i,ge),W=Xe.call(Ht,R)!==!1&&W}}return W&&!R.defaultPrevented}function bn(h,_,E){if(typeof h=="function")E&&(h=T(h,E));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:m.setTimeout(h,_||0)}function Wu(h){h.g=bn(()=>{h.g=null,h.i&&(h.i=!1,Wu(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Xf extends ae{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Wu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function da(h){ae.call(this),this.h=h,this.g={}}j(da,ae);var ha=[];function fa(h){K(h.g,function(_,E){this.g.hasOwnProperty(E)&&xn(_)},h),h.g={}}da.prototype.N=function(){da.aa.N.call(this),fa(this)},da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ei=m.JSON.stringify,uo=m.JSON.parse,ma=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function Ul(){}Ul.prototype.h=null;function Bl(h){return h.h||(h.h=h.i())}function ql(){}var ms={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ps(){ue.call(this,"d")}j(ps,ue);function Fl(){ue.call(this,"c")}j(Fl,ue);var Di={},Hl=null;function sr(){return Hl=Hl||new Ne}Di.La="serverreachability";function ho(h){ue.call(this,Di.La,h)}j(ho,ue);function rr(h){const _=sr();Be(_,new ho(_))}Di.STAT_EVENT="statevent";function Zu(h,_){ue.call(this,Di.STAT_EVENT,h),this.stat=_}j(Zu,ue);function bt(h){const _=sr();Be(_,new Zu(_,h))}Di.Ma="timingevent";function Ft(h,_){ue.call(this,Di.Ma,h),this.size=_}j(Ft,ue);function kt(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},_)}function si(){this.g=!0}si.prototype.xa=function(){this.g=!1};function $l(h,_,E,R,W,ie){h.info(function(){if(h.g)if(ie)for(var ge="",Xe=ie.split("&"),Ht=0;Ht<Xe.length;Ht++){var We=Xe[Ht].split("=");if(1<We.length){var Zt=We[0];We=We[1];var $t=Zt.split("_");ge=2<=$t.length&&$t[1]=="type"?ge+(Zt+"="+We+"&"):ge+(Zt+"=redacted&")}}else ge=null;else ge=ie;return"XMLHTTP REQ ("+R+") [attempt "+W+"]: "+_+`
`+E+`
`+ge})}function Wf(h,_,E,R,W,ie,ge){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+W+"]: "+_+`
`+E+`
`+ie+" "+ge})}function ar(h,_,E,R){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+pa(h,E)+(R?" "+R:"")})}function Ju(h,_){h.info(function(){return"TIMEOUT: "+_})}si.prototype.info=function(){};function pa(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var R=E[h];if(!(2>R.length)){var W=R[1];if(Array.isArray(W)&&!(1>W.length)){var ie=W[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var ge=1;ge<W.length;ge++)W[ge]=""}}}}return Ei(E)}catch{return _}}var or={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mi;function ki(){}j(ki,Ul),ki.prototype.g=function(){return new XMLHttpRequest},ki.prototype.i=function(){return{}},Mi=new ki;function Rn(h,_,E,R){this.j=h,this.i=_,this.l=E,this.R=R||1,this.U=new da(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ct}function Ct(){this.i=null,this.g="",this.h=!1}var Gl={},fo={};function Ti(h,_,E){h.L=1,h.v=xa(Hn(_)),h.m=E,h.P=!0,vs(h,null)}function vs(h,_){h.F=Date.now(),ga(h),h.A=Hn(h.v);var E=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),Zl(E.i,"t",R),h.C=0,E=h.j.J,h.h=new Ct,h.g=pd(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Xf(T(h.Y,h,h.g),h.O)),_=h.U,E=h.g,R=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(ha[0]=W.toString()),W=ha);for(var ie=0;ie<W.length;ie++){var ge=ni(E,W[ie],R||_.handleEvent,!1,_.h||_);if(!ge)break;_.g[ge.key]=ge}_=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),rr(),$l(h.i,h.u,h.A,h.l,h.R,h.m)}Rn.prototype.ca=function(h){h=h.target;const _=this.M;_&&li(h)==3?_.j():this.Y(h)},Rn.prototype.Y=function(h){try{if(h==this.g)e:{const $t=li(this.g);var _=this.g.Ba();const Ss=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||od(this.g)))){this.J||$t!=4||_==7||(_==8||0>=Ss?rr(3):rr(2)),lr(this);var E=this.g.Z();this.X=E;t:if(ed(this)){var R=od(this.g);h="";var W=R.length,ie=li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){on(this),Pi(this);var ge="";break t}this.h.i=new m.TextDecoder}for(_=0;_<W;_++)this.h.h=!0,h+=this.h.i.decode(R[_],{stream:!(ie&&_==W-1)});R.length=0,this.h.g+=h,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=E==200,Wf(this.i,this.u,this.A,this.l,this.R,$t,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Ht=this.g;if((Xe=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Xe)){var We=Xe;break t}}We=null}if(E=We)ar(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,va(this,E);else{this.o=!1,this.s=3,bt(12),on(this),Pi(this);break e}}if(this.P){E=!0;let ln;for(;!this.J&&this.C<ge.length;)if(ln=td(this,ge),ln==fo){$t==4&&(this.s=4,bt(14),E=!1),ar(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Gl){this.s=4,bt(15),ar(this.i,this.l,ge,"[Invalid Chunk]"),E=!1;break}else ar(this.i,this.l,ln,null),va(this,ln);if(ed(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||ge.length!=0||this.h.h||(this.s=1,bt(16),E=!1),this.o=this.o&&E,!E)ar(this.i,this.l,ge,"[Invalid Chunked Response]"),on(this),Pi(this);else if(0<ge.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),ja(Zt),Zt.M=!0,bt(11))}}else ar(this.i,this.l,ge,null),va(this,ge);$t==4&&on(this),this.o&&!this.J&&($t==4?hd(this.j,this):(this.o=!1,ga(this)))}else nm(this.g),E==400&&0<ge.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),on(this),Pi(this)}}}catch{}finally{}};function ed(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function td(h,_){var E=h.C,R=_.indexOf(`
`,E);return R==-1?fo:(E=Number(_.substring(E,R)),isNaN(E)?Gl:(R+=1,R+E>_.length?fo:(_=_.slice(R,R+E),h.C=R+E,_)))}Rn.prototype.cancel=function(){this.J=!0,on(this)};function ga(h){h.S=Date.now()+h.I,nd(h,h.I)}function nd(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=kt(T(h.ba,h),_)}function lr(h){h.B&&(m.clearTimeout(h.B),h.B=null)}Rn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ju(this.i,this.A),this.L!=2&&(rr(),bt(17)),on(this),this.s=2,Pi(this)):nd(this,this.S-h)};function Pi(h){h.j.G==0||h.J||hd(h.j,h)}function on(h){lr(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,fa(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function va(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||Kl(E.h,h))){if(!h.K&&Kl(E.h,h)&&E.G==3){try{var R=E.Da.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var W=R;if(W[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)So(E),To(E);else break e;ic(E),bt(18)}}else E.za=W[1],0<E.za-E.T&&37500>W[2]&&E.F&&E.v==0&&!E.C&&(E.C=kt(T(E.Za,E),6e3));if(1>=po(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ws(E,11)}else if((h.K||E.g==h)&&So(E),!$(_))for(W=E.Da.g.parse(_),_=0;_<W.length;_++){let We=W[_];if(E.T=We[0],We=We[1],E.G==2)if(We[0]=="c"){E.K=We[1],E.ia=We[2];const Zt=We[3];Zt!=null&&(E.la=Zt,E.j.info("VER="+E.la));const $t=We[4];$t!=null&&(E.Aa=$t,E.j.info("SVER="+E.Aa));const Ss=We[5];Ss!=null&&typeof Ss=="number"&&0<Ss&&(R=1.5*Ss,E.L=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const ln=h.g;if(ln){const Fi=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var ie=R.h;ie.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(go(ie,ie.h),ie.h=null))}if(R.D){const rc=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;rc&&(R.ya=rc,dt(R.I,R.D,rc))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),R=E;var ge=h;if(R.qa=md(R,R.J?R.ia:null,R.W),ge.K){In(R.h,ge);var Xe=ge,Ht=R.L;Ht&&(Xe.I=Ht),Xe.B&&(lr(Xe),ga(Xe)),R.g=ge}else ud(R);0<E.i.length&&wo(E)}else We[0]!="stop"&&We[0]!="close"||ws(E,7);else E.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?ws(E,7):tc(E):We[0]!="noop"&&E.l&&E.l.ta(We),E.v=0)}}rr(4)}catch{}}var id=class{constructor(h,_){this.g=h,this.map=_}};function ys(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function po(h){return h.h?1:h.g?h.g.size:0}function Kl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function go(h,_){h.g?h.g.add(_):h.h=_}function In(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}ys.prototype.cancel=function(){if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ql(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return k(h.i)}function Zf(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var _=[],E=h.length,R=0;R<E;R++)_.push(h[R]);return _}_=[],E=0;for(R in h)_[E++]=h[R];return _}function vo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const R in h)_[E++]=R;return _}}}function Yl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=vo(h),R=Zf(h),W=R.length,ie=0;ie<W;ie++)_.call(void 0,R[ie],E&&E[ie],h)}var ya=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jf(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var R=h[E].indexOf("="),W=null;if(0<=R){var ie=h[E].substring(0,R);W=h[E].substring(R+1)}else ie=h[E];_(ie,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Pt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pt){this.h=h.h,_a(this,h.j),this.o=h.o,this.g=h.g,cr(this,h.s),this.l=h.l;var _=h.i,E=new xs;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),_s(this,E),this.m=h.m}else h&&(_=String(h).match(ya))?(this.h=!1,_a(this,_[1]||"",!0),this.o=ri(_[2]||""),this.g=ri(_[3]||"",!0),cr(this,_[4]),this.l=ri(_[5]||"",!0),_s(this,_[6]||"",!0),this.m=ri(_[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}Pt.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ba(_,Xl,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ba(_,Xl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(ba(E,E.charAt(0)=="/"?em:Wl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",ba(E,yo)),h.join("")};function Hn(h){return new Pt(h)}function _a(h,_,E){h.j=E?ri(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function cr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function _s(h,_,E){_ instanceof xs?(h.i=_,rd(h.i,h.h)):(E||(_=ba(_,tm)),h.i=new xs(_,h.h))}function dt(h,_,E){h.i.set(_,E)}function xa(h){return dt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ri(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ba(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,sd),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function sd(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Xl=/[#\/\?@]/g,Wl=/[#\?:]/g,em=/[#\?]/g,tm=/[#\?@]/g,yo=/#/g;function xs(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ai(h){h.g||(h.g=new Map,h.h=0,h.i&&Jf(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=xs.prototype,n.add=function(h,_){ai(this),this.i=null,h=Li(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function bs(h,_){ai(h),_=Li(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Es(h,_){return ai(h),_=Li(h,_),h.g.has(_)}n.forEach=function(h,_){ai(this),this.g.forEach(function(E,R){E.forEach(function(W){h.call(_,W,R,this)},this)},this)},n.na=function(){ai(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let R=0;R<_.length;R++){const W=h[R];for(let ie=0;ie<W.length;ie++)E.push(_[R])}return E},n.V=function(h){ai(this);let _=[];if(typeof h=="string")Es(this,h)&&(_=_.concat(this.g.get(Li(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return ai(this),this.i=null,h=Li(this,h),Es(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Zl(h,_,E){bs(h,_),0<E.length&&(h.i=null,h.g.set(Li(h,_),k(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var R=_[E];const ie=encodeURIComponent(String(R)),ge=this.V(R);for(R=0;R<ge.length;R++){var W=ie;ge[R]!==""&&(W+="="+encodeURIComponent(String(ge[R]))),h.push(W)}}return this.i=h.join("&")};function Li(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function rd(h,_){_&&!h.j&&(ai(h),h.i=null,h.g.forEach(function(E,R){var W=R.toLowerCase();R!=W&&(bs(this,R),Zl(this,W,E))},h)),h.j=_}function Ea(h,_){const E=new si;if(m.Image){const R=new Image;R.onload=S(oi,E,"TestLoadImage: loaded",!0,_,R),R.onerror=S(oi,E,"TestLoadImage: error",!1,_,R),R.onabort=S(oi,E,"TestLoadImage: abort",!1,_,R),R.ontimeout=S(oi,E,"TestLoadImage: timeout",!1,_,R),m.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else _(!1)}function wi(h,_){const E=new si,R=new AbortController,W=setTimeout(()=>{R.abort(),oi(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:R.signal}).then(ie=>{clearTimeout(W),ie.ok?oi(E,"TestPingServer: ok",!0,_):oi(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(W),oi(E,"TestPingServer: error",!1,_)})}function oi(h,_,E,R,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),R(E)}catch{}}function Ta(){this.g=new ma}function Vi(h,_,E){const R=E||"";try{Yl(h,function(W,ie){let ge=W;g(W)&&(ge=Ei(W)),_.push(R+ie+"="+encodeURIComponent(ge))})}catch(W){throw _.push(R+"type="+encodeURIComponent("_badmap")),W}}function ur(h){this.l=h.Ub||null,this.j=h.eb||!1}j(ur,Ul),ur.prototype.g=function(){return new Ts(this.l,this.j)},ur.prototype.i=function(h){return function(){return h}}({});function Ts(h,_){Ne.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(Ts,Ne),n=Ts.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Ui(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||m).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?zi(this):Ui(this),this.readyState==3&&Jl(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,zi(this))},n.Qa=function(h){this.g&&(this.response=h,zi(this))},n.ga=function(){this.g&&zi(this)};function zi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ui(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function Ui(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ts.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ec(h){let _="";return K(h,function(E,R){_+=R,_+=":",_+=E,_+=`\r
`}),_}function Wt(h,_,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=ec(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):dt(h,_,E))}function ot(h){Ne.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(ot,Ne);var _o=/^https?$/i,wa=["POST","PUT"];n=ot.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mi.g(),this.v=this.o?Bl(this.o):Bl(Mi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ie){ad(this,ie);return}if(h=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var W in R)E.set(W,R[W]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ie of R.keys())E.set(ie,R.get(ie));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(ie=>ie.toLowerCase()=="content-type"),W=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(wa,_,void 0))||R||W||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ge]of E)this.g.setRequestHeader(ie,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sa(this),this.u=!0,this.g.send(h),this.u=!1}catch(ie){ad(this,ie)}};function ad(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,xo(h),Bi(h)}function xo(h){h.A||(h.A=!0,Be(h,"complete"),Be(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Be(this,"complete"),Be(this,"abort"),Bi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bi(this,!0)),ot.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?bo(this):this.bb())},n.bb=function(){bo(this)};function bo(h){if(h.h&&typeof d<"u"&&(!h.v[1]||li(h)!=4||h.Z()!=2)){if(h.u&&li(h)==4)bn(h.Ea,0,h);else if(Be(h,"readystatechange"),li(h)==4){h.h=!1;try{const ge=h.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var R;if(R=ge===0){var W=String(h.D).match(ya)[1]||null;!W&&m.self&&m.self.location&&(W=m.self.location.protocol.slice(0,-1)),R=!_o.test(W?W.toLowerCase():"")}E=R}if(E)Be(h,"complete"),Be(h,"success");else{h.m=6;try{var ie=2<li(h)?h.g.statusText:""}catch{ie=""}h.l=ie+" ["+h.Z()+"]",xo(h)}}finally{Bi(h)}}}}function Bi(h,_){if(h.g){Sa(h);const E=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Be(h,"ready");try{E.onreadystatechange=R}catch{}}}function Sa(h){h.I&&(m.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function li(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<li(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),uo(_)}};function od(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function nm(h){const _={};h=(h.g&&2<=li(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if($(h[R]))continue;var E=P(h[R]);const W=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ie=_[W]||[];_[W]=ie,ie.push(E)}M(_,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Aa(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Eo(h){this.Aa=0,this.i=[],this.j=new si,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Aa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Aa("baseRetryDelayMs",5e3,h),this.cb=Aa("retryDelaySeedMs",1e4,h),this.Wa=Aa("forwardChannelMaxRetries",2,h),this.wa=Aa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ys(h&&h.concurrentRequestLimit),this.Da=new Ta,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Eo.prototype,n.la=8,n.G=1,n.connect=function(h,_,E,R){bt(0),this.W=h,this.H=_||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.I=md(this,null,this.W),wo(this)};function tc(h){if(ld(h),h.G==3){var _=h.U++,E=Hn(h.I);if(dt(E,"SID",h.K),dt(E,"RID",_),dt(E,"TYPE","terminate"),Na(h,E),_=new Rn(h,h.j,_),_.L=2,_.v=xa(Hn(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=_.v,E=!0),E||(_.g=pd(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ga(_)}fd(h)}function To(h){h.g&&(ja(h),h.g.cancel(),h.g=null)}function ld(h){To(h),h.u&&(m.clearTimeout(h.u),h.u=null),So(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function wo(h){if(!mo(h.h)&&!h.s){h.s=!0;var _=h.Ga;re||z(),J||(re(),J=!0),me.add(_,h),h.B=0}}function im(h,_){return po(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=kt(T(h.Ga,h,_),sc(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new Rn(this,this.j,h);let ie=this.o;if(this.S&&(ie?(ie=N(ie),D(ie,this.S)):ie=this.S),this.m!==null||this.O||(W.H=ie,ie=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=cd(this,W,_),E=Hn(this.I),dt(E,"RID",h),dt(E,"CVER",22),this.D&&dt(E,"X-HTTP-Session-Id",this.D),Na(this,E),ie&&(this.O?_="headers="+encodeURIComponent(String(ec(ie)))+"&"+_:this.m&&Wt(E,this.m,ie)),go(this.h,W),this.Ua&&dt(E,"TYPE","init"),this.P?(dt(E,"$req",_),dt(E,"SID","null"),W.T=!0,Ti(W,E,null)):Ti(W,E,_),this.G=2}}else this.G==3&&(h?nc(this,h):this.i.length==0||mo(this.h)||nc(this))};function nc(h,_){var E;_?E=_.l:E=h.U++;const R=Hn(h.I);dt(R,"SID",h.K),dt(R,"RID",E),dt(R,"AID",h.T),Na(h,R),h.m&&h.o&&Wt(R,h.m,h.o),E=new Rn(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=cd(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),go(h.h,E),Ti(E,R,_)}function Na(h,_){h.H&&K(h.H,function(E,R){dt(_,R,E)}),h.l&&Yl({},function(E,R){dt(_,R,E)})}function cd(h,_,E){E=Math.min(h.i.length,E);var R=h.l?T(h.l.Na,h.l,h):null;e:{var W=h.i;let ie=-1;for(;;){const ge=["count="+E];ie==-1?0<E?(ie=W[0].g,ge.push("ofs="+ie)):ie=0:ge.push("ofs="+ie);let Xe=!0;for(let Ht=0;Ht<E;Ht++){let We=W[Ht].g;const Zt=W[Ht].map;if(We-=ie,0>We)ie=Math.max(0,W[Ht].g-100),Xe=!1;else try{Vi(Zt,ge,"req"+We+"_")}catch{R&&R(Zt)}}if(Xe){R=ge.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,R}function ud(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;re||z(),J||(re(),J=!0),me.add(_,h),h.v=0}}function ic(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=kt(T(h.Fa,h),sc(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,dd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=kt(T(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),To(this),dd(this))};function ja(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function dd(h){h.g=new Rn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Hn(h.qa);dt(_,"RID","rpc"),dt(_,"SID",h.K),dt(_,"AID",h.T),dt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&dt(_,"TO",h.ja),dt(_,"TYPE","xmlhttp"),Na(h,_),h.m&&h.o&&Wt(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=xa(Hn(_)),E.m=null,E.P=!0,vs(E,h)}n.Za=function(){this.C!=null&&(this.C=null,To(this),ic(this),bt(19))};function So(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function hd(h,_){var E=null;if(h.g==_){So(h),ja(h),h.g=null;var R=2}else if(Kl(h.h,_))E=_.D,In(h.h,_),R=1;else return;if(h.G!=0){if(_.o)if(R==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var W=h.B;R=sr(),Be(R,new Ft(R,E)),wo(h)}else ud(h);else if(W=_.s,W==3||W==0&&0<_.X||!(R==1&&im(h,_)||R==2&&ic(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),W){case 1:ws(h,5);break;case 4:ws(h,10);break;case 3:ws(h,6);break;default:ws(h,2)}}}function sc(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function ws(h,_){if(h.j.info("Error code "+_),_==2){var E=T(h.fb,h),R=h.Xa;const W=!R;R=new Pt(R||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||_a(R,"https"),xa(R),W?Ea(R.toString(),E):wi(R.toString(),E)}else bt(2);h.G=0,h.l&&h.l.sa(_),fd(h),ld(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function fd(h){if(h.G=0,h.ka=[],h.l){const _=Ql(h.h);(_.length!=0||h.i.length!=0)&&(I(h.ka,_),I(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function md(h,_,E){var R=E instanceof Pt?Hn(E):new Pt(E);if(R.g!="")_&&(R.g=_+"."+R.g),cr(R,R.s);else{var W=m.location;R=W.protocol,_=_?_+"."+W.hostname:W.hostname,W=+W.port;var ie=new Pt(null);R&&_a(ie,R),_&&(ie.g=_),W&&cr(ie,W),E&&(ie.l=E),R=ie}return E=h.D,_=h.ya,E&&_&&dt(R,E,_),dt(R,"VER",h.la),Na(h,R),R}function pd(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ot(new ur({eb:E})):new ot(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gd(){}n=gd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ao(){}Ao.prototype.g=function(h,_){return new On(h,_)};function On(h,_){Ne.call(this),this.g=new Eo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!$(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!$(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new qi(this)}j(On,Ne),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){tc(this.g)},On.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Ei(h),h=E);_.i.push(new id(_.Ya++,h)),_.G==3&&wo(_)},On.prototype.N=function(){this.g.l=null,delete this.j,tc(this.g),delete this.g,On.aa.N.call(this)};function vd(h){ps.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}j(vd,ps);function yd(){Fl.call(this),this.status=1}j(yd,Fl);function qi(h){this.g=h}j(qi,gd),qi.prototype.ua=function(){Be(this.g,"a")},qi.prototype.ta=function(h){Be(this.g,new vd(h))},qi.prototype.sa=function(h){Be(this.g,new yd)},qi.prototype.ra=function(){Be(this.g,"b")},Ao.prototype.createWebChannel=Ao.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,aS=function(){return new Ao},rS=function(){return sr()},sS=Di,qg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},or.NO_ERROR=0,or.TIMEOUT=8,or.HTTP_ERROR=6,Dh=or,gs.COMPLETE="complete",iS=gs,ql.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",Ne.prototype.listen=Ne.prototype.K,Wc=ql,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,nS=ot}).apply(typeof xh<"u"?xh:typeof self<"u"?self:typeof window<"u"?window:{});const s0="@firebase/firestore",r0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new Ev("@firebase/firestore");function sl(){return eo.logLevel}function be(n,...e){if(eo.logLevel<=Ke.DEBUG){const t=e.map(Mv);eo.debug(`Firestore (${Il}): ${n}`,...t)}}function Qs(n,...e){if(eo.logLevel<=Ke.ERROR){const t=e.map(Mv);eo.error(`Firestore (${Il}): ${n}`,...t)}}function Qr(n,...e){if(eo.logLevel<=Ke.WARN){const t=e.map(Mv);eo.warn(`Firestore (${Il}): ${n}`,...t)}}function Mv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,oS(n,s,t)}function oS(n,e,t){let s=`FIRESTORE (${Il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Qs(s),new Error(s)}function lt(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||oS(e,a,s)}function Le(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sn.UNAUTHENTICATED))}shutdown(){}}class AD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ND{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let c=new Hs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Hs,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const p=c;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},m=p=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Hs)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(lt(typeof s.accessToken=="string",31837,{l:s}),new lS(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new Sn(e)}}class jD{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CD{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new jD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){lt(this.o===void 0,3512);const s=c=>{c.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,be("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new a0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new a0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=ID(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%62))}return s}}function Fe(n,e){return n<e?-1:n>e?1:0}function Fg(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return Fe(s,a);{const c=cS(),d=OD(c.encode(o0(n,t)),c.encode(o0(e,t)));return d!==0?d:Fe(s,a)}}t+=s>65535?2:1}return Fe(n.length,e.length)}function o0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function OD(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Fe(n[t],e[t]);return Fe(n.length,e.length)}function yl(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="__name__";class Yi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Me(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Me(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Yi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yi?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=Yi.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return Fe(e.length,t.length)}static compareSegments(e,t){const s=Yi.isNumericId(e),a=Yi.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Yi.extractNumericId(e).compare(Yi.extractNumericId(t)):Fg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gr.fromString(e.substring(4,e.length-2))}}class yt extends Yi{construct(e,t,s){return new yt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new yt(t)}static emptyPath(){return new yt([])}}const DD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Yi{construct(e,t,s){return new fn(e,t,s)}static isValidIdentifier(e){return DD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===l0}static keyField(){return new fn([l0])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(s.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new _e(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else m==="`"?(d=!d,a++):m!=="."||d?(s+=m,a++):(c(),a++)}if(c(),d)throw new _e(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(t)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(yt.fromString(e))}static fromName(e){return new je(yt.fromString(e).popFirst(5))}static empty(){return new je(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(n,e,t){if(!t)throw new _e(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function MD(n,e,t,s){if(e===!0&&s===!0)throw new _e(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function c0(n){if(!je.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function u0(n){if(je.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _f(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Me(12329,{type:typeof n})}function yi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_f(n);throw new _e(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ku(n,e){if(!dS(n))throw new _e(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const d=n[s];if(a&&typeof d!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new _e(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=-62135596800,h0=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*h0);return new _t(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<d0)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/h0}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ku(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-d0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:Bt("string",_t._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new _t(0,0))}static max(){return new Pe(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=-1;function kD(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Pe.fromTimestamp(s===1e9?new _t(t+1,0):new _t(t,s));return new Yr(a,je.empty(),e)}function PD(n){return new Yr(n.readTime,n.key,gu)}class Yr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Yr(Pe.min(),je.empty(),gu)}static max(){return new Yr(Pe.max(),je.empty(),gu)}}function LD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==VD)throw n;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,s)=>{t(e)})}static reject(e){return new he((t,s)=>{s(e)})}static waitFor(e){return new he((t,s)=>{let a=0,c=0,d=!1;e.forEach(m=>{++a,m.next(()=>{++c,d&&c===a&&t()},p=>s(p))}),d=!0,c===a&&t()})}static or(e){let t=he.resolve(!1);for(const s of e)t=t.next(a=>a?he.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,c)=>{s.push(t.call(this,a,c))}),this.waitFor(s)}static mapArray(e,t){return new he((s,a)=>{const c=e.length,d=new Array(c);let m=0;for(let p=0;p<c;p++){const g=p;t(e[g]).next(y=>{d[g]=y,++m,m===c&&s(d)},y=>a(y))}})}static doWhile(e,t){return new he((s,a)=>{const c=()=>{e()===!0?t().next(()=>{c()},a):s()};c()})}}function UD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Dl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}xf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=-1;function bf(n){return n==null}function Yh(n){return n===0&&1/n==-1/0}function BD(n){return typeof n=="number"&&Number.isInteger(n)&&!Yh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="";function qD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=f0(e)),e=FD(n.get(t),e);return f0(e)}function FD(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const c=n.charAt(a);switch(c){case"\0":t+="";break;case hS:t+="";break;default:t+=c}}return t}function f0(n){return n+hS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function aa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){this.comparator=e,this.root=t||hn.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bh(this.root,e,this.comparator,!0)}}class bh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??hn.RED,this.left=a??hn.EMPTY,this.right=c??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new hn(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return hn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,t,s,a,c){return this}insert(e,t,s){return new hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new p0(this.data.getIterator())}getIteratorFrom(e){return new p0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class p0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Jn([])}unionWith(e){let t=new Qt(fn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yl(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new mS("Invalid base64 string: "+c):c}}(e);return new gn(t)}static fromUint8Array(e){const t=function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c}(e);return new gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const HD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xr(n){if(lt(!!n,39018),typeof n=="string"){let e=0;const t=HD.exec(n);if(lt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ot(n.seconds),nanos:Ot(n.nanos)}}function Ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wr(n){return typeof n=="string"?gn.fromBase64String(n):gn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="server_timestamp",gS="__type__",vS="__previous_value__",yS="__local_write_time__";function Lv(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[gS])===null||t===void 0?void 0:t.stringValue)===pS}function Ef(n){const e=n.mapValue.fields[vS];return Lv(e)?Ef(e):e}function vu(n){const e=Xr(n.mapValue.fields[yS].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,t,s,a,c,d,m,p,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=y}}const Xh="(default)";class yu{constructor(e,t){this.projectId=e,this.database=t||Xh}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===Xh}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="__type__",GD="__max__",Eh={mapValue:{}},xS="__vector__",Wh="value";function Zr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lv(n)?4:QD(n)?9007199254740991:KD(n)?10:11:Me(28295,{value:n})}function os(n,e){if(n===e)return!0;const t=Zr(n);if(t!==Zr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vu(n).isEqual(vu(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=Xr(a.timestampValue),m=Xr(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,c){return Wr(a.bytesValue).isEqual(Wr(c.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,c){return Ot(a.geoPointValue.latitude)===Ot(c.geoPointValue.latitude)&&Ot(a.geoPointValue.longitude)===Ot(c.geoPointValue.longitude)}(n,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return Ot(a.integerValue)===Ot(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=Ot(a.doubleValue),m=Ot(c.doubleValue);return d===m?Yh(d)===Yh(m):isNaN(d)&&isNaN(m)}return!1}(n,e);case 9:return yl(n.arrayValue.values||[],e.arrayValue.values||[],os);case 10:case 11:return function(a,c){const d=a.mapValue.fields||{},m=c.mapValue.fields||{};if(m0(d)!==m0(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!os(d[p],m[p])))return!1;return!0}(n,e);default:return Me(52216,{left:n})}}function _u(n,e){return(n.values||[]).find(t=>os(t,e))!==void 0}function _l(n,e){if(n===e)return 0;const t=Zr(n),s=Zr(e);if(t!==s)return Fe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return function(c,d){const m=Ot(c.integerValue||c.doubleValue),p=Ot(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(n,e);case 3:return g0(n.timestampValue,e.timestampValue);case 4:return g0(vu(n),vu(e));case 5:return Fg(n.stringValue,e.stringValue);case 6:return function(c,d){const m=Wr(c),p=Wr(d);return m.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),p=d.split("/");for(let g=0;g<m.length&&g<p.length;g++){const y=Fe(m[g],p[g]);if(y!==0)return y}return Fe(m.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(c,d){const m=Fe(Ot(c.latitude),Ot(d.latitude));return m!==0?m:Fe(Ot(c.longitude),Ot(d.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return v0(n.arrayValue,e.arrayValue);case 10:return function(c,d){var m,p,g,y;const x=c.fields||{},T=d.fields||{},S=(m=x[Wh])===null||m===void 0?void 0:m.arrayValue,j=(p=T[Wh])===null||p===void 0?void 0:p.arrayValue,k=Fe(((g=S?.values)===null||g===void 0?void 0:g.length)||0,((y=j?.values)===null||y===void 0?void 0:y.length)||0);return k!==0?k:v0(S,j)}(n.mapValue,e.mapValue);case 11:return function(c,d){if(c===Eh.mapValue&&d===Eh.mapValue)return 0;if(c===Eh.mapValue)return 1;if(d===Eh.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),g=d.fields||{},y=Object.keys(g);p.sort(),y.sort();for(let x=0;x<p.length&&x<y.length;++x){const T=Fg(p[x],y[x]);if(T!==0)return T;const S=_l(m[p[x]],g[y[x]]);if(S!==0)return S}return Fe(p.length,y.length)}(n.mapValue,e.mapValue);default:throw Me(23264,{le:t})}}function g0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=Xr(n),s=Xr(e),a=Fe(t.seconds,s.seconds);return a!==0?a:Fe(t.nanos,s.nanos)}function v0(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const c=_l(t[a],s[a]);if(c)return c}return Fe(t.length,s.length)}function xl(n){return Hg(n)}function Hg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=Xr(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Wr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return je.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",a=!0;for(const c of t.values||[])a?a=!1:s+=",",s+=Hg(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const d of s)c?c=!1:a+=",",a+=`${d}:${Hg(t.fields[d])}`;return a+"}"}(n.mapValue):Me(61005,{value:n})}function Mh(n){switch(Zr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ef(n);return e?16+Mh(e):16;case 5:return 2*n.stringValue.length;case 6:return Wr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+Mh(c),0)}(n.arrayValue);case 10:case 11:return function(s){let a=0;return aa(s.fields,(c,d)=>{a+=c.length+Mh(d)}),a}(n.mapValue);default:throw Me(13486,{value:n})}}function y0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $g(n){return!!n&&"integerValue"in n}function Vv(n){return!!n&&"arrayValue"in n}function _0(n){return!!n&&"nullValue"in n}function x0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kh(n){return!!n&&"mapValue"in n}function KD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[_S])===null||t===void 0?void 0:t.stringValue)===xS}function su(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return aa(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=su(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=su(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===GD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(t)}setAll(e){let t=fn.emptyPath(),s={},a=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=m.popLast()}d?s[m.lastSegment()]=su(d):a.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];kh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){aa(t,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new Un(su(this.value))}}function bS(n){const e=[];return aa(n.fields,(t,s)=>{const a=new fn([t]);if(kh(s)){const c=bS(s.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,t,s,a,c,d,m){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Nn(e,0,Pe.min(),Pe.min(),Pe.min(),Un.empty(),0)}static newFoundDocument(e,t,s,a){return new Nn(e,1,t,Pe.min(),s,a,0)}static newNoDocument(e,t){return new Nn(e,2,t,Pe.min(),Pe.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,Pe.min(),Pe.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.position=e,this.inclusive=t}}function b0(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const c=e[a],d=n.position[a];if(c.field.isKeyField()?s=je.comparator(je.fromName(d.referenceValue),t.key):s=_l(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function E0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!os(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t="asc"){this.field=e,this.dir=t}}function YD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{}class Ut extends ES{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new WD(e,t,s):t==="array-contains"?new eM(e,s):t==="in"?new tM(e,s):t==="not-in"?new nM(e,s):t==="array-contains-any"?new iM(e,s):new Ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new ZD(e,s):new JD(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_l(t,this.value)):t!==null&&Zr(this.value)===Zr(t)&&this.matchesComparison(_l(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ii extends ES{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ii(e,t)}matches(e){return TS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function TS(n){return n.op==="and"}function wS(n){return XD(n)&&TS(n)}function XD(n){for(const e of n.filters)if(e instanceof Ii)return!1;return!0}function Gg(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+xl(n.value);if(wS(n))return n.filters.map(e=>Gg(e)).join(",");{const e=n.filters.map(t=>Gg(t)).join(",");return`${n.op}(${e})`}}function SS(n,e){return n instanceof Ut?function(s,a){return a instanceof Ut&&s.op===a.op&&s.field.isEqual(a.field)&&os(s.value,a.value)}(n,e):n instanceof Ii?function(s,a){return a instanceof Ii&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,d,m)=>c&&SS(d,a.filters[m]),!0):!1}(n,e):void Me(19439)}function AS(n){return n instanceof Ut?function(t){return`${t.field.canonicalString()} ${t.op} ${xl(t.value)}`}(n):n instanceof Ii?function(t){return t.op.toString()+" {"+t.getFilters().map(AS).join(" ,")+"}"}(n):"Filter"}class WD extends Ut{constructor(e,t,s){super(e,t,s),this.key=je.fromName(s.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class ZD extends Ut{constructor(e,t){super(e,"in",t),this.keys=NS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JD extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=NS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function NS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>je.fromName(s.referenceValue))}class eM extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vv(t)&&_u(t.arrayValue,this.value)}}class tM extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_u(this.value.arrayValue,t)}}class nM extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_u(this.value.arrayValue,t)}}class iM extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>_u(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t=null,s=[],a=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=d,this.endAt=m,this.Pe=null}}function T0(n,e=null,t=[],s=[],a=null,c=null,d=null){return new sM(n,e,t,s,a,c,d)}function zv(n){const e=Le(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Gg(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),bf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>xl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>xl(s)).join(",")),e.Pe=t}return e.Pe}function Uv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!SS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!E0(n.startAt,e.startAt)&&E0(n.endAt,e.endAt)}function Kg(n){return je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t=null,s=[],a=[],c=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function rM(n,e,t,s,a,c,d,m){return new Ml(n,e,t,s,a,c,d,m)}function Bv(n){return new Ml(n)}function w0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jS(n){return n.collectionGroup!==null}function ru(n){const e=Le(n);if(e.Te===null){e.Te=[];const t=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Qt(fn.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.Te.push(new xu(c,s))}),t.has(fn.keyField().canonicalString())||e.Te.push(new xu(fn.keyField(),s))}return e.Te}function es(n){const e=Le(n);return e.Ie||(e.Ie=aM(e,ru(n))),e.Ie}function aM(n,e){if(n.limitType==="F")return T0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new xu(a.field,c)});const t=n.endAt?new Zh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Zh(n.startAt.position,n.startAt.inclusive):null;return T0(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Qg(n,e){const t=n.filters.concat([e]);return new Ml(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Yg(n,e,t){return new Ml(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tf(n,e){return Uv(es(n),es(e))&&n.limitType===e.limitType}function CS(n){return`${zv(es(n))}|lt:${n.limitType}`}function rl(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>AS(a)).join(", ")}]`),bf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>xl(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>xl(a)).join(",")),`Target(${s})`}(es(n))}; limitType=${n.limitType})`}function wf(n,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):je.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(n,e)&&function(s,a){for(const c of ru(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(n,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(n,e)&&function(s,a){return!(s.startAt&&!function(d,m,p){const g=b0(d,m,p);return d.inclusive?g<=0:g<0}(s.startAt,ru(s),a)||s.endAt&&!function(d,m,p){const g=b0(d,m,p);return d.inclusive?g>=0:g>0}(s.endAt,ru(s),a))}(n,e)}function oM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RS(n){return(e,t)=>{let s=!1;for(const a of ru(n)){const c=lM(a,e,t);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function lM(n,e,t){const s=n.field.isKeyField()?je.comparator(e.key,t.key):function(c,d,m){const p=d.data.field(c),g=m.data.field(c);return p!==null&&g!==null?_l(p,g):Me(42886)}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Me(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){aa(this.inner,(t,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return fS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=new wt(je.comparator);function Ys(){return cM}const IS=new wt(je.comparator);function Zc(...n){let e=IS;for(const t of n)e=e.insert(t.key,t);return e}function OS(n){let e=IS;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function $a(){return au()}function DS(){return au()}function au(){return new ro(n=>n.toString(),(n,e)=>n.isEqual(e))}const uM=new wt(je.comparator),dM=new Qt(je.comparator);function Qe(...n){let e=dM;for(const t of n)e=e.add(t);return e}const hM=new Qt(Fe);function fM(){return hM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yh(e)?"-0":e}}function MS(n){return{integerValue:""+n}}function mM(n,e){return BD(e)?MS(e):qv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(){this._=void 0}}function pM(n,e,t){return n instanceof bu?function(a,c){const d={fields:{[gS]:{stringValue:pS},[yS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Lv(c)&&(c=Ef(c)),c&&(d.fields[vS]=c),{mapValue:d}}(t,e):n instanceof Eu?PS(n,e):n instanceof Tu?LS(n,e):function(a,c){const d=kS(a,c),m=S0(d)+S0(a.Ee);return $g(d)&&$g(a.Ee)?MS(m):qv(a.serializer,m)}(n,e)}function gM(n,e,t){return n instanceof Eu?PS(n,e):n instanceof Tu?LS(n,e):t}function kS(n,e){return n instanceof Jh?function(s){return $g(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class bu extends Sf{}class Eu extends Sf{constructor(e){super(),this.elements=e}}function PS(n,e){const t=VS(e);for(const s of n.elements)t.some(a=>os(a,s))||t.push(s);return{arrayValue:{values:t}}}class Tu extends Sf{constructor(e){super(),this.elements=e}}function LS(n,e){let t=VS(e);for(const s of n.elements)t=t.filter(a=>!os(a,s));return{arrayValue:{values:t}}}class Jh extends Sf{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function S0(n){return Ot(n.integerValue||n.doubleValue)}function VS(n){return Vv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,t){this.field=e,this.transform=t}}function yM(n,e){return n.field.isEqual(e.field)&&function(s,a){return s instanceof Eu&&a instanceof Eu||s instanceof Tu&&a instanceof Tu?yl(s.elements,a.elements,os):s instanceof Jh&&a instanceof Jh?os(s.Ee,a.Ee):s instanceof bu&&a instanceof bu}(n.transform,e.transform)}class _M{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ph(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Af{}function zS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Nf(n.key,Mn.none()):new Pu(n.key,n.data,Mn.none());{const t=n.data,s=Un.empty();let a=new Qt(fn.comparator);for(let c of e.fields)if(!a.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),a=a.add(c)}return new oa(n.key,s,new Jn(a.toArray()),Mn.none())}}function xM(n,e,t){n instanceof Pu?function(a,c,d){const m=a.value.clone(),p=N0(a.fieldTransforms,c,d.transformResults);m.setAll(p),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(n,e,t):n instanceof oa?function(a,c,d){if(!Ph(a.precondition,c))return void c.convertToUnknownDocument(d.version);const m=N0(a.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(US(a)),p.setAll(m),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(n,e,t):function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function ou(n,e,t,s){return n instanceof Pu?function(c,d,m,p){if(!Ph(c.precondition,d))return m;const g=c.value.clone(),y=j0(c.fieldTransforms,p,d);return g.setAll(y),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null}(n,e,t,s):n instanceof oa?function(c,d,m,p){if(!Ph(c.precondition,d))return m;const g=j0(c.fieldTransforms,p,d),y=d.data;return y.setAll(US(c)),y.setAll(g),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(x=>x.field))}(n,e,t,s):function(c,d,m){return Ph(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(n,e,t)}function bM(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),c=kS(s.transform,a||null);c!=null&&(t===null&&(t=Un.empty()),t.set(s.field,c))}return t||null}function A0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&yl(s,a,(c,d)=>yM(c,d))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pu extends Af{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class oa extends Af{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function US(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function N0(n,e,t){const s=new Map;lt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let a=0;a<t.length;a++){const c=n[a],d=c.transform,m=e.data.field(c.field);s.set(c.field,gM(d,m,t[a]))}return s}function j0(n,e,t){const s=new Map;for(const a of n){const c=a.transform,d=t.data.field(a.field);s.set(a.field,pM(c,d,e))}return s}class Nf extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EM extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&xM(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ou(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ou(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=DS();return this.mutations.forEach(a=>{const c=e.get(a.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(a.key)?null:m;const p=zS(d,m);p!==null&&s.set(a.key,p),d.isValidDocument()||d.convertToNoDocument(Pe.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qe())}isEqual(e){return this.batchId===e.batchId&&yl(this.mutations,e.mutations,(t,s)=>A0(t,s))&&yl(this.baseMutations,e.baseMutations,(t,s)=>A0(t,s))}}class Fv{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){lt(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=function(){return uM}();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,s[d].version);return new Fv(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,Je;function AM(n){switch(n){case oe.OK:return Me(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Me(15467,{code:n})}}function BS(n){if(n===void 0)return Qs("GRPC error has no .code"),oe.UNKNOWN;switch(n){case zt.OK:return oe.OK;case zt.CANCELLED:return oe.CANCELLED;case zt.UNKNOWN:return oe.UNKNOWN;case zt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case zt.INTERNAL:return oe.INTERNAL;case zt.UNAVAILABLE:return oe.UNAVAILABLE;case zt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case zt.NOT_FOUND:return oe.NOT_FOUND;case zt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case zt.ABORTED:return oe.ABORTED;case zt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case zt.DATA_LOSS:return oe.DATA_LOSS;default:return Me(39323,{code:n})}}(Je=zt||(zt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=new Gr([4294967295,4294967295],0);function C0(n){const e=cS().encode(n),t=new tS;return t.update(e),new Uint8Array(t.digest())}function R0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Gr([t,s],0),new Gr([a,c],0)]}class Hv{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Jc(`Invalid padding: ${t}`);if(s<0)throw new Jc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Jc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Jc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Gr.fromNumber(this.fe)}pe(e,t,s){let a=e.add(t.multiply(Gr.fromNumber(s)));return a.compare(NM)===1&&(a=new Gr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=C0(e),[s,a]=R0(t);for(let c=0;c<this.hashCount;c++){const d=this.pe(s,a,c);if(!this.ye(d))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Hv(c,a,t);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.fe===0)return;const t=C0(e),[s,a]=R0(t);for(let c=0;c<this.hashCount;c++){const d=this.pe(s,a,c);this.we(d)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new jf(Pe.min(),a,new wt(Fe),Ys(),Qe())}}class Lu{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Lu(s,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=a}}class qS{constructor(e,t){this.targetId=e,this.De=t}}class FS{constructor(e,t,s=gn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class I0{constructor(){this.ve=0,this.Ce=O0(),this.Fe=gn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Qe(),t=Qe(),s=Qe();return this.Ce.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Me(38017,{changeType:c})}}),new Lu(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=O0()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class jM{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ys(),this.je=Th(),this.Je=Th(),this.He=new wt(Fe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((s,a)=>{this.nt(a)&&t(a)})}it(e){const t=e.targetId,s=e.De.count,a=this.st(t);if(a){const c=a.target;if(Kg(c))if(s===0){const d=new je(c.path);this.Xe(t,d,Nn.newNoDocument(d,Pe.min()))}else lt(s===1,20013,{expectedCount:s});else{const d=this.ot(t);if(d!==s){const m=this._t(e),p=m?this.ut(m,e,d):1;if(p!==0){this.rt(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=t;let d,m;try{d=Wr(s).toUint8Array()}catch(p){if(p instanceof mS)return Qr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Hv(d,a,c)}catch(p){return Qr(p instanceof Jc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.fe===0?null:m}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let a=0;return s.forEach(c=>{const d=this.We.lt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.Xe(t,c,null),a++)}),a}Pt(e){const t=new Map;this.Ge.forEach((c,d)=>{const m=this.st(d);if(m){if(c.current&&Kg(m.target)){const p=new je(m.target.path);this.Tt(p).has(d)||this.It(d,p)||this.Xe(d,p,Nn.newNoDocument(p,e))}c.Ne&&(t.set(d,c.Le()),c.ke())}});let s=Qe();this.Je.forEach((c,d)=>{let m=!0;d.forEachWhile(p=>{const g=this.st(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.ze.forEach((c,d)=>d.setReadTime(e));const a=new jf(e,t,this.He,this.ze,s);return this.ze=Ys(),this.je=Th(),this.Je=Th(),this.He=new wt(Fe),a}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new I0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Qt(Fe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Qt(Fe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||be("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new I0),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Th(){return new wt(je.comparator)}function O0(){return new wt(je.comparator)}const CM={asc:"ASCENDING",desc:"DESCENDING"},RM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IM={and:"AND",or:"OR"};class OM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xg(n,e){return n.useProto3Json||bf(e)?e:{value:e}}function ef(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DM(n,e){return ef(n,e.toTimestamp())}function ts(n){return lt(!!n,49232),Pe.fromTimestamp(function(t){const s=Xr(t);return new _t(s.seconds,s.nanos)}(n))}function $v(n,e){return Wg(n,e).canonicalString()}function Wg(n,e){const t=function(a){return new yt(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function $S(n){const e=yt.fromString(n);return lt(XS(e),10190,{key:e.toString()}),e}function Zg(n,e){return $v(n.databaseId,e.path)}function lg(n,e){const t=$S(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(KS(t))}function GS(n,e){return $v(n.databaseId,e)}function MM(n){const e=$S(n);return e.length===4?yt.emptyPath():KS(e)}function Jg(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KS(n){return lt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function D0(n,e,t){return{name:Zg(n,e),fields:t.value.mapValue.fields}}function kM(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Me(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(g,y){return g.useProto3Json?(lt(y===void 0||typeof y=="string",58123),gn.fromBase64String(y||"")):(lt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),gn.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(g){const y=g.code===void 0?oe.UNKNOWN:BS(g.code);return new _e(y,g.message||"")}(d);t=new FS(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=lg(n,s.document.name),c=ts(s.document.updateTime),d=s.document.createTime?ts(s.document.createTime):Pe.min(),m=new Un({mapValue:{fields:s.document.fields}}),p=Nn.newFoundDocument(a,c,d,m),g=s.targetIds||[],y=s.removedTargetIds||[];t=new Lh(g,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=lg(n,s.document),c=s.readTime?ts(s.readTime):Pe.min(),d=Nn.newNoDocument(a,c),m=s.removedTargetIds||[];t=new Lh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=lg(n,s.document),c=s.removedTargetIds||[];t=new Lh([],c,a,null)}else{if(!("filter"in e))return Me(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,d=new SM(a,c),m=s.targetId;t=new qS(m,d)}}return t}function PM(n,e){let t;if(e instanceof Pu)t={update:D0(n,e.key,e.value)};else if(e instanceof Nf)t={delete:Zg(n,e.key)};else if(e instanceof oa)t={update:D0(n,e.key,e.data),updateMask:$M(e.fieldMask)};else{if(!(e instanceof EM))return Me(16599,{Rt:e.type});t={verify:Zg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,d){const m=d.transform;if(m instanceof bu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Eu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Tu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Jh)return{fieldPath:d.field.canonicalString(),increment:m.Ee};throw Me(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:DM(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Me(27497)}(n,e.precondition)),t}function LM(n,e){return n&&n.length>0?(lt(e!==void 0,14353),n.map(t=>function(a,c){let d=a.updateTime?ts(a.updateTime):ts(c);return d.isEqual(Pe.min())&&(d=ts(c)),new _M(d,a.transformResults||[])}(t,e))):[]}function VM(n,e){return{documents:[GS(n,e.path)]}}function zM(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=GS(n,a);const c=function(g){if(g.length!==0)return YS(Ii.create(g,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const d=function(g){if(g.length!==0)return g.map(y=>function(T){return{field:al(T.field),direction:qM(T.dir)}}(y))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Xg(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{Vt:t,parent:a}}function UM(n){let e=MM(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){lt(s===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let c=[];t.where&&(c=function(x){const T=QS(x);return T instanceof Ii&&wS(T)?T.getFilters():[T]}(t.where));let d=[];t.orderBy&&(d=function(x){return x.map(T=>function(j){return new xu(ol(j.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(T))}(t.orderBy));let m=null;t.limit&&(m=function(x){let T;return T=typeof x=="object"?x.value:x,bf(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(x){const T=!!x.before,S=x.values||[];return new Zh(S,T)}(t.startAt));let g=null;return t.endAt&&(g=function(x){const T=!x.before,S=x.values||[];return new Zh(S,T)}(t.endAt)),rM(e,a,d,c,m,"F",p,g)}function BM(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function QS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ol(t.unaryFilter.field);return Ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=ol(t.unaryFilter.field);return Ut.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ol(t.unaryFilter.field);return Ut.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ol(t.unaryFilter.field);return Ut.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ut.create(ol(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ii.create(t.compositeFilter.filters.map(s=>QS(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(t.compositeFilter.op))}(n):Me(30097,{filter:n})}function qM(n){return CM[n]}function FM(n){return RM[n]}function HM(n){return IM[n]}function al(n){return{fieldPath:n.canonicalString()}}function ol(n){return fn.fromServerFormat(n.fieldPath)}function YS(n){return n instanceof Ut?function(t){if(t.op==="=="){if(x0(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NAN"}};if(_0(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(x0(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NOT_NAN"}};if(_0(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:al(t.field),op:FM(t.op),value:t.value}}}(n):n instanceof Ii?function(t){const s=t.getFilters().map(a=>YS(a));return s.length===1?s[0]:{compositeFilter:{op:HM(t.op),filters:s}}}(n):Me(54877,{filter:n})}function $M(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t,s,a,c=Pe.min(),d=Pe.min(),m=gn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.gt=e}}function KM(n){const e=UM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Yg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.Dn=new YM}addToCollectionParentIndex(e,t){return this.Dn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Yr.min())}updateCollectionGroup(e,t,s){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class YM{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Qt(yt.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Qt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WS=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(WS,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new bl(0)}static ur(){return new bl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="LruGarbageCollector",XM=1048576;function P0([n,e],[t,s]){const a=Fe(n,t);return a===0?Fe(e,s):a}class WM{constructor(e){this.Tr=e,this.buffer=new Qt(P0),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();P0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZM{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){be(k0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Dl(t)?be(k0,"Ignoring IndexedDB error during garbage collection: ",t):await Ol(t)}await this.Rr(3e5)})}}class JM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return he.resolve(xf.ue);const s=new WM(t);return this.Vr.forEachTarget(e,a=>s.Er(a.sequenceNumber)).next(()=>this.Vr.gr(e,a=>s.Er(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(M0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M0):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,a,c,d,m,p,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,d=Date.now(),this.nthSequenceNumber(e,a))).next(x=>(s=x,m=Date.now(),this.removeTargets(e,s,t))).next(x=>(c=x,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(x=>(g=Date.now(),sl()<=Ke.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-y}ms
	Determined least recently used ${a} in `+(m-d)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${x} documents in `+(g-p)+`ms
Total Duration: ${g-y}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:x})))}}function ek(n,e){return new JM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.changes=new ro(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?he.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&ou(s.mutation,a,Jn.empty(),_t.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Qe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Qe()){const a=$a();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(c=>{let d=Zc();return c.forEach((m,p)=>{d=d.insert(m,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const s=$a();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Qe()))}populateOverlays(e,t,s){const a=[];return s.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,s,a){let c=Ys();const d=au(),m=function(){return au()}();return t.forEach((p,g)=>{const y=s.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof oa)?c=c.insert(g.key,g):y!==void 0?(d.set(g.key,y.mutation.getFieldMask()),ou(y.mutation,g,y.mutation.getFieldMask(),_t.now())):d.set(g.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,c).next(p=>(p.forEach((g,y)=>d.set(g,y)),t.forEach((g,y)=>{var x;return m.set(g,new nk(y,(x=d.get(g))!==null&&x!==void 0?x:null))}),m))}recalculateAndSaveOverlays(e,t){const s=au();let a=new wt((d,m)=>d-m),c=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let y=s.get(p)||Jn.empty();y=m.applyToLocalView(g,y),s.set(p,y);const x=(a.get(m.batchId)||Qe()).add(p);a=a.insert(m.batchId,x)})}).next(()=>{const d=[],m=a.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,y=p.value,x=DS();y.forEach(T=>{if(!c.has(T)){const S=zS(t.get(T),s.get(T));S!==null&&x.set(T,S),c=c.add(T)}}),d.push(this.documentOverlayCache.saveOverlays(e,g,x))}return he.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(d){return je.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):he.resolve($a());let m=gu,p=c;return d.next(g=>he.forEach(g,(y,x)=>(m<x.largestBatchId&&(m=x.largestBatchId),c.get(y)?he.resolve():this.remoteDocumentCache.getEntry(e,y).next(T=>{p=p.insert(y,T)}))).next(()=>this.populateOverlays(e,g,c)).next(()=>this.computeViews(e,p,g,Qe())).next(y=>({batchId:m,changes:OS(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(s=>{let a=Zc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const c=t.collectionGroup;let d=Zc();return this.indexManager.getCollectionParents(e,c).next(m=>he.forEach(m,p=>{const g=function(x,T){return new Ml(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(t,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,s,a).next(y=>{y.forEach((x,T)=>{d=d.insert(x,T)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,a))).next(d=>{c.forEach((p,g)=>{const y=g.getKey();d.get(y)===null&&(d=d.insert(y,Nn.newInvalidDocument(y)))});let m=Zc();return d.forEach((p,g)=>{const y=c.get(p);y!==void 0&&ou(y.mutation,g,Jn.empty(),_t.now()),wf(t,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return he.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(a){return{id:a.id,version:a.version,createTime:ts(a.createTime)}}(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(a){return{name:a.name,query:KM(a.bundledQuery),readTime:ts(a.readTime)}}(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.overlays=new wt(je.comparator),this.kr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const s=$a();return he.forEach(t,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,c)=>{this.wt(e,t,c)}),he.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.kr.delete(s)),he.resolve()}getOverlaysForCollection(e,t,s){const a=$a(),c=t.length+1,d=new je(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===c&&p.largestBatchId>s&&a.set(p.getKey(),p)}return he.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new wt((g,y)=>g-y);const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let y=c.get(g.largestBatchId);y===null&&(y=$a(),c=c.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const m=$a(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,y)=>m.set(g,y)),!(m.size()>=a)););return he.resolve(m)}wt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const d=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new wM(t,s));let c=this.kr.get(t);c===void 0&&(c=Qe(),this.kr.set(t,c)),this.kr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.qr=new Qt(nn.Qr),this.$r=new Qt(nn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new nn(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Wr(new nn(e,t))}Gr(e,t){e.forEach(s=>this.removeReference(s,t))}zr(e){const t=new je(new yt([])),s=new nn(t,e),a=new nn(t,e+1),c=[];return this.$r.forEachInRange([s,a],d=>{this.Wr(d),c.push(d.key)}),c}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new je(new yt([])),s=new nn(t,e),a=new nn(t,e+1);let c=Qe();return this.$r.forEachInRange([s,a],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new nn(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class nn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return je.comparator(e.key,t.key)||Fe(e.Hr,t.Hr)}static Ur(e,t){return Fe(e.Hr,t.Hr)||je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Qt(nn.Qr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new TM(c,t,s,a);this.mutationQueue.push(d);for(const m of a)this.Yr=this.Yr.add(new nn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return he.resolve(d)}lookupMutationBatch(e,t){return he.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),c=a<0?0:a;return he.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?Pv:this.er-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new nn(t,0),a=new nn(t,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([s,a],d=>{const m=this.Zr(d.Hr);c.push(m)}),he.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Qt(Fe);return t.forEach(a=>{const c=new nn(a,0),d=new nn(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,d],m=>{s=s.add(m.Hr)})}),he.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;je.isDocumentKey(c)||(c=c.child(""));const d=new nn(new je(c),0);let m=new Qt(Fe);return this.Yr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===a&&(m=m.add(p.Hr)),!0)},d),he.resolve(this.ei(m))}ei(e){const t=[];return e.forEach(s=>{const a=this.Zr(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){lt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return he.forEach(t.mutations,a=>{const c=new nn(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,t){const s=new nn(t,0),a=this.Yr.firstAfterOrEqual(s);return he.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.ni=e,this.docs=function(){return new wt(je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,d=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return he.resolve(s?s.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let s=Ys();return t.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Nn.newInvalidDocument(a))}),he.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=Ys();const d=t.path,m=new je(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:y}}=p.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||LD(PD(y),s)<=0||(a.has(y.key)||wf(t,y))&&(c=c.insert(y.key,y.mutableCopy()))}return he.resolve(c)}getAllFromCollectionGroup(e,t,s,a){Me(9500)}ri(e,t){return he.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new ck(this)}getSize(e){return he.resolve(this.size)}}class ck extends tk{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)}),he.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.persistence=e,this.ii=new ro(t=>zv(t),Uv),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.si=0,this.oi=new Gv,this.targetCount=0,this._i=bl.ar()}forEachTarget(e,t){return this.ii.forEach((s,a)=>t(a)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),he.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new bl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.hr(t),he.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.ii.forEach((d,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.ii.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),he.waitFor(c).next(()=>a)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return he.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),he.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(d=>{c.push(a.markPotentiallyOrphaned(e,d))}),he.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return he.resolve(s)}containsKey(e,t){return he.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t){this.ai={},this.overlays={},this.ui=new xf(0),this.ci=!1,this.ci=!0,this.li=new ak,this.referenceDelegate=e(this),this.hi=new uk(this),this.indexManager=new QM,this.remoteDocumentCache=function(a){return new lk(a)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new GM(t),this.Ti=new sk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new ok(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){be("MemoryPersistence","Starting transaction:",e);const a=new dk(this.ui.next());return this.referenceDelegate.Ii(),s(a).next(c=>this.referenceDelegate.di(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ei(e,t){return he.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,t)))}}class dk extends zD{constructor(e){super(),this.currentSequenceNumber=e}}class Kv{constructor(e){this.persistence=e,this.Ai=new Gv,this.Ri=null}static Vi(e){return new Kv(e)}get mi(){if(this.Ri)return this.Ri;throw Me(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),he.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(a=>this.mi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.mi.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.mi,s=>{const a=je.fromPath(s);return this.fi(e,a).next(c=>{c||t.removeEntry(a,Pe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return he.or([()=>he.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class tf{constructor(e,t){this.persistence=e,this.gi=new ro(s=>qD(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=ek(this,t)}static Vi(e,t){return new tf(e,t)}Ii(){}di(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}yr(e){let t=0;return this.gr(e,s=>{t++}).next(()=>t)}gr(e,t){return he.forEach(this.gi,(s,a)=>this.Sr(e,s,a).next(c=>c?he.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ri(e,d=>this.Sr(e,d,t).next(m=>{m||(s++,c.removeEntry(d,Pe.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),he.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Mh(e.data.value)),t}Sr(e,t,s){return he.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return he.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=a}static Es(e,t){let s=Qe(),a=Qe();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Qv(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return qR()?8:UD(Cn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,a){const c={result:null};return this.ps(e,t).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.ys(e,t,a,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new hk;return this.ws(e,t,d).next(m=>{if(c.result=m,this.Rs)return this.Ss(e,t,d,m.size)})}).next(()=>c.result)}Ss(e,t,s,a){return s.documentReadCount<this.Vs?(sl()<=Ke.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),he.resolve()):(sl()<=Ke.DEBUG&&be("QueryEngine","Query:",rl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(sl()<=Ke.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,es(t))):he.resolve())}ps(e,t){if(w0(t))return he.resolve(null);let s=es(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Yg(t,null,"F"),s=es(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const d=Qe(...c);return this.gs.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.bs(t,m);return this.Ds(t,g,d,p.readTime)?this.ps(e,Yg(t,null,"F")):this.vs(e,g,t,p)}))})))}ys(e,t,s,a){return w0(t)||a.isEqual(Pe.min())?he.resolve(null):this.gs.getDocuments(e,s).next(c=>{const d=this.bs(t,c);return this.Ds(t,d,s,a)?he.resolve(null):(sl()<=Ke.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),rl(t)),this.vs(e,d,t,kD(a,gu)).next(m=>m))})}bs(e,t){let s=new Qt(RS(e));return t.forEach((a,c)=>{wf(e,c)&&(s=s.add(c))}),s}Ds(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ws(e,t,s){return sl()<=Ke.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",rl(t)),this.gs.getDocumentsMatchingQuery(e,t,Yr.min(),s)}vs(e,t,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="LocalStore",mk=3e8;class pk{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new wt(Fe),this.Ms=new ro(c=>zv(c),Uv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ik(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function gk(n,e,t,s){return new pk(n,e,t,s)}async function JS(n,e){const t=Le(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,t.Ns(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],m=[];let p=Qe();for(const g of a){d.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}for(const g of c){m.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(s,p).next(g=>({Bs:g,removedBatchIds:d,addedBatchIds:m}))})})}function vk(n,e){const t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=t.Os.newChangeBuffer({trackRemovals:!0});return function(m,p,g,y){const x=g.batch,T=x.keys();let S=he.resolve();return T.forEach(j=>{S=S.next(()=>y.getEntry(p,j)).next(k=>{const I=g.docVersions.get(j);lt(I!==null,48541),k.version.compareTo(I)<0&&(x.applyToRemoteDocument(k,g),k.isValidDocument()&&(k.setReadTime(g.commitVersion),y.addEntry(k)))})}),S.next(()=>m.mutationQueue.removeMutationBatch(p,x))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Qe();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function eA(n){const e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function yk(n,e){const t=Le(n),s=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const m=[];e.targetChanges.forEach((y,x)=>{const T=a.get(x);if(!T)return;m.push(t.hi.removeMatchingKeys(c,y.removedDocuments,x).next(()=>t.hi.addMatchingKeys(c,y.addedDocuments,x)));let S=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(x)!==null?S=S.withResumeToken(gn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,s)),a=a.insert(x,S),function(k,I,Y){return k.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=mk?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(T,S,y)&&m.push(t.hi.updateTargetData(c,S))});let p=Ys(),g=Qe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,y))}),m.push(_k(c,d,e.documentUpdates).next(y=>{p=y.Ls,g=y.ks})),!s.isEqual(Pe.min())){const y=t.hi.getLastRemoteSnapshotVersion(c).next(x=>t.hi.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(y)}return he.waitFor(m).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,p,g)).next(()=>p)}).then(c=>(t.Fs=a,c))}function _k(n,e,t){let s=Qe(),a=Qe();return t.forEach(c=>s=s.add(c)),e.getEntries(n,s).next(c=>{let d=Ys();return t.forEach((m,p)=>{const g=c.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(m)),p.isNoDocument()&&p.version.isEqual(Pe.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):be(Yv,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{Ls:d,ks:a}})}function xk(n,e){const t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Pv),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function bk(n,e){const t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.hi.getTargetData(s,e).next(c=>c?(a=c,he.resolve(a)):t.hi.allocateTargetId(s).next(d=>(a=new zr(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s})}async function ev(n,e,t){const s=Le(n),a=s.Fs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,a))}catch(d){if(!Dl(d))throw d;be(Yv,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function L0(n,e,t){const s=Le(n);let a=Pe.min(),c=Qe();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,g,y){const x=Le(p),T=x.Ms.get(y);return T!==void 0?he.resolve(x.Fs.get(T)):x.hi.getTargetData(g,y)}(s,d,es(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(d,m.targetId).next(p=>{c=p})}).next(()=>s.Cs.getDocumentsMatchingQuery(d,e,t?a:Pe.min(),t?c:Qe())).next(m=>(Ek(s,oM(e),m),{documents:m,qs:c})))}function Ek(n,e,t){let s=n.xs.get(e)||Pe.min();t.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),n.xs.set(e,s)}class V0{constructor(){this.activeTargetIds=fM()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tk{constructor(){this.Fo=new V0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new V0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="ConnectivityMonitor";class U0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){be(z0,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){be(z0,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh=null;function tv(){return wh===null?wh=function(){return 268435456+Math.round(2147483648*Math.random())}():wh++,"0x"+wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="RestConnection",Sk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ak{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===Xh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,c){const d=tv(),m=this.Go(e,t.toUriEncodedString());be(cg,`Sending RPC '${e}' ${d}:`,m,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,a,c);const{host:g}=new URL(m),y=Cl(g);return this.jo(e,m,p,s,y).then(x=>(be(cg,`Received RPC '${e}' ${d}: `,x),x),x=>{throw Qr(cg,`RPC '${e}' ${d} failed with error: `,x,"url: ",m,"request:",s),x})}Jo(e,t,s,a,c,d){return this.Wo(e,t,s,a,c)}zo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Il}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}Go(e,t){const s=Sk[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class jk extends Ak{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,a,c){const d=tv();return new Promise((m,p)=>{const g=new nS;g.setWithCredentials(!0),g.listenOnce(iS.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Dh.NO_ERROR:const x=g.getResponseJson();be(wn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(x)),m(x);break;case Dh.TIMEOUT:be(wn,`RPC '${e}' ${d} timed out`),p(new _e(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const T=g.getStatus();if(be(wn,`RPC '${e}' ${d} failed with status:`,T,"response text:",g.getResponseText()),T>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const j=S?.error;if(j&&j.status&&j.message){const k=function(Y){const $=Y.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf($)>=0?$:oe.UNKNOWN}(j.status);p(new _e(k,j.message))}else p(new _e(oe.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new _e(oe.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{c_:e,streamId:d,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{be(wn,`RPC '${e}' ${d} completed.`)}});const y=JSON.stringify(a);be(wn,`RPC '${e}' ${d} sending request:`,a),g.send(t,"POST",y,s,15)})}P_(e,t,s){const a=tv(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=aS(),m=rS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const y=c.join("");be(wn,`Creating RPC '${e}' stream ${a}: ${y}`,p);const x=d.createWebChannel(y,p);this.T_(x);let T=!1,S=!1;const j=new Nk({Ho:I=>{S?be(wn,`Not sending because RPC '${e}' stream ${a} is closed:`,I):(T||(be(wn,`Opening RPC '${e}' stream ${a} transport.`),x.open(),T=!0),be(wn,`RPC '${e}' stream ${a} sending:`,I),x.send(I))},Yo:()=>x.close()}),k=(I,Y,$)=>{I.listen(Y,B=>{try{$(B)}catch(q){setTimeout(()=>{throw q},0)}})};return k(x,Wc.EventType.OPEN,()=>{S||(be(wn,`RPC '${e}' stream ${a} transport opened.`),j.s_())}),k(x,Wc.EventType.CLOSE,()=>{S||(S=!0,be(wn,`RPC '${e}' stream ${a} transport closed`),j.__(),this.I_(x))}),k(x,Wc.EventType.ERROR,I=>{S||(S=!0,Qr(wn,`RPC '${e}' stream ${a} transport errored. Name:`,I.name,"Message:",I.message),j.__(new _e(oe.UNAVAILABLE,"The operation could not be completed")))}),k(x,Wc.EventType.MESSAGE,I=>{var Y;if(!S){const $=I.data[0];lt(!!$,16349);const B=$,q=B?.error||((Y=B[0])===null||Y===void 0?void 0:Y.error);if(q){be(wn,`RPC '${e}' stream ${a} received error:`,q);const H=q.status;let K=function(O){const D=zt[O];if(D!==void 0)return BS(D)}(H),M=q.message;K===void 0&&(K=oe.INTERNAL,M="Unknown error status: "+H+" with message "+q.message),S=!0,j.__(new _e(K,M)),x.close()}else be(wn,`RPC '${e}' stream ${a} received:`,$),j.a_($)}}),k(m,sS.STAT_EVENT,I=>{I.stat===qg.PROXY?be(wn,`RPC '${e}' stream ${a} detected buffering proxy`):I.stat===qg.NOPROXY&&be(wn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{j.o_()},0),j}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(n){return new OM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,s=1e3,a=1.5,c=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=a,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-s);a>0&&be("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="PersistentStream";class nA{constructor(e,t,s,a,c,d,m,p){this.Fi=e,this.w_=s,this.S_=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new tA(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Qs(t.toString()),Qs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.b_===t&&this.W_(s,a)},s=>{e(()=>{const a=new _e(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)})})}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(a=>{s(()=>this.G_(a))}),this.stream.onMessage(a=>{s(()=>++this.C_==1?this.j_(a):this.onNext(a))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return be(B0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(be(B0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ck extends nA{constructor(e,t,s,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,d),this.serializer=c}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=kM(this.serializer,e),s=function(c){if(!("targetChange"in c))return Pe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Pe.min():d.readTime?ts(d.readTime):Pe.min()}(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=Jg(this.serializer),t.addTarget=function(c,d){let m;const p=d.target;if(m=Kg(p)?{documents:VM(c,p)}:{query:zM(c,p).Vt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=HS(c,d.resumeToken);const g=Xg(c,d.expectedCount);g!==null&&(m.expectedCount=g)}else if(d.snapshotVersion.compareTo(Pe.min())>0){m.readTime=ef(c,d.snapshotVersion.toTimestamp());const g=Xg(c,d.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=BM(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=Jg(this.serializer),t.removeTarget=e,this.k_(t)}}class Rk extends nA{constructor(e,t,s,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,d),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=LM(e.writeResults,e.commitTime),s=ts(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=Jg(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>PM(this.serializer,s))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{}class Ok extends Ik{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Wo(e,Wg(t,s),a,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(oe.UNKNOWN,c.toString())})}Jo(e,t,s,a,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Jo(e,Wg(t,s),a,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new _e(oe.UNKNOWN,d.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Dk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Qs(t),this._a=!1):be("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="RemoteStore";class Mk{constructor(e,t,s,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo(d=>{s.enqueueAndForget(async()=>{ao(this)&&(be(to,"Restarting streams for network reachability change."),await async function(p){const g=Le(p);g.Ia.add(4),await Vu(g),g.Aa.set("Unknown"),g.Ia.delete(4),await Rf(g)}(this))})}),this.Aa=new Dk(s,a)}}async function Rf(n){if(ao(n))for(const e of n.da)await e(!0)}async function Vu(n){for(const e of n.da)await e(!1)}function iA(n,e){const t=Le(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Jv(t)?Zv(t):kl(t).x_()&&Wv(t,e))}function Xv(n,e){const t=Le(n),s=kl(t);t.Ta.delete(e),s.x_()&&sA(t,e),t.Ta.size===0&&(s.x_()?s.B_():ao(t)&&t.Aa.set("Unknown"))}function Wv(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}kl(n).H_(e)}function sA(n,e){n.Ra.$e(e),kl(n).Y_(e)}function Zv(n){n.Ra=new jM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),kl(n).start(),n.Aa.aa()}function Jv(n){return ao(n)&&!kl(n).M_()&&n.Ta.size>0}function ao(n){return Le(n).Ia.size===0}function rA(n){n.Ra=void 0}async function kk(n){n.Aa.set("Online")}async function Pk(n){n.Ta.forEach((e,t)=>{Wv(n,e)})}async function Lk(n,e){rA(n),Jv(n)?(n.Aa.la(e),Zv(n)):n.Aa.set("Unknown")}async function Vk(n,e,t){if(n.Aa.set("Online"),e instanceof FS&&e.state===2&&e.cause)try{await async function(a,c){const d=c.cause;for(const m of c.targetIds)a.Ta.has(m)&&(await a.remoteSyncer.rejectListen(m,d),a.Ta.delete(m),a.Ra.removeTarget(m))}(n,e)}catch(s){be(to,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await nf(n,s)}else if(e instanceof Lh?n.Ra.Ye(e):e instanceof qS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Pe.min()))try{const s=await eA(n.localStore);t.compareTo(s)>=0&&await function(c,d){const m=c.Ra.Pt(d);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const y=c.Ta.get(g);y&&c.Ta.set(g,y.withResumeToken(p.resumeToken,d))}}),m.targetMismatches.forEach((p,g)=>{const y=c.Ta.get(p);if(!y)return;c.Ta.set(p,y.withResumeToken(gn.EMPTY_BYTE_STRING,y.snapshotVersion)),sA(c,p);const x=new zr(y.target,p,g,y.sequenceNumber);Wv(c,x)}),c.remoteSyncer.applyRemoteEvent(m)}(n,t)}catch(s){be(to,"Failed to raise snapshot:",s),await nf(n,s)}}async function nf(n,e,t){if(!Dl(e))throw e;n.Ia.add(1),await Vu(n),n.Aa.set("Offline"),t||(t=()=>eA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{be(to,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Rf(n)})}function aA(n,e){return e().catch(t=>nf(n,t,e))}async function If(n){const e=Le(n),t=Jr(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Pv;for(;zk(e);)try{const a=await xk(e.localStore,s);if(a===null){e.Pa.length===0&&t.B_();break}s=a.batchId,Uk(e,a)}catch(a){await nf(e,a)}oA(e)&&lA(e)}function zk(n){return ao(n)&&n.Pa.length<10}function Uk(n,e){n.Pa.push(e);const t=Jr(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function oA(n){return ao(n)&&!Jr(n).M_()&&n.Pa.length>0}function lA(n){Jr(n).start()}async function Bk(n){Jr(n).na()}async function qk(n){const e=Jr(n);for(const t of n.Pa)e.X_(t.mutations)}async function Fk(n,e,t){const s=n.Pa.shift(),a=Fv.from(s,e,t);await aA(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await If(n)}async function Hk(n,e){e&&Jr(n).Z_&&await async function(s,a){if(function(d){return AM(d)&&d!==oe.ABORTED}(a.code)){const c=s.Pa.shift();Jr(s).N_(),await aA(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await If(s)}}(n,e),oA(n)&&lA(n)}async function q0(n,e){const t=Le(n);t.asyncQueue.verifyOperationInProgress(),be(to,"RemoteStore received new credentials");const s=ao(t);t.Ia.add(3),await Vu(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Rf(t)}async function $k(n,e){const t=Le(n);e?(t.Ia.delete(2),await Rf(t)):e||(t.Ia.add(2),await Vu(t),t.Aa.set("Unknown"))}function kl(n){return n.Va||(n.Va=function(t,s,a){const c=Le(t);return c.ia(),new Ck(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(n.datastore,n.asyncQueue,{Zo:kk.bind(null,n),e_:Pk.bind(null,n),n_:Lk.bind(null,n),J_:Vk.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Jv(n)?Zv(n):n.Aa.set("Unknown")):(await n.Va.stop(),rA(n))})),n.Va}function Jr(n){return n.ma||(n.ma=function(t,s,a){const c=Le(t);return c.ia(),new Rk(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Bk.bind(null,n),n_:Hk.bind(null,n),ea:qk.bind(null,n),ta:Fk.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await If(n)):(await n.ma.stop(),n.Pa.length>0&&(be(to,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,c){const d=Date.now()+s,m=new ey(e,t,d,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ty(n,e){if(Qs("AsyncQueue",`${e}: ${n}`),Dl(n))return new _e(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||je.comparator(t.key,s.key):(t,s)=>je.comparator(t.key,s.key),this.keyedMap=Zc(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ml;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(){this.fa=new wt(je.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Me(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,s)=>{e.push(s)}),e}}class El{constructor(e,t,s,a,c,d,m,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,a,c){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new El(e,t,ml.emptySet(t),d,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Kk{constructor(){this.queries=H0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const a=Le(t),c=a.queries;a.queries=H0(),c.forEach((d,m)=>{for(const p of m.wa)p.onError(s)})})(this,new _e(oe.ABORTED,"Firestore shutting down"))}}function H0(){return new ro(n=>CS(n),Tf)}async function cA(n,e){const t=Le(n);let s=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.ba()&&(s=2):(c=new Gk,s=e.ba()?0:1);try{switch(s){case 0:c.ya=await t.onListen(a,!0);break;case 1:c.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(d){const m=ty(d,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,c),c.wa.push(e),e.va(t.onlineState),c.ya&&e.Ca(c.ya)&&ny(t)}async function uA(n,e){const t=Le(n),s=e.query;let a=3;const c=t.queries.get(s);if(c){const d=c.wa.indexOf(e);d>=0&&(c.wa.splice(d,1),c.wa.length===0?a=e.ba()?0:1:!c.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Qk(n,e){const t=Le(n);let s=!1;for(const a of e){const c=a.query,d=t.queries.get(c);if(d){for(const m of d.wa)m.Ca(a)&&(s=!0);d.ya=a}}s&&ny(t)}function Yk(n,e,t){const s=Le(n),a=s.queries.get(e);if(a)for(const c of a.wa)c.onError(t);s.queries.delete(e)}function ny(n){n.Da.forEach(e=>{e.next()})}var nv,$0;($0=nv||(nv={})).Fa="default",$0.Cache="cache";class dA{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new El(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=El.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==nv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.key=e}}class fA{constructor(e){this.key=e}}class Xk{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Qe(),this.mutatedKeys=Qe(),this.Xa=RS(e),this.eu=new ml(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new F0,a=t?t.eu:this.eu;let c=t?t.mutatedKeys:this.mutatedKeys,d=a,m=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,x)=>{const T=a.get(y),S=wf(this.query,x)?x:null,j=!!T&&this.mutatedKeys.has(T.key),k=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let I=!1;T&&S?T.data.isEqual(S.data)?j!==k&&(s.track({type:3,doc:S}),I=!0):this.iu(T,S)||(s.track({type:2,doc:S}),I=!0,(p&&this.Xa(S,p)>0||g&&this.Xa(S,g)<0)&&(m=!0)):!T&&S?(s.track({type:0,doc:S}),I=!0):T&&!S&&(s.track({type:1,doc:T}),I=!0,(p||g)&&(m=!0)),I&&(S?(d=d.add(S),c=k?c.add(y):c.delete(y)):(d=d.delete(y),c=c.delete(y)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const y=this.query.limitType==="F"?d.last():d.first();d=d.delete(y.key),c=c.delete(y.key),s.track({type:1,doc:y})}return{eu:d,ru:s,Ds:m,mutatedKeys:c}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort((y,x)=>function(S,j){const k=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{At:I})}};return k(S)-k(j)}(y.type,x.type)||this.Xa(y.doc,x.doc)),this.su(s),a=a!=null&&a;const m=t&&!a?this.ou():[],p=this.Za.size===0&&this.current&&!a?1:0,g=p!==this.Ya;return this.Ya=p,d.length!==0||g?{snapshot:new El(this.query,e.eu,c,d,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:m}:{_u:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new F0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Qe(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const t=[];return e.forEach(s=>{this.Za.has(s)||t.push(new fA(s))}),this.Za.forEach(s=>{e.has(s)||t.push(new hA(s))}),t}uu(e){this.Ha=e.qs,this.Za=Qe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return El.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const iy="SyncEngine";class Wk{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Zk{constructor(e){this.key=e,this.lu=!1}}class Jk{constructor(e,t,s,a,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new ro(m=>CS(m),Tf),this.Tu=new Map,this.Iu=new Set,this.du=new wt(je.comparator),this.Eu=new Map,this.Au=new Gv,this.Ru={},this.Vu=new Map,this.mu=bl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function eP(n,e,t=!0){const s=_A(n);let a;const c=s.Pu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.cu()):a=await mA(s,e,t,!0),a}async function tP(n,e){const t=_A(n);await mA(t,e,!0,!1)}async function mA(n,e,t,s){const a=await bk(n.localStore,es(e)),c=a.targetId,d=n.sharedClientState.addLocalQueryTarget(c,t);let m;return s&&(m=await nP(n,e,c,d==="current",a.resumeToken)),n.isPrimaryClient&&t&&iA(n.remoteStore,a),m}async function nP(n,e,t,s,a){n.gu=(x,T,S)=>async function(k,I,Y,$){let B=I.view.nu(Y);B.Ds&&(B=await L0(k.localStore,I.query,!1).then(({documents:M})=>I.view.nu(M,B)));const q=$&&$.targetChanges.get(I.targetId),H=$&&$.targetMismatches.get(I.targetId)!=null,K=I.view.applyChanges(B,k.isPrimaryClient,q,H);return K0(k,I.targetId,K._u),K.snapshot}(n,x,T,S);const c=await L0(n.localStore,e,!0),d=new Xk(e,c.qs),m=d.nu(c.documents),p=Lu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),g=d.applyChanges(m,n.isPrimaryClient,p);K0(n,t,g._u);const y=new Wk(e,t,d);return n.Pu.set(e,y),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),g.snapshot}async function iP(n,e,t){const s=Le(n),a=s.Pu.get(e),c=s.Tu.get(a.targetId);if(c.length>1)return s.Tu.set(a.targetId,c.filter(d=>!Tf(d,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await ev(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Xv(s.remoteStore,a.targetId),iv(s,a.targetId)}).catch(Ol)):(iv(s,a.targetId),await ev(s.localStore,a.targetId,!0))}async function sP(n,e){const t=Le(n),s=t.Pu.get(e),a=t.Tu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Xv(t.remoteStore,s.targetId))}async function rP(n,e,t){const s=hP(n);try{const a=await function(d,m){const p=Le(d),g=_t.now(),y=m.reduce((S,j)=>S.add(j.key),Qe());let x,T;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>{let j=Ys(),k=Qe();return p.Os.getEntries(S,y).next(I=>{j=I,j.forEach((Y,$)=>{$.isValidDocument()||(k=k.add(Y))})}).next(()=>p.localDocuments.getOverlayedDocuments(S,j)).next(I=>{x=I;const Y=[];for(const $ of m){const B=bM($,x.get($.key).overlayedDocument);B!=null&&Y.push(new oa($.key,B,bS(B.value.mapValue),Mn.exists(!0)))}return p.mutationQueue.addMutationBatch(S,g,Y,m)}).next(I=>{T=I;const Y=I.applyToLocalDocumentSet(x,k);return p.documentOverlayCache.saveOverlays(S,I.batchId,Y)})}).then(()=>({batchId:T.batchId,changes:OS(x)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(d,m,p){let g=d.Ru[d.currentUser.toKey()];g||(g=new wt(Fe)),g=g.insert(m,p),d.Ru[d.currentUser.toKey()]=g}(s,a.batchId,t),await zu(s,a.changes),await If(s.remoteStore)}catch(a){const c=ty(a,"Failed to persist write");t.reject(c)}}async function pA(n,e){const t=Le(n);try{const s=await yk(t.localStore,e);e.targetChanges.forEach((a,c)=>{const d=t.Eu.get(c);d&&(lt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?d.lu=!0:a.modifiedDocuments.size>0?lt(d.lu,14607):a.removedDocuments.size>0&&(lt(d.lu,42227),d.lu=!1))}),await zu(t,s,e)}catch(s){await Ol(s)}}function G0(n,e,t){const s=Le(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Pu.forEach((c,d)=>{const m=d.view.va(e);m.snapshot&&a.push(m.snapshot)}),function(d,m){const p=Le(d);p.onlineState=m;let g=!1;p.queries.forEach((y,x)=>{for(const T of x.wa)T.va(m)&&(g=!0)}),g&&ny(p)}(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function aP(n,e,t){const s=Le(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Eu.get(e),c=a&&a.key;if(c){let d=new wt(je.comparator);d=d.insert(c,Nn.newNoDocument(c,Pe.min()));const m=Qe().add(c),p=new jf(Pe.min(),new Map,new wt(Fe),d,m);await pA(s,p),s.du=s.du.remove(c),s.Eu.delete(e),sy(s)}else await ev(s.localStore,e,!1).then(()=>iv(s,e,t)).catch(Ol)}async function oP(n,e){const t=Le(n),s=e.batch.batchId;try{const a=await vk(t.localStore,e);vA(t,s,null),gA(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await zu(t,a)}catch(a){await Ol(a)}}async function lP(n,e,t){const s=Le(n);try{const a=await function(d,m){const p=Le(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return p.mutationQueue.lookupMutationBatch(g,m).next(x=>(lt(x!==null,37113),y=x.keys(),p.mutationQueue.removeMutationBatch(g,x))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,y,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>p.localDocuments.getDocuments(g,y))})}(s.localStore,e);vA(s,e,t),gA(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await zu(s,a)}catch(a){await Ol(a)}}function gA(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function vA(n,e,t){const s=Le(n);let a=s.Ru[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function iv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(s=>{n.Au.containsKey(s)||yA(n,s)})}function yA(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Xv(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),sy(n))}function K0(n,e,t){for(const s of t)s instanceof hA?(n.Au.addReference(s.key,e),cP(n,s)):s instanceof fA?(be(iy,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||yA(n,s.key)):Me(19791,{yu:s})}function cP(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(be(iy,"New document in limbo: "+t),n.Iu.add(s),sy(n))}function sy(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new je(yt.fromString(e)),s=n.mu.next();n.Eu.set(s,new Zk(t)),n.du=n.du.insert(t,s),iA(n.remoteStore,new zr(es(Bv(t.path)),s,"TargetPurposeLimboResolution",xf.ue))}}async function zu(n,e,t){const s=Le(n),a=[],c=[],d=[];s.Pu.isEmpty()||(s.Pu.forEach((m,p)=>{d.push(s.gu(p,e,t).then(g=>{var y;if((g||t)&&s.isPrimaryClient){const x=g?!g.fromCache:(y=t?.targetChanges.get(p.targetId))===null||y===void 0?void 0:y.current;s.sharedClientState.updateQueryState(p.targetId,x?"current":"not-current")}if(g){a.push(g);const x=Qv.Es(p.targetId,g);c.push(x)}}))}),await Promise.all(d),s.hu.J_(a),await async function(p,g){const y=Le(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>he.forEach(g,T=>he.forEach(T.Is,S=>y.persistence.referenceDelegate.addReference(x,T.targetId,S)).next(()=>he.forEach(T.ds,S=>y.persistence.referenceDelegate.removeReference(x,T.targetId,S)))))}catch(x){if(!Dl(x))throw x;be(Yv,"Failed to update sequence numbers: "+x)}for(const x of g){const T=x.targetId;if(!x.fromCache){const S=y.Fs.get(T),j=S.snapshotVersion,k=S.withLastLimboFreeSnapshotVersion(j);y.Fs=y.Fs.insert(T,k)}}}(s.localStore,c))}async function uP(n,e){const t=Le(n);if(!t.currentUser.isEqual(e)){be(iy,"User change. New user:",e.toKey());const s=await JS(t.localStore,e);t.currentUser=e,function(c,d){c.Vu.forEach(m=>{m.forEach(p=>{p.reject(new _e(oe.CANCELLED,d))})}),c.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await zu(t,s.Bs)}}function dP(n,e){const t=Le(n),s=t.Eu.get(e);if(s&&s.lu)return Qe().add(s.key);{let a=Qe();const c=t.Tu.get(e);if(!c)return a;for(const d of c){const m=t.Pu.get(d);a=a.unionWith(m.view.tu)}return a}}function _A(n){const e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aP.bind(null,e),e.hu.J_=Qk.bind(null,e.eventManager),e.hu.pu=Yk.bind(null,e.eventManager),e}function hP(n){const e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lP.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return gk(this.persistence,new fk,e.initialUser,this.serializer)}Du(e){return new ZS(Kv.Vi,this.serializer)}bu(e){return new Tk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class fP extends sf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){lt(this.persistence.referenceDelegate instanceof tf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ZM(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new ZS(s=>tf.Vi(s,t),this.serializer)}}class sv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>G0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=uP.bind(null,this.syncEngine),await $k(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Kk}()}createDatastore(e){const t=Cf(e.databaseInfo.databaseId),s=function(c){return new jk(c)}(e.databaseInfo);return function(c,d,m,p){return new Ok(c,d,m,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,c,d,m){return new Mk(s,a,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,t=>G0(this.syncEngine,t,0),function(){return U0.C()?new U0:new wk}())}createSyncEngine(e,t){return function(a,c,d,m,p,g,y){const x=new Jk(a,c,d,m,p,g);return y&&(x.fu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const c=Le(a);be(to,"RemoteStore shutting down."),c.Ia.add(5),await Vu(c),c.Ea.shutdown(),c.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}sv.provider={build:()=>new sv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Qs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="FirestoreClient";class mP{constructor(e,t,s,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Sn.UNAUTHENTICATED,this.clientId=kv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{be(ea,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(be(ea,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=ty(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function dg(n,e){n.asyncQueue.verifyOperationInProgress(),be(ea,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async a=>{s.isEqual(a)||(await JS(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>{Qr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{be("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(a=>{Qr("Terminating Firestore due to IndexedDb database deletion failed",a)})}),n._offlineComponents=e}async function Q0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await pP(n);be(ea,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>q0(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,a)=>q0(e.remoteStore,a)),n._onlineComponents=e}async function pP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){be(ea,"Using user provided OfflineComponentProvider");try{await dg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===oe.FAILED_PRECONDITION||a.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Qr("Error using user provided cache. Falling back to memory cache: "+t),await dg(n,new sf)}}else be(ea,"Using default OfflineComponentProvider"),await dg(n,new fP(void 0));return n._offlineComponents}async function bA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(be(ea,"Using user provided OnlineComponentProvider"),await Q0(n,n._uninitializedComponentsProvider._online)):(be(ea,"Using default OnlineComponentProvider"),await Q0(n,new sv))),n._onlineComponents}function gP(n){return bA(n).then(e=>e.syncEngine)}async function EA(n){const e=await bA(n),t=e.eventManager;return t.onListen=eP.bind(null,e.syncEngine),t.onUnlisten=iP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sP.bind(null,e.syncEngine),t}function vP(n,e,t={}){const s=new Hs;return n.asyncQueue.enqueueAndForget(async()=>function(c,d,m,p,g){const y=new xA({next:T=>{y.Ou(),d.enqueueAndForget(()=>uA(c,x));const S=T.docs.has(m);!S&&T.fromCache?g.reject(new _e(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&p&&p.source==="server"?g.reject(new _e(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),x=new dA(Bv(m.path),y,{includeMetadataChanges:!0,ka:!0});return cA(c,x)}(await EA(n),n.asyncQueue,e,t,s)),s.promise}function yP(n,e,t={}){const s=new Hs;return n.asyncQueue.enqueueAndForget(async()=>function(c,d,m,p,g){const y=new xA({next:T=>{y.Ou(),d.enqueueAndForget(()=>uA(c,x)),T.fromCache&&p.source==="server"?g.reject(new _e(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),x=new dA(m,y,{includeMetadataChanges:!0,ka:!0});return cA(c,x)}(await EA(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="firestore.googleapis.com",X0=!0;class W0{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wA,this.ssl=X0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:X0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XM)throw new _e(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TA((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Of{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new SD;switch(s.type){case"firstParty":return new CD(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Y0.get(t);s&&(be("ComponentProvider","Removing Datastore"),Y0.delete(t),s.terminate())}(this),Promise.resolve()}}function _P(n,e,t,s={}){var a;n=yi(n,Of);const c=Cl(e),d=n._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;c&&(lw(`https://${p}`),cw("Firestore",!0)),d.host!==wA&&d.host!==p&&Qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},d),{host:p,ssl:c,emulatorOptions:s});if(!Ya(g,m)&&(n._setSettings(g),s.mockUserToken)){let y,x;if(typeof s.mockUserToken=="string")y=s.mockUserToken,x=Sn.MOCK_USER;else{y=DR(s.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new _e(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Sn(T)}n._authCredentials=new AD(new lS(y,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new oo(this.firestore,e,this._query)}}class Dt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}toJSON(){return{type:Dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ku(t,Dt._jsonSchema))return new Dt(e,s||null,new je(yt.fromString(t.referencePath)))}}Dt._jsonSchemaVersion="firestore/documentReference/1.0",Dt._jsonSchema={type:Bt("string",Dt._jsonSchemaVersion),referencePath:Bt("string")};class Kr extends oo{constructor(e,t,s){super(e,t,Bv(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new je(e))}withConverter(e){return new Kr(this.firestore,e,this._path)}}function Bn(n,e,...t){if(n=xt(n),uS("collection","path",e),n instanceof Of){const s=yt.fromString(e,...t);return u0(s),new Kr(n,null,s)}{if(!(n instanceof Dt||n instanceof Kr))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(yt.fromString(e,...t));return u0(s),new Kr(n.firestore,null,s)}}function rn(n,e,...t){if(n=xt(n),arguments.length===1&&(e=kv.newId()),uS("doc","path",e),n instanceof Of){const s=yt.fromString(e,...t);return c0(s),new Dt(n,null,new je(s))}{if(!(n instanceof Dt||n instanceof Kr))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(yt.fromString(e,...t));return c0(s),new Dt(n.firestore,n instanceof Kr?n.converter:null,new je(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="AsyncQueue";class J0{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new tA(this,"async_queue_retry"),this.oc=()=>{const s=ug();s&&be(Z0,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=ug();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=ug();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Hs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Dl(e))throw e;be(Z0,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,Qs("INTERNAL UNHANDLED ERROR: ",eT(s)),s}).then(s=>(this.nc=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=ey.createAndSchedule(this,e,t,s,c=>this.lc(c));return this.ec.push(a),a}ac(){this.tc&&Me(47125,{hc:eT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function eT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class la extends Of{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new J0,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new J0(e),this._firestoreClient=void 0,await e}}}function xP(n,e){const t=typeof n=="object"?n:fw(),s=typeof n=="string"?n:Xh,a=wv(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=IR("firestore");c&&_P(a,...c)}return a}function Df(n){if(n._terminated)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||bP(n),n._firestoreClient}function bP(n){var e,t,s;const a=n._freezeSettings(),c=function(m,p,g,y){return new $D(m,p,g,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,TA(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new mP(n._authCredentials,n._appCheckCredentials,n._queue,c,n._componentsProvider&&function(m){const p=m?._online.build();return{_offline:m?._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gi(gn.fromBase64String(e))}catch(t){throw new _e(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gi(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ku(e,gi._jsonSchema))return gi.fromBase64String(e.bytes)}}gi._jsonSchemaVersion="firestore/bytes/1.0",gi._jsonSchema={type:Bt("string",gi._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ns._jsonSchemaVersion}}static fromJSON(e){if(ku(e,ns._jsonSchema))return new ns(e.latitude,e.longitude)}}ns._jsonSchemaVersion="firestore/geoPoint/1.0",ns._jsonSchema={type:Bt("string",ns._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:is._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ku(e,is._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new is(e.vectorValues);throw new _e(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}is._jsonSchemaVersion="firestore/vectorValue/1.0",is._jsonSchema={type:Bt("string",is._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=/^__.*__$/;class TP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pu(e,this.data,t,this.fieldTransforms)}}class SA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ec:n})}}class ry{constructor(e,t,s,a,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ry(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return rf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(AA(this.Ec)&&EP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class wP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Cf(e)}Dc(e,t,s,a=!1){return new ry({Ec:e,methodName:t,bc:s,path:fn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bu(n){const e=n._freezeSettings(),t=Cf(n._databaseId);return new wP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ay(n,e,t,s,a,c={}){const d=n.Dc(c.merge||c.mergeFields?2:0,e,t,a);ly("Data must be an object, but it was:",d,s);const m=CA(s,d);let p,g;if(c.merge)p=new Jn(d.fieldMask),g=d.fieldTransforms;else if(c.mergeFields){const y=[];for(const x of c.mergeFields){const T=rv(e,x,t);if(!d.contains(T))throw new _e(oe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);IA(y,T)||y.push(T)}p=new Jn(y),g=d.fieldTransforms.filter(x=>p.covers(x.field))}else p=null,g=d.fieldTransforms;return new TP(new Un(m),p,g)}class kf extends Mf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kf}}class oy extends Mf{_toFieldTransform(e){return new vM(e.path,new bu)}isEqual(e){return e instanceof oy}}function NA(n,e,t,s){const a=n.Dc(1,e,t);ly("Data must be an object, but it was:",a,s);const c=[],d=Un.empty();aa(s,(p,g)=>{const y=cy(e,p,t);g=xt(g);const x=a.gc(y);if(g instanceof kf)c.push(y);else{const T=qu(g,x);T!=null&&(c.push(y),d.set(y,T))}});const m=new Jn(c);return new SA(d,m,a.fieldTransforms)}function jA(n,e,t,s,a,c){const d=n.Dc(1,e,t),m=[rv(e,s,t)],p=[a];if(c.length%2!=0)throw new _e(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)m.push(rv(e,c[T])),p.push(c[T+1]);const g=[],y=Un.empty();for(let T=m.length-1;T>=0;--T)if(!IA(g,m[T])){const S=m[T];let j=p[T];j=xt(j);const k=d.gc(S);if(j instanceof kf)g.push(S);else{const I=qu(j,k);I!=null&&(g.push(S),y.set(S,I))}}const x=new Jn(g);return new SA(y,x,d.fieldTransforms)}function SP(n,e,t,s=!1){return qu(t,n.Dc(s?4:3,e))}function qu(n,e){if(RA(n=xt(n)))return ly("Unsupported field value:",e,n),CA(n,e);if(n instanceof Mf)return function(s,a){if(!AA(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,a){const c=[];let d=0;for(const m of s){let p=qu(m,a.yc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}}(n,e)}return function(s,a){if((s=xt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return mM(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=_t.fromDate(s);return{timestampValue:ef(a.serializer,c)}}if(s instanceof _t){const c=new _t(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ef(a.serializer,c)}}if(s instanceof ns)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof gi)return{bytesValue:HS(a.serializer,s._byteString)};if(s instanceof Dt){const c=a.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw a.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:$v(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof is)return function(d,m){return{mapValue:{fields:{[_S]:{stringValue:xS},[Wh]:{arrayValue:{values:d.toArray().map(g=>{if(typeof g!="number")throw m.wc("VectorValues must only contain numeric values.");return qv(m.serializer,g)})}}}}}}(s,a);throw a.wc(`Unsupported field value: ${_f(s)}`)}(n,e)}function CA(n,e){const t={};return fS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):aa(n,(s,a)=>{const c=qu(a,e.Vc(s));c!=null&&(t[s]=c)}),{mapValue:{fields:t}}}function RA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof ns||n instanceof gi||n instanceof Dt||n instanceof Mf||n instanceof is)}function ly(n,e,t){if(!RA(t)||!dS(t)){const s=_f(t);throw s==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+s)}}function rv(n,e,t){if((e=xt(e))instanceof Uu)return e._internalPath;if(typeof e=="string")return cy(n,e);throw rf("Field path arguments must be of type string or ",n,!1,void 0,t)}const AP=new RegExp("[~\\*/\\[\\]]");function cy(n,e,t){if(e.search(AP)>=0)throw rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Uu(...e.split("."))._internalPath}catch{throw rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rf(n,e,t,s,a){const c=s&&!s.isEmpty(),d=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${s}`),d&&(p+=` in document ${a}`),p+=")"),new _e(oe.INVALID_ARGUMENT,m+n+p)}function IA(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class NP extends OA{data(){return super.data()}}function Pf(n,e){return typeof e=="string"?cy(n,e):e instanceof Uu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uy{}class DA extends uy{}function af(n,e,...t){let s=[];e instanceof uy&&s.push(e),s=s.concat(t),function(c){const d=c.filter(p=>p instanceof dy).length,m=c.filter(p=>p instanceof Lf).length;if(d>1||d>0&&m>0)throw new _e(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)n=a._apply(n);return n}class Lf extends DA{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Lf(e,t,s)}_apply(e){const t=this._parse(e);return MA(e._query,t),new oo(e.firestore,e.converter,Qg(e._query,t))}_parse(e){const t=Bu(e.firestore);return function(c,d,m,p,g,y,x){let T;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new _e(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){nT(x,y);const j=[];for(const k of x)j.push(tT(p,c,k));T={arrayValue:{values:j}}}else T=tT(p,c,x)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||nT(x,y),T=SP(m,d,x,y==="in"||y==="not-in");return Ut.create(g,y,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function av(n,e,t){const s=e,a=Pf("where",n);return Lf._create(a,s,t)}class dy extends uy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dy(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Ii.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,c){let d=a;const m=c.getFlattenedFilters();for(const p of m)MA(d,p),d=Qg(d,p)}(e._query,t),new oo(e.firestore,e.converter,Qg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hy extends DA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hy(e,t)}_apply(e){const t=function(a,c,d){if(a.startAt!==null)throw new _e(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new _e(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xu(c,d)}(e._query,this._field,this._direction);return new oo(e.firestore,e.converter,function(a,c){const d=a.explicitOrderBy.concat([c]);return new Ml(a.path,a.collectionGroup,d,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function fy(n,e="asc"){const t=e,s=Pf("orderBy",n);return hy._create(s,t)}function tT(n,e,t){if(typeof(t=xt(t))=="string"){if(t==="")throw new _e(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jS(e)&&t.indexOf("/")!==-1)throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(yt.fromString(t));if(!je.isDocumentKey(s))throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return y0(n,new je(s))}if(t instanceof Dt)return y0(n,t._key);throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_f(t)}.`)}function nT(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MA(n,e){const t=function(a,c){for(const d of a)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new _e(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class CP{convertValue(e,t="none"){switch(Zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return aa(e,(a,c)=>{s[a]=this.convertValue(c,t)}),s}convertVectorValue(e){var t,s,a;const c=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[Wh].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(d=>Ot(d.doubleValue));return new is(c)}convertGeoPoint(e){return new ns(Ot(e.latitude),Ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Ef(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=Xr(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=yt.fromString(e);lt(XS(s),9688,{name:e});const a=new yu(s.get(1),s.get(3)),c=new je(s.popFirst(5));return a.isEqual(t)||Qs(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ka extends OA{constructor(e,t,s,a,c,d){super(e,t,s,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Pf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ka._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ka._jsonSchema={type:Bt("string",Ka._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Vh extends Ka{data(e={}){return super.data(e)}}class pl{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new eu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Vh(this._firestore,this._userDataWriter,s.key,s,new eu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map(m=>{const p=new Vh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new eu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const p=new Vh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new eu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return m.type!==0&&(g=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),y=d.indexOf(m.doc.key)),{type:RP(m.type),doc:p,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach(c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(n){n=yi(n,Dt);const e=yi(n.firestore,la);return vP(Df(e),n._key).then(t=>IP(e,n,t))}pl._jsonSchemaVersion="firestore/querySnapshot/1.0",pl._jsonSchema={type:Bt("string",pl._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class kA extends CP{constructor(e){super(),this.firestore=e}convertBytes(e){return new gi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,t)}}function Ws(n){n=yi(n,oo);const e=yi(n.firestore,la),t=Df(e),s=new kA(e);return jP(n._query),yP(t,n._query).then(a=>new pl(e,s,n,a))}function ul(n,e,t){n=yi(n,Dt);const s=yi(n.firestore,la),a=my(n.converter,e,t);return Fu(s,[ay(Bu(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Mn.none())])}function py(n,e,t,...s){n=yi(n,Dt);const a=yi(n.firestore,la),c=Bu(a);let d;return d=typeof(e=xt(e))=="string"||e instanceof Uu?jA(c,"updateDoc",n._key,e,t,s):NA(c,"updateDoc",n._key,e),Fu(a,[d.toMutation(n._key,Mn.exists(!0))])}function PA(n){return Fu(yi(n.firestore,la),[new Nf(n._key,Mn.none())])}function lu(n,e){const t=yi(n.firestore,la),s=rn(n),a=my(n.converter,e);return Fu(t,[ay(Bu(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,Mn.exists(!1))]).then(()=>s)}function Fu(n,e){return function(s,a){const c=new Hs;return s.asyncQueue.enqueueAndForget(async()=>rP(await gP(s),a,c)),c.promise}(Df(n),e)}function IP(n,e,t){const s=t.docs.get(e._key),a=new kA(n);return new Ka(n,a,e._key,s,new eu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bu(e)}set(e,t,s){this._verifyNotCommitted();const a=hg(e,this._firestore),c=my(a.converter,t,s),d=ay(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,s);return this._mutations.push(d.toMutation(a._key,Mn.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const c=hg(e,this._firestore);let d;return d=typeof(t=xt(t))=="string"||t instanceof Uu?jA(this._dataReader,"WriteBatch.update",c._key,t,s,a):NA(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,Mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hg(e,this._firestore);return this._mutations=this._mutations.concat(new Nf(t._key,Mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hg(n,e){if((n=xt(n)).firestore!==e)throw new _e(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function sn(){return new oy("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(n){return Df(n=yi(n,la)),new OP(n,e=>Fu(n,e))}(function(e,t=!0){(function(a){Il=a})(Rl),vl(new Xa("firestore",(s,{instanceIdentifier:a,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new la(new ND(s.getProvider("auth-internal")),new RD(d,s.getProvider("app-check-internal")),function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new _e(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(g.options.projectId,y)}(d,a),d);return c=Object.assign({useFetchStreams:t},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),$r(s0,r0,e),$r(s0,r0,"esm2017")})();const DP={apiKey:"AIzaSyDTTjgouDv3phem-_Ca0jUm9sk6zko7rFQ",authDomain:"ai-learning-uniba.firebaseapp.com",projectId:"ai-learning-uniba",messagingSenderId:"986137106908",appId:"1:986137106908:web:007191ea75c554bc129719",measurementId:"G-HW8DWLF88D"},LA=hw(DP),pn=TD(LA);await dO(pn,Gw);const tt=xP(LA);async function MP({email:n,password:e,role:t,name:s,surname:a}){const c=await aO(pn,n,e),d=[s,a].filter(Boolean).join(" ").trim();return d&&await Bw(c.user,{displayName:d}),await ul(rn(tt,"users",c.user.uid),{uid:c.user.uid,email:n,role:t,name:s||null,surname:a||null,displayName:d||null,createdAt:sn(),updatedAt:sn()},{merge:!0}),c.user}function kP(n,e){return oO(pn,n,e)}function PP(){return Fw(pn)}function LP(n){return Du(pn,async e=>{if(!e){n({user:null,profile:null});return}const t=await Xs(rn(tt,"users",e.uid));n({user:e,profile:t.exists()?t.data():null})})}const fg={student:"/studente",teacher:"/docente"},sT=["studente","docente"];function VP(){const[n,e]=b.useState(sT[0]),[t,s]=b.useState(""),[a,c]=b.useState(""),[d,m]=b.useState(!1),[p,g]=b.useState(""),[y,x]=b.useState(!1),T=Yt(),S=Oi();b.useEffect(()=>{const $=localStorage.getItem("login.roleUi");$&&sT.includes($)&&e($)},[]);const j=$=>{e($),localStorage.setItem("login.roleUi",$)},k=async $=>{$.preventDefault(),g(""),x(!0);try{const{user:B}=await kP(t,a),q=rn(tt,"users",B.uid),H=await Xs(q),K=H.exists()?H.data():null,M=fg[K?.role]??(n==="docente"?fg.teacher:fg.student);T(M,{replace:!0})}catch(B){let q="Email o password non validi.";B?.code==="auth/too-many-requests"&&(q="Troppi tentativi. Riprova pi tardi."),B?.code==="auth/user-disabled"&&(q="Utente disabilitato."),g(q)}finally{x(!1)}},I=S.state?.justRegistered,Y=S.state?.email;return l.jsx("div",{className:"login-v2",children:l.jsxs("div",{className:"login-card glass",children:[l.jsxs("aside",{className:"panel",children:[l.jsxs("div",{className:"brand",children:[l.jsx("div",{className:"logo",children:"AI"}),l.jsx("h1",{children:"AI Learning"}),l.jsx("p",{children:"Una piattaforma e-learning intelligente, con chat AI sui contenuti caricati."})]}),l.jsxs("ul",{className:"bullets",children:[l.jsx("li",{children:"Accesso rapido per Studenti e Docenti"}),l.jsx("li",{children:"UI in glassmorphism, responsive"}),l.jsx("li",{children:"Integrazione Firebase attiva"})]})]}),l.jsxs("section",{className:"form",children:[l.jsx("h2",{children:"Accedi al tuo spazio"}),I&&l.jsxs("p",{className:"success",children:["Account creato per ",l.jsx("strong",{children:Y}),". Ora effettua laccesso."]}),l.jsxs("div",{className:"segmented",role:"tablist","aria-label":"Seleziona ruolo (solo UI)",children:[l.jsx("button",{type:"button",className:n==="studente"?"active":"",onClick:()=>j("studente"),"aria-selected":n==="studente",children:"Studente"}),l.jsx("button",{type:"button",className:n==="docente"?"active":"",onClick:()=>j("docente"),"aria-selected":n==="docente",children:"Docente"})]}),l.jsxs("form",{onSubmit:k,noValidate:!0,children:[l.jsxs("label",{className:"field",children:[l.jsx("span",{children:"Email istituzionale"}),l.jsx("input",{type:"email",placeholder:"nome.cognome@esempio.it",value:t,onChange:$=>s($.target.value),autoComplete:"username",required:!0})]}),l.jsxs("label",{className:"field",children:[l.jsx("span",{children:"Password"}),l.jsxs("div",{className:"pwd-wrap",children:[l.jsx("input",{type:d?"text":"password",placeholder:"La tua password",value:a,onChange:$=>c($.target.value),autoComplete:"current-password",required:!0}),l.jsx("button",{type:"button",className:"toggle",onClick:()=>m($=>!$),"aria-label":d?"Nascondi password":"Mostra password",children:d?"Nascondi":"Mostra"})]})]}),p&&l.jsx("p",{className:"error",children:p}),l.jsxs("div",{className:"row small",children:[l.jsxs("label",{className:"check",children:[l.jsx("input",{type:"checkbox"})," Remember"]}),l.jsx("a",{className:"link",href:"#",children:"Forgot password?"})]}),l.jsx("button",{className:"primary",type:"submit",disabled:y,children:y?"Accesso in corso...":"Login"})]}),l.jsxs("p",{className:"footer",children:["Non hai un account? ",l.jsx(Re,{to:"/register",children:"Crea un account"})]})]})]})})}function zP(){const n=Yt(),[e,t]=b.useState("student"),[s,a]=b.useState({name:"",surname:"",email:"",password:"",confirm:"",terms:!1}),[c,d]=b.useState({}),[m,p]=b.useState(!1),[g,y]=b.useState(!1),x=j=>{const{name:k,value:I,type:Y,checked:$}=j.target;a(B=>({...B,[k]:Y==="checkbox"?$:I}))},T=()=>{const j={};return s.name.trim()||(j.name="Inserisci il nome."),s.surname.trim()||(j.surname="Inserisci il cognome."),s.email.trim()?/^\S+@\S+\.\S+$/.test(s.email)||(j.email="Email non valida."):j.email="Inserisci lemail.",s.password?s.password.length<8?j.password="Minimo 8 caratteri.":(!/[A-Z]/.test(s.password)||!/[0-9]/.test(s.password))&&(j.password="Serve almeno 1 maiuscola e 1 numero."):j.password="Inserisci la password.",s.confirm?s.confirm!==s.password&&(j.confirm="Le password non coincidono."):j.confirm="Conferma la password.",s.terms||(j.terms="Devi accettare i termini."),d(j),Object.keys(j).length===0},S=async j=>{if(j.preventDefault(),!!T()){p(!0),d({});try{await MP({email:s.email,password:s.password,role:e,name:s.name,surname:s.surname}),n(e==="teacher"?"/docente":"/studente",{replace:!0})}catch(k){console.error("[REGISTER]",k.code,k.message,k.customData);let I="Impossibile completare la registrazione. Riprova.";k?.code==="auth/email-already-in-use"&&(I="Email gi registrata."),k?.code==="auth/weak-password"&&(I="Password troppo debole."),k?.code==="permission-denied"&&(I="Permessi insufficienti su Firestore (regole?)."),d({general:I})}finally{p(!1)}}};return l.jsx("div",{className:"register-v2",children:l.jsxs("div",{className:"register-card glass",children:[l.jsxs("header",{className:"reg-header",children:[l.jsx("div",{className:"logo",children:"AI"}),l.jsxs("div",{children:[l.jsx("h1",{children:"Crea il tuo account"}),l.jsx("p",{children:"Iscriviti come Studente o Docente e inizia subito."})]})]}),l.jsxs("div",{className:"segmented",role:"tablist","aria-label":"Seleziona ruolo",children:[l.jsx("button",{type:"button",className:e==="student"?"active":"",onClick:()=>t("student"),"aria-selected":e==="student",children:"Studente"}),l.jsx("button",{type:"button",className:e==="teacher"?"active":"",onClick:()=>t("teacher"),"aria-selected":e==="teacher",children:"Docente"})]}),l.jsxs("form",{className:"reg-form",onSubmit:S,noValidate:!0,children:[c.general&&l.jsx("div",{className:"alert",children:c.general}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("label",{className:"field",children:[l.jsx("span",{children:"Nome"}),l.jsx("input",{id:"name",name:"name",type:"text",placeholder:"Es. Mario",value:s.name,onChange:x,autoComplete:"given-name"}),c.name&&l.jsx("span",{className:"field-error",children:c.name})]}),l.jsxs("label",{className:"field",children:[l.jsx("span",{children:"Cognome"}),l.jsx("input",{id:"surname",name:"surname",type:"text",placeholder:"Es. Rossi",value:s.surname,onChange:x,autoComplete:"family-name"}),c.surname&&l.jsx("span",{className:"field-error",children:c.surname})]})]}),l.jsxs("label",{className:"field",children:[l.jsx("span",{children:"Email istituzionale"}),l.jsx("input",{id:"email",name:"email",type:"email",placeholder:"nome.cognome@esempio.it",value:s.email,onChange:x,autoComplete:"email"}),c.email&&l.jsx("span",{className:"field-error",children:c.email})]}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("label",{className:"field",children:[l.jsx("span",{children:"Password"}),l.jsxs("div",{className:"pwd-wrap",children:[l.jsx("input",{id:"password",name:"password",type:g?"text":"password",placeholder:"Min 8 caratteri, 1 maiuscola e 1 numero",value:s.password,onChange:x,autoComplete:"new-password"}),l.jsx("button",{type:"button",className:"toggle",onClick:()=>y(j=>!j),"aria-label":g?"Nascondi password":"Mostra password",children:g?"Nascondi":"Mostra"})]}),c.password&&l.jsx("span",{className:"field-error",children:c.password})]}),l.jsxs("label",{className:"field",children:[l.jsx("span",{children:"Conferma password"}),l.jsx("input",{id:"confirm",name:"confirm",type:g?"text":"password",placeholder:"Ripeti la password",value:s.confirm,onChange:x,autoComplete:"new-password"}),c.confirm&&l.jsx("span",{className:"field-error",children:c.confirm})]})]}),l.jsxs("label",{className:"check terms",children:[l.jsx("input",{type:"checkbox",name:"terms",checked:s.terms,onChange:x}),l.jsx("span",{children:"Accetto i Termini e lInformativa Privacy"})]}),c.terms&&l.jsx("span",{className:"field-error",children:c.terms}),l.jsx("button",{className:"primary",type:"submit",disabled:m,children:m?"Creazione in corso...":"Crea account"}),l.jsxs("p",{className:"footer",children:["Hai gi un account? ",l.jsx(Re,{to:"/login",children:"Accedi"})]}),l.jsx("input",{type:"hidden",name:"role",value:e})]})]})})}function UP(){const n=Yt();return b.useEffect(()=>{(async()=>{try{await Fw(pn)}catch(e){console.error("logout error:",e)}finally{n("/login",{replace:!0})}})()},[n]),l.jsx("div",{className:"py-5 text-white",children:"Uscita in corso"})}function BP(){return b.useEffect(()=>{async function n(){const e=pn.currentUser?.uid;if(!e){console.log(" Non sei loggato. Prima effettua il login!");return}try{await ul(rn(tt,"users",e),{check:"ok",t:Date.now()},{merge:!0});const t=await Xs(rn(tt,"users",e));console.log(" Lettura del proprio profilo riuscita:",t.data())}catch(t){console.error(" Errore scrivendo/leggendo il proprio profilo:",t)}try{const t=await Xs(rn(tt,"users","someOtherUid"));console.log("Altro utente (non dovrebbe riuscire):",t.exists())}catch(t){console.error(" Errore atteso leggendo altro utente:",t.code)}}n()},[]),l.jsxs("main",{style:{padding:"2rem"},children:[l.jsx("h1",{children:"Test Firestore"}),l.jsx("p",{children:"Guarda la console del browser (DevTools  Console) per i risultati."})]})}var mg={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var rT;function qP(){return rT||(rT=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var c="",d=0;d<arguments.length;d++){var m=arguments[d];m&&(c=a(c,s(m)))}return c}function s(c){if(typeof c=="string"||typeof c=="number")return c;if(typeof c!="object")return"";if(Array.isArray(c))return t.apply(null,c);if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]"))return c.toString();var d="";for(var m in c)e.call(c,m)&&c[m]&&(d=a(d,m));return d}function a(c,d){return d?c?c+" "+d:c+d:c}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(mg)),mg.exports}var FP=qP();const ye=Nu(FP),HP=["xxl","xl","lg","md","sm","xs"],$P="xs",Hu=b.createContext({prefixes:{},breakpoints:HP,minBreakpoint:$P}),{Consumer:E3,Provider:T3}=Hu;function Ee(n,e){const{prefixes:t}=b.useContext(Hu);return n||t[e]||e}function VA(){const{breakpoints:n}=b.useContext(Hu);return n}function zA(){const{minBreakpoint:n}=b.useContext(Hu);return n}function UA(){const{dir:n}=b.useContext(Hu);return n==="rtl"}const st=b.forwardRef(({bsPrefix:n,fluid:e=!1,as:t="div",className:s,...a},c)=>{const d=Ee(n,"container"),m=typeof e=="string"?`-${e}`:"-fluid";return l.jsx(t,{ref:c,...a,className:ye(s,e?`${d}${m}`:d)})});st.displayName="Container";function ov(){return ov=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ov.apply(null,arguments)}function BA(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)!==-1)continue;t[s]=n[s]}return t}function aT(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function GP(n){var e=KP(n,"string");return typeof e=="symbol"?e:String(e)}function KP(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function QP(n,e,t){var s=b.useRef(n!==void 0),a=b.useState(e),c=a[0],d=a[1],m=n!==void 0,p=s.current;return s.current=m,!m&&p&&c!==e&&d(e),[m?n:c,b.useCallback(function(g){for(var y=arguments.length,x=new Array(y>1?y-1:0),T=1;T<y;T++)x[T-1]=arguments[T];t&&t.apply(void 0,[g].concat(x)),d(g)},[t])]}function lo(n,e){return Object.keys(e).reduce(function(t,s){var a,c=t,d=c[aT(s)],m=c[s],p=BA(c,[aT(s),s].map(GP)),g=e[s],y=QP(m,d,n[g]),x=y[0],T=y[1];return ov({},p,(a={},a[s]=x,a[g]=T,a))},n)}function lv(n,e){return lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},lv(n,e)}function YP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,lv(n,e)}var XP=Function.prototype.bind.call(Function.prototype.call,[].slice);function zs(n,e){return XP(n.querySelectorAll(e))}function qA(){const[,n]=b.useReducer(e=>e+1,0);return n}const oT=n=>!n||typeof n=="function"?n:e=>{n.current=e};function WP(n,e){const t=oT(n),s=oT(e);return a=>{t&&t(a),s&&s(a)}}function Vf(n,e){return b.useMemo(()=>WP(n,e),[n,e])}const zf=b.createContext(null);zf.displayName="NavContext";const ls=b.createContext(null),ta=(n,e=null)=>n!=null?String(n):e||null,Pl=b.createContext(null),ZP="data-rr-ui-",JP="rrUi";function Ll(n){return`${ZP}${n}`}function eL(n){return`${JP}${n}`}function tL(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n},[n]),e}function jn(n){const e=tL(n);return b.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const nL=["as","disabled"];function iL(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function sL(n){return!n||n.trim()==="#"}function gy({tagName:n,disabled:e,href:t,target:s,rel:a,role:c,onClick:d,tabIndex:m=0,type:p}){n||(t!=null||s!=null||a!=null?n="a":n="button");const g={tagName:n};if(n==="button")return[{type:p||"button",disabled:e},g];const y=T=>{if((e||n==="a"&&sL(t))&&T.preventDefault(),e){T.stopPropagation();return}d?.(T)},x=T=>{T.key===" "&&(T.preventDefault(),y(T))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:c??"button",disabled:void 0,tabIndex:e?void 0:m,href:t,target:n==="a"?s:void 0,"aria-disabled":e||void 0,rel:n==="a"?a:void 0,onClick:y,onKeyDown:x},g]}const vy=b.forwardRef((n,e)=>{let{as:t,disabled:s}=n,a=iL(n,nL);const[c,{tagName:d}]=gy(Object.assign({tagName:t,disabled:s},a));return l.jsx(d,Object.assign({},a,c,{ref:e}))});vy.displayName="Button";const rL=["as","active","eventKey"];function aL(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function yy({key:n,onClick:e,active:t,id:s,role:a,disabled:c}){const d=b.useContext(ls),m=b.useContext(zf),p=b.useContext(Pl);let g=t;const y={role:a};if(m){!a&&m.role==="tablist"&&(y.role="tab");const x=m.getControllerId(n??null),T=m.getControlledId(n??null);y[Ll("event-key")]=n,y.id=x||s,g=t==null&&n!=null?m.activeKey===n:t,(g||!(p!=null&&p.unmountOnExit)&&!(p!=null&&p.mountOnEnter))&&(y["aria-controls"]=T)}return y.role==="tab"&&(y["aria-selected"]=g,g||(y.tabIndex=-1),c&&(y.tabIndex=-1,y["aria-disabled"]=!0)),y.onClick=jn(x=>{c||(e?.(x),n!=null&&d&&!x.isPropagationStopped()&&d(n,x))}),[y,{isActive:g}]}const FA=b.forwardRef((n,e)=>{let{as:t=vy,active:s,eventKey:a}=n,c=aL(n,rL);const[d,m]=yy(Object.assign({key:ta(a,c.href),active:s},c));return d[Ll("active")]=m.isActive,l.jsx(t,Object.assign({},c,d,{ref:e}))});FA.displayName="NavItem";const oL=["as","onSelect","activeKey","role","onKeyDown"];function lL(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}const lT=()=>{},cT=Ll("event-key"),HA=b.forwardRef((n,e)=>{let{as:t="div",onSelect:s,activeKey:a,role:c,onKeyDown:d}=n,m=lL(n,oL);const p=qA(),g=b.useRef(!1),y=b.useContext(ls),x=b.useContext(Pl);let T,S;x&&(c=c||"tablist",a=x.activeKey,T=x.getControlledId,S=x.getControllerId);const j=b.useRef(null),k=B=>{const q=j.current;if(!q)return null;const H=zs(q,`[${cT}]:not([aria-disabled=true])`),K=q.querySelector("[aria-selected=true]");if(!K||K!==document.activeElement)return null;const M=H.indexOf(K);if(M===-1)return null;let N=M+B;return N>=H.length&&(N=0),N<0&&(N=H.length-1),H[N]},I=(B,q)=>{B!=null&&(s?.(B,q),y?.(B,q))},Y=B=>{if(d?.(B),!x)return;let q;switch(B.key){case"ArrowLeft":case"ArrowUp":q=k(-1);break;case"ArrowRight":case"ArrowDown":q=k(1);break;default:return}q&&(B.preventDefault(),I(q.dataset[eL("EventKey")]||null,B),g.current=!0,p())};b.useEffect(()=>{if(j.current&&g.current){const B=j.current.querySelector(`[${cT}][aria-selected=true]`);B?.focus()}g.current=!1});const $=Vf(e,j);return l.jsx(ls.Provider,{value:I,children:l.jsx(zf.Provider,{value:{role:c,activeKey:ta(a),getControlledId:T||lT,getControllerId:S||lT},children:l.jsx(t,Object.assign({},m,{onKeyDown:Y,ref:$,role:c}))})})});HA.displayName="Nav";const $A=Object.assign(HA,{Item:FA}),co=b.createContext(null);co.displayName="NavbarContext";const _y=b.createContext(null);_y.displayName="CardHeaderContext";const xy=b.forwardRef(({className:n,bsPrefix:e,as:t="div",...s},a)=>(e=Ee(e,"nav-item"),l.jsx(t,{ref:a,className:ye(n,e),...s})));xy.displayName="NavItem";function cL(){return b.useState(null)}function uL(n,e,t,s=!1){const a=jn(t);b.useEffect(()=>{const c=typeof n=="function"?n():n;return c.addEventListener(e,a,s),()=>c.removeEventListener(e,a,s)},[n])}function GA(){const n=b.useRef(!0),e=b.useRef(()=>n.current);return b.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function KA(n){const e=b.useRef(null);return b.useEffect(()=>{e.current=n}),e.current}const dL=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",hL=typeof document<"u",uT=hL||dL?b.useLayoutEffect:b.useEffect,fL=["onKeyDown"];function mL(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function pL(n){return!n||n.trim()==="#"}const Uf=b.forwardRef((n,e)=>{let{onKeyDown:t}=n,s=mL(n,fL);const[a]=gy(Object.assign({tagName:"a"},s)),c=jn(d=>{a.onKeyDown(d),t?.(d)});return pL(s.href)||s.role==="button"?l.jsx("a",Object.assign({ref:e},s,a,{onKeyDown:c})):l.jsx("a",Object.assign({ref:e},s,{onKeyDown:t}))});Uf.displayName="Anchor";const Bf=b.forwardRef(({bsPrefix:n,className:e,as:t=Uf,active:s,eventKey:a,disabled:c=!1,...d},m)=>{n=Ee(n,"nav-link");const[p,g]=yy({key:ta(a,d.href),active:s,disabled:c,...d});return l.jsx(t,{...d,...p,ref:m,disabled:c,className:ye(e,n,c&&"disabled",g.isActive&&"active")})});Bf.displayName="NavLink";const QA=b.forwardRef((n,e)=>{const{as:t="div",bsPrefix:s,variant:a,fill:c=!1,justify:d=!1,navbar:m,navbarScroll:p,className:g,activeKey:y,...x}=lo(n,{activeKey:"onSelect"}),T=Ee(s,"nav");let S,j,k=!1;const I=b.useContext(co),Y=b.useContext(_y);return I?(S=I.bsPrefix,k=m??!0):Y&&({cardHeaderBsPrefix:j}=Y),l.jsx($A,{as:t,ref:e,activeKey:y,className:ye(g,{[T]:!k,[`${S}-nav`]:k,[`${S}-nav-scroll`]:k&&p,[`${j}-${a}`]:!!j,[`${T}-${a}`]:!!a,[`${T}-fill`]:c,[`${T}-justified`]:d}),...x})});QA.displayName="Nav";const Xi=Object.assign(QA,{Item:xy,Link:Bf}),YA=b.forwardRef(({bsPrefix:n,className:e,as:t,...s},a)=>{n=Ee(n,"navbar-brand");const c=t||(s.href?"a":"span");return l.jsx(c,{...s,ref:a,className:ye(e,n)})});YA.displayName="NavbarBrand";function $u(n){return n&&n.ownerDocument||document}function gL(n){var e=$u(n);return e&&e.defaultView||window}function vL(n,e){return gL(n).getComputedStyle(n,e)}var yL=/([A-Z])/g;function _L(n){return n.replace(yL,"-$1").toLowerCase()}var xL=/^ms-/;function Sh(n){return _L(n).replace(xL,"-ms-")}var bL=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function EL(n){return!!(n&&bL.test(n))}function $s(n,e){var t="",s="";if(typeof e=="string")return n.style.getPropertyValue(Sh(e))||vL(n).getPropertyValue(Sh(e));Object.keys(e).forEach(function(a){var c=e[a];!c&&c!==0?n.style.removeProperty(Sh(a)):EL(a)?s+=a+"("+c+") ":t+=Sh(a)+": "+c+";"}),s&&(t+="transform: "+s+";"),n.style.cssText+=";"+t}var pg={exports:{}},gg,dT;function TL(){if(dT)return gg;dT=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return gg=n,gg}var vg,hT;function wL(){if(hT)return vg;hT=1;var n=TL();function e(){}function t(){}return t.resetWarningCache=e,vg=function(){function s(d,m,p,g,y,x){if(x!==n){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}s.isRequired=s;function a(){return s}var c={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return c.PropTypes=c,c},vg}var fT;function SL(){return fT||(fT=1,pg.exports=wL()()),pg.exports}var AL=SL();const An=Nu(AL),mT={disabled:!1},XA=mn.createContext(null);var NL=function(e){return e.scrollTop},tu="unmounted",Dr="exited",ji="entering",Us="entered",wu="exiting",nr=function(n){YP(e,n);function e(s,a){var c;c=n.call(this,s,a)||this;var d=a,m=d&&!d.isMounting?s.enter:s.appear,p;return c.appearStatus=null,s.in?m?(p=Dr,c.appearStatus=ji):p=Us:s.unmountOnExit||s.mountOnEnter?p=tu:p=Dr,c.state={status:p},c.nextCallback=null,c}e.getDerivedStateFromProps=function(a,c){var d=a.in;return d&&c.status===tu?{status:Dr}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(a){var c=null;if(a!==this.props){var d=this.state.status;this.props.in?d!==ji&&d!==Us&&(c=ji):(d===ji||d===Us)&&(c=wu)}this.updateStatus(!1,c)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var a=this.props.timeout,c,d,m;return c=d=m=a,a!=null&&typeof a!="number"&&(c=a.exit,d=a.enter,m=a.appear!==void 0?a.appear:d),{exit:c,enter:d,appear:m}},t.updateStatus=function(a,c){if(a===void 0&&(a=!1),c!==null)if(this.cancelNextCallback(),c===ji){if(this.props.unmountOnExit||this.props.mountOnEnter){var d=this.props.nodeRef?this.props.nodeRef.current:ll.findDOMNode(this);d&&NL(d)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Dr&&this.setState({status:tu})},t.performEnter=function(a){var c=this,d=this.props.enter,m=this.context?this.context.isMounting:a,p=this.props.nodeRef?[m]:[ll.findDOMNode(this),m],g=p[0],y=p[1],x=this.getTimeouts(),T=m?x.appear:x.enter;if(!a&&!d||mT.disabled){this.safeSetState({status:Us},function(){c.props.onEntered(g)});return}this.props.onEnter(g,y),this.safeSetState({status:ji},function(){c.props.onEntering(g,y),c.onTransitionEnd(T,function(){c.safeSetState({status:Us},function(){c.props.onEntered(g,y)})})})},t.performExit=function(){var a=this,c=this.props.exit,d=this.getTimeouts(),m=this.props.nodeRef?void 0:ll.findDOMNode(this);if(!c||mT.disabled){this.safeSetState({status:Dr},function(){a.props.onExited(m)});return}this.props.onExit(m),this.safeSetState({status:wu},function(){a.props.onExiting(m),a.onTransitionEnd(d.exit,function(){a.safeSetState({status:Dr},function(){a.props.onExited(m)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(a,c){c=this.setNextCallback(c),this.setState(a,c)},t.setNextCallback=function(a){var c=this,d=!0;return this.nextCallback=function(m){d&&(d=!1,c.nextCallback=null,a(m))},this.nextCallback.cancel=function(){d=!1},this.nextCallback},t.onTransitionEnd=function(a,c){this.setNextCallback(c);var d=this.props.nodeRef?this.props.nodeRef.current:ll.findDOMNode(this),m=a==null&&!this.props.addEndListener;if(!d||m){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var p=this.props.nodeRef?[this.nextCallback]:[d,this.nextCallback],g=p[0],y=p[1];this.props.addEndListener(g,y)}a!=null&&setTimeout(this.nextCallback,a)},t.render=function(){var a=this.state.status;if(a===tu)return null;var c=this.props,d=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var m=BA(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return mn.createElement(XA.Provider,{value:null},typeof d=="function"?d(a,m):mn.cloneElement(mn.Children.only(d),m))},e}(mn.Component);nr.contextType=XA;nr.propTypes={};function tl(){}nr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:tl,onEntering:tl,onEntered:tl,onExit:tl,onExiting:tl,onExited:tl};nr.UNMOUNTED=tu;nr.EXITED=Dr;nr.ENTERING=ji;nr.ENTERED=Us;nr.EXITING=wu;function jL(n){return n.code==="Escape"||n.keyCode===27}function CL(){const n=b.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}function Vl(n){if(!n||typeof n=="function")return null;const{major:e}=CL();return e>=19?n.props.ref:n.ref}const zl=!!(typeof window<"u"&&window.document&&window.document.createElement);var cv=!1,uv=!1;try{var yg={get passive(){return cv=!0},get once(){return uv=cv=!0}};zl&&(window.addEventListener("test",yg,yg),window.removeEventListener("test",yg,!0))}catch{}function by(n,e,t,s){if(s&&typeof s!="boolean"&&!uv){var a=s.once,c=s.capture,d=t;!uv&&a&&(d=t.__once||function m(p){this.removeEventListener(e,m,c),t.call(this,p)},t.__once=d),n.addEventListener(e,d,cv?s:c)}n.addEventListener(e,t,s)}function dv(n,e,t,s){var a=s&&typeof s!="boolean"?s.capture:s;n.removeEventListener(e,t,a),t.__once&&n.removeEventListener(e,t.__once,a)}function Ur(n,e,t,s){return by(n,e,t,s),function(){dv(n,e,t,s)}}function RL(n,e,t,s){if(s===void 0&&(s=!0),n){var a=document.createEvent("HTMLEvents");a.initEvent(e,t,s),n.dispatchEvent(a)}}function IL(n){var e=$s(n,"transitionDuration")||"",t=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*t}function OL(n,e,t){t===void 0&&(t=5);var s=!1,a=setTimeout(function(){s||RL(n,"transitionend",!0)},e+t),c=Ur(n,"transitionend",function(){s=!0},{once:!0});return function(){clearTimeout(a),c()}}function WA(n,e,t,s){t==null&&(t=IL(n)||0);var a=OL(n,t,s),c=Ur(n,"transitionend",e);return function(){a(),c()}}function pT(n,e){const t=$s(n,e)||"",s=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*s}function Ey(n,e){const t=pT(n,"transitionDuration"),s=pT(n,"transitionDelay"),a=WA(n,c=>{c.target===n&&(a(),e(c))},t+s)}function Kc(...n){return n.filter(e=>e!=null).reduce((e,t)=>{if(typeof t!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?t:function(...a){e.apply(this,a),t.apply(this,a)}},null)}function ZA(n){n.offsetHeight}const gT=n=>!n||typeof n=="function"?n:e=>{n.current=e};function DL(n,e){const t=gT(n),s=gT(e);return a=>{t&&t(a),s&&s(a)}}function qf(n,e){return b.useMemo(()=>DL(n,e),[n,e])}function ML(n){return n&&"setState"in n?ll.findDOMNode(n):n??null}const Ff=mn.forwardRef(({onEnter:n,onEntering:e,onEntered:t,onExit:s,onExiting:a,onExited:c,addEndListener:d,children:m,childRef:p,...g},y)=>{const x=b.useRef(null),T=qf(x,p),S=K=>{T(ML(K))},j=K=>M=>{K&&x.current&&K(x.current,M)},k=b.useCallback(j(n),[n]),I=b.useCallback(j(e),[e]),Y=b.useCallback(j(t),[t]),$=b.useCallback(j(s),[s]),B=b.useCallback(j(a),[a]),q=b.useCallback(j(c),[c]),H=b.useCallback(j(d),[d]);return l.jsx(nr,{ref:y,...g,onEnter:k,onEntered:Y,onEntering:I,onExit:$,onExited:q,onExiting:B,addEndListener:H,nodeRef:x,children:typeof m=="function"?(K,M)=>m(K,{...M,ref:S}):mn.cloneElement(m,{ref:S})})});Ff.displayName="TransitionWrapper";const kL={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function PL(n,e){const t=`offset${n[0].toUpperCase()}${n.slice(1)}`,s=e[t],a=kL[n];return s+parseInt($s(e,a[0]),10)+parseInt($s(e,a[1]),10)}const LL={[Dr]:"collapse",[wu]:"collapsing",[ji]:"collapsing",[Us]:"collapse show"},Ty=mn.forwardRef(({onEnter:n,onEntering:e,onEntered:t,onExit:s,onExiting:a,className:c,children:d,dimension:m="height",in:p=!1,timeout:g=300,mountOnEnter:y=!1,unmountOnExit:x=!1,appear:T=!1,getDimensionValue:S=PL,...j},k)=>{const I=typeof m=="function"?m():m,Y=b.useMemo(()=>Kc(K=>{K.style[I]="0"},n),[I,n]),$=b.useMemo(()=>Kc(K=>{const M=`scroll${I[0].toUpperCase()}${I.slice(1)}`;K.style[I]=`${K[M]}px`},e),[I,e]),B=b.useMemo(()=>Kc(K=>{K.style[I]=null},t),[I,t]),q=b.useMemo(()=>Kc(K=>{K.style[I]=`${S(I,K)}px`,ZA(K)},s),[s,S,I]),H=b.useMemo(()=>Kc(K=>{K.style[I]=null},a),[I,a]);return l.jsx(Ff,{ref:k,addEndListener:Ey,...j,"aria-expanded":j.role?p:null,onEnter:Y,onEntering:$,onEntered:B,onExit:q,onExiting:H,childRef:Vl(d),in:p,timeout:g,mountOnEnter:y,unmountOnExit:x,appear:T,children:(K,M)=>mn.cloneElement(d,{...M,className:ye(c,d.props.className,LL[K],I==="width"&&"collapse-horizontal")})})});Ty.displayName="Collapse";const JA=b.forwardRef(({children:n,bsPrefix:e,...t},s)=>{e=Ee(e,"navbar-collapse");const a=b.useContext(co);return l.jsx(Ty,{in:!!(a&&a.expanded),...t,children:l.jsx("div",{ref:s,className:e,children:n})})});JA.displayName="NavbarCollapse";function VL(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n},[n]),e}function Zs(n){const e=VL(n);return b.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const eN=b.forwardRef(({bsPrefix:n,className:e,children:t,label:s="Toggle navigation",as:a="button",onClick:c,...d},m)=>{n=Ee(n,"navbar-toggler");const{onToggle:p,expanded:g}=b.useContext(co)||{},y=Zs(x=>{c&&c(x),p&&p()});return a==="button"&&(d.type="button"),l.jsx(a,{...d,ref:m,onClick:y,"aria-label":s,className:ye(e,n,!g&&"collapsed"),children:t||l.jsx("span",{className:`${n}-icon`})})});eN.displayName="NavbarToggle";const zL=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",UL=typeof document<"u",tN=UL||zL?b.useLayoutEffect:b.useEffect,hv=new WeakMap,vT=(n,e)=>{if(!n||!e)return;const t=hv.get(e)||new Map;hv.set(e,t);let s=t.get(n);return s||(s=e.matchMedia(n),s.refCount=0,t.set(s.media,s)),s};function BL(n,e=typeof window>"u"?void 0:window){const t=vT(n,e),[s,a]=b.useState(()=>t?t.matches:!1);return tN(()=>{let c=vT(n,e);if(!c)return a(!1);let d=hv.get(e);const m=()=>{a(c.matches)};return c.refCount++,c.addListener(m),m(),()=>{c.removeListener(m),c.refCount--,c.refCount<=0&&d?.delete(c.media),c=void 0}},[n]),s}function qL(n){const e=Object.keys(n);function t(m,p){return m===p?p:m?`${m} and ${p}`:p}function s(m){return e[Math.min(e.indexOf(m)+1,e.length-1)]}function a(m){const p=s(m);let g=n[p];return typeof g=="number"?g=`${g-.2}px`:g=`calc(${g} - 0.2px)`,`(max-width: ${g})`}function c(m){let p=n[m];return typeof p=="number"&&(p=`${p}px`),`(min-width: ${p})`}function d(m,p,g){let y;typeof m=="object"?(y=m,g=p,p=!0):(p=p||!0,y={[m]:p});let x=b.useMemo(()=>Object.entries(y).reduce((T,[S,j])=>((j==="up"||j===!0)&&(T=t(T,c(S))),(j==="down"||j===!0)&&(T=t(T,a(S))),T),""),[JSON.stringify(y)]);return BL(x,g)}return d}const FL=qL({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function _g(n){n===void 0&&(n=$u());try{var e=n.activeElement;return!e||!e.nodeName?null:e}catch{return n.body}}function of(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}function HL(n){const e=b.useRef(n);return e.current=n,e}function $L(n){const e=HL(n);b.useEffect(()=>()=>e.current(),[])}function GL(n=document){const e=n.defaultView;return Math.abs(e.innerWidth-n.documentElement.clientWidth)}const yT=Ll("modal-open");class wy{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:s=!1}={}){this.handleContainerOverflow=t,this.isRTL=s,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return GL(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",a=this.getElement();e.style={overflow:a.style.overflow,[s]:a.style[s]},e.scrollBarWidth&&(t[s]=`${parseInt($s(a,s)||"0",10)+e.scrollBarWidth}px`),a.setAttribute(yT,""),$s(a,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(yT),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const nN=b.createContext(zl?window:void 0);nN.Provider;function Hf(){return b.useContext(nN)}const xg=(n,e)=>zl?n==null?(e||$u()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function KL(n,e){const t=Hf(),[s,a]=b.useState(()=>xg(n,t?.document));if(!s){const c=xg(n);c&&a(c)}return b.useEffect(()=>{},[e,s]),b.useEffect(()=>{const c=xg(n);c!==s&&a(c)},[n,s]),s}function Sy({children:n,in:e,onExited:t,mountOnEnter:s,unmountOnExit:a}){const c=b.useRef(null),d=b.useRef(e),m=jn(t);b.useEffect(()=>{e?d.current=!0:m(c.current)},[e,m]);const p=Vf(c,Vl(n)),g=b.cloneElement(n,{ref:p});return e?g:a||!d.current&&s?null:g}const QL=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function YL(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function XL(n){let{onEnter:e,onEntering:t,onEntered:s,onExit:a,onExiting:c,onExited:d,addEndListener:m,children:p}=n,g=YL(n,QL);const y=b.useRef(null),x=Vf(y,Vl(p)),T=q=>H=>{q&&y.current&&q(y.current,H)},S=b.useCallback(T(e),[e]),j=b.useCallback(T(t),[t]),k=b.useCallback(T(s),[s]),I=b.useCallback(T(a),[a]),Y=b.useCallback(T(c),[c]),$=b.useCallback(T(d),[d]),B=b.useCallback(T(m),[m]);return Object.assign({},g,{nodeRef:y},e&&{onEnter:S},t&&{onEntering:j},s&&{onEntered:k},a&&{onExit:I},c&&{onExiting:Y},d&&{onExited:$},m&&{addEndListener:B},{children:typeof p=="function"?(q,H)=>p(q,Object.assign({},H,{ref:x})):b.cloneElement(p,{ref:x})})}const WL=["component"];function ZL(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}const JL=b.forwardRef((n,e)=>{let{component:t}=n,s=ZL(n,WL);const a=XL(s);return l.jsx(t,Object.assign({ref:e},a))});function eV({in:n,onTransition:e}){const t=b.useRef(null),s=b.useRef(!0),a=jn(e);return uT(()=>{if(!t.current)return;let c=!1;return a({in:n,element:t.current,initial:s.current,isStale:()=>c}),()=>{c=!0}},[n,a]),uT(()=>(s.current=!1,()=>{s.current=!0}),[]),t}function tV({children:n,in:e,onExited:t,onEntered:s,transition:a}){const[c,d]=b.useState(!e);e&&c&&d(!1);const m=eV({in:!!e,onTransition:g=>{const y=()=>{g.isStale()||(g.in?s?.(g.element,g.initial):(d(!0),t?.(g.element)))};Promise.resolve(a(g)).then(y,x=>{throw g.in||d(!0),x})}}),p=Vf(m,Vl(n));return c&&!e?null:b.cloneElement(n,{ref:p})}function _T(n,e,t){return n?l.jsx(JL,Object.assign({},t,{component:n})):e?l.jsx(tV,Object.assign({},t,{transition:e})):l.jsx(Sy,Object.assign({},t))}const nV=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function iV(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}let bg;function sV(n){return bg||(bg=new wy({ownerDocument:n?.document})),bg}function rV(n){const e=Hf(),t=n||sV(e),s=b.useRef({dialog:null,backdrop:null});return Object.assign(s.current,{add:()=>t.add(s.current),remove:()=>t.remove(s.current),isTopModal:()=>t.isTopModal(s.current),setDialogRef:b.useCallback(a=>{s.current.dialog=a},[]),setBackdropRef:b.useCallback(a=>{s.current.backdrop=a},[])})}const iN=b.forwardRef((n,e)=>{let{show:t=!1,role:s="dialog",className:a,style:c,children:d,backdrop:m=!0,keyboard:p=!0,onBackdropClick:g,onEscapeKeyDown:y,transition:x,runTransition:T,backdropTransition:S,runBackdropTransition:j,autoFocus:k=!0,enforceFocus:I=!0,restoreFocus:Y=!0,restoreFocusOptions:$,renderDialog:B,renderBackdrop:q=nt=>l.jsx("div",Object.assign({},nt)),manager:H,container:K,onShow:M,onHide:N=()=>{},onExit:O,onExited:D,onExiting:P,onEnter:L,onEntering:C,onEntered:ve}=n,we=iV(n,nV);const X=Hf(),re=KL(K),J=rV(H),me=GA(),z=KA(t),[G,ae]=b.useState(!t),ue=b.useRef(null);b.useImperativeHandle(e,()=>J,[J]),zl&&!z&&t&&(ue.current=_g(X?.document)),t&&G&&ae(!1);const pe=jn(()=>{if(J.add(),an.current=Ur(document,"keydown",Ue),St.current=Ur(document,"focus",()=>setTimeout(Se),!0),M&&M(),k){var nt,ni;const jt=_g((nt=(ni=J.dialog)==null?void 0:ni.ownerDocument)!=null?nt:X?.document);J.dialog&&jt&&!of(J.dialog,jt)&&(ue.current=jt,J.dialog.focus())}}),xe=jn(()=>{if(J.remove(),an.current==null||an.current(),St.current==null||St.current(),Y){var nt;(nt=ue.current)==null||nt.focus==null||nt.focus($),ue.current=null}});b.useEffect(()=>{!t||!re||pe()},[t,re,pe]),b.useEffect(()=>{G&&xe()},[G,xe]),$L(()=>{xe()});const Se=jn(()=>{if(!I||!me()||!J.isTopModal())return;const nt=_g(X?.document);J.dialog&&nt&&!of(J.dialog,nt)&&J.dialog.focus()}),rt=jn(nt=>{nt.target===nt.currentTarget&&(g?.(nt),m===!0&&N())}),Ue=jn(nt=>{p&&jL(nt)&&J.isTopModal()&&(y?.(nt),nt.defaultPrevented||N())}),St=b.useRef(),an=b.useRef(),Xt=(...nt)=>{ae(!0),D?.(...nt)};if(!re)return null;const vn=Object.assign({role:s,ref:J.setDialogRef,"aria-modal":s==="dialog"?!0:void 0},we,{style:c,className:a,tabIndex:-1});let yn=B?B(vn):l.jsx("div",Object.assign({},vn,{children:b.cloneElement(d,{role:"document"})}));yn=_T(x,T,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:O,onExiting:P,onExited:Xt,onEnter:L,onEntering:C,onEntered:ve,children:yn});let _n=null;return m&&(_n=q({ref:J.setBackdropRef,onClick:rt}),_n=_T(S,j,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:_n})),l.jsx(l.Fragment,{children:ll.createPortal(l.jsxs(l.Fragment,{children:[_n,yn]}),re)})});iN.displayName="Modal";const sN=Object.assign(iN,{Manager:wy}),aV={[ji]:"show",[Us]:"show"},na=b.forwardRef(({className:n,children:e,transitionClasses:t={},onEnter:s,...a},c)=>{const d={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},m=b.useCallback((p,g)=>{ZA(p),s?.(p,g)},[s]);return l.jsx(Ff,{ref:c,addEndListener:Ey,...d,onEnter:m,childRef:Vl(e),children:(p,g)=>b.cloneElement(e,{...g,className:ye("fade",n,e.props.className,aV[p],t[p])})})});na.displayName="Fade";const rN=b.forwardRef(({className:n,bsPrefix:e,as:t="div",...s},a)=>(e=Ee(e,"offcanvas-body"),l.jsx(t,{ref:a,className:ye(n,e),...s})));rN.displayName="OffcanvasBody";const oV={[ji]:"show",[Us]:"show"},aN=b.forwardRef(({bsPrefix:n,className:e,children:t,in:s=!1,mountOnEnter:a=!1,unmountOnExit:c=!1,appear:d=!1,...m},p)=>(n=Ee(n,"offcanvas"),l.jsx(Ff,{ref:p,addEndListener:Ey,in:s,mountOnEnter:a,unmountOnExit:c,appear:d,...m,childRef:Vl(t),children:(g,y)=>b.cloneElement(t,{...y,className:ye(e,t.props.className,(g===ji||g===wu)&&`${n}-toggling`,oV[g])})})));aN.displayName="OffcanvasToggling";const Ay=b.createContext({onHide(){}}),lV={"aria-label":An.string,onClick:An.func,variant:An.oneOf(["white"])},$f=b.forwardRef(({className:n,variant:e,"aria-label":t="Close",...s},a)=>l.jsx("button",{ref:a,type:"button",className:ye("btn-close",e&&`btn-close-${e}`,n),"aria-label":t,...s}));$f.displayName="CloseButton";$f.propTypes=lV;const Ny=b.forwardRef(({closeLabel:n="Close",closeVariant:e,closeButton:t=!1,onHide:s,children:a,...c},d)=>{const m=b.useContext(Ay),p=Zs(()=>{m?.onHide(),s?.()});return l.jsxs("div",{ref:d,...c,children:[a,t&&l.jsx($f,{"aria-label":n,variant:e,onClick:p})]})});Ny.displayName="AbstractModalHeader";const oN=b.forwardRef(({bsPrefix:n,className:e,closeLabel:t="Close",closeButton:s=!1,...a},c)=>(n=Ee(n,"offcanvas-header"),l.jsx(Ny,{ref:c,...a,className:ye(e,n),closeLabel:t,closeButton:s})));oN.displayName="OffcanvasHeader";const Gu=n=>b.forwardRef((e,t)=>l.jsx("div",{...e,ref:t,className:ye(e.className,n)})),cV=Gu("h5"),lN=b.forwardRef(({className:n,bsPrefix:e,as:t=cV,...s},a)=>(e=Ee(e,"offcanvas-title"),l.jsx(t,{ref:a,className:ye(n,e),...s})));lN.displayName="OffcanvasTitle";function uV(n,e){return n.classList?n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function dV(n,e){n.classList?n.classList.add(e):uV(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function xT(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function hV(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=xT(n.className,e):n.setAttribute("class",xT(n.className&&n.className.baseVal||"",e))}const nl={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class cN extends wy{adjustAndStore(e,t,s){const a=t.style[e];t.dataset[e]=a,$s(t,{[e]:`${parseFloat($s(t,e))+s}px`})}restore(e,t){const s=t.dataset[e];s!==void 0&&(delete t.dataset[e],$s(t,{[e]:s}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(dV(t,"modal-open"),!e.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";zs(t,nl.FIXED_CONTENT).forEach(c=>this.adjustAndStore(s,c,e.scrollBarWidth)),zs(t,nl.STICKY_CONTENT).forEach(c=>this.adjustAndStore(a,c,-e.scrollBarWidth)),zs(t,nl.NAVBAR_TOGGLER).forEach(c=>this.adjustAndStore(a,c,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();hV(t,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";zs(t,nl.FIXED_CONTENT).forEach(c=>this.restore(s,c)),zs(t,nl.STICKY_CONTENT).forEach(c=>this.restore(a,c)),zs(t,nl.NAVBAR_TOGGLER).forEach(c=>this.restore(a,c))}}let Eg;function uN(n){return Eg||(Eg=new cN(n)),Eg}function fV(n){return l.jsx(aN,{...n})}function mV(n){return l.jsx(na,{...n})}const dN=b.forwardRef(({bsPrefix:n,className:e,children:t,"aria-labelledby":s,placement:a="start",responsive:c,show:d=!1,backdrop:m=!0,keyboard:p=!0,scroll:g=!1,onEscapeKeyDown:y,onShow:x,onHide:T,container:S,autoFocus:j=!0,enforceFocus:k=!0,restoreFocus:I=!0,restoreFocusOptions:Y,onEntered:$,onExit:B,onExiting:q,onEnter:H,onEntering:K,onExited:M,backdropClassName:N,manager:O,renderStaticNode:D=!1,...P},L)=>{const C=b.useRef();n=Ee(n,"offcanvas");const[ve,we]=b.useState(!1),X=Zs(T),re=FL(c||"xs","up");b.useEffect(()=>{we(c?d&&!re:d)},[d,c,re]);const J=b.useMemo(()=>({onHide:X}),[X]);function me(){return O||(g?(C.current||(C.current=new cN({handleContainerOverflow:!1})),C.current):uN())}const z=(pe,...xe)=>{pe&&(pe.style.visibility="visible"),H?.(pe,...xe)},G=(pe,...xe)=>{pe&&(pe.style.visibility=""),M?.(...xe)},ae=b.useCallback(pe=>l.jsx("div",{...pe,className:ye(`${n}-backdrop`,N)}),[N,n]),ue=pe=>l.jsx("div",{...pe,...P,className:ye(e,c?`${n}-${c}`:n,`${n}-${a}`),"aria-labelledby":s,children:t});return l.jsxs(l.Fragment,{children:[!ve&&(c||D)&&ue({}),l.jsx(Ay.Provider,{value:J,children:l.jsx(sN,{show:ve,ref:L,backdrop:m,container:S,keyboard:p,autoFocus:j,enforceFocus:k&&!g,restoreFocus:I,restoreFocusOptions:Y,onEscapeKeyDown:y,onShow:x,onHide:X,onEnter:z,onEntering:K,onEntered:$,onExit:B,onExiting:q,onExited:G,manager:me(),transition:fV,backdropTransition:mV,renderBackdrop:ae,renderDialog:ue})})]})});dN.displayName="Offcanvas";const pV=Object.assign(dN,{Body:rN,Header:oN,Title:lN}),hN=b.forwardRef(({onHide:n,...e},t)=>{const s=b.useContext(co),a=Zs(()=>{s==null||s.onToggle==null||s.onToggle(),n?.()});return l.jsx(pV,{ref:t,show:!!(s!=null&&s.expanded),...e,renderStaticNode:!0,onHide:a})});hN.displayName="NavbarOffcanvas";const fN=b.forwardRef(({className:n,bsPrefix:e,as:t="span",...s},a)=>(e=Ee(e,"navbar-text"),l.jsx(t,{ref:a,className:ye(n,e),...s})));fN.displayName="NavbarText";const mN=b.forwardRef((n,e)=>{const{bsPrefix:t,expand:s=!0,variant:a="light",bg:c,fixed:d,sticky:m,className:p,as:g="nav",expanded:y,onToggle:x,onSelect:T,collapseOnSelect:S=!1,...j}=lo(n,{expanded:"onToggle"}),k=Ee(t,"navbar"),I=b.useCallback((...B)=>{T?.(...B),S&&y&&x?.(!1)},[T,S,y,x]);j.role===void 0&&g!=="nav"&&(j.role="navigation");let Y=`${k}-expand`;typeof s=="string"&&(Y=`${Y}-${s}`);const $=b.useMemo(()=>({onToggle:()=>x?.(!y),bsPrefix:k,expanded:!!y,expand:s}),[k,y,s,x]);return l.jsx(co.Provider,{value:$,children:l.jsx(ls.Provider,{value:I,children:l.jsx(g,{ref:e,...j,className:ye(p,k,s&&Y,a&&`${k}-${a}`,c&&`bg-${c}`,m&&`sticky-${m}`,d&&`fixed-${d}`)})})})});mN.displayName="Navbar";const Br=Object.assign(mN,{Brand:YA,Collapse:JA,Offcanvas:hN,Text:fN,Toggle:eN});function pN(n,e,t){const s=b.useRef(n!==void 0),[a,c]=b.useState(e),d=n!==void 0,m=s.current;return s.current=d,!d&&m&&a!==e&&c(e),[d?n:a,b.useCallback((...p)=>{const[g,...y]=p;let x=t?.(g,...y);return c(g),x},[t])]}const Gf=b.createContext(null);var bT=Object.prototype.hasOwnProperty;function ET(n,e,t){for(t of n.keys())if(cu(t,e))return t}function cu(n,e){var t,s,a;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&cu(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(a=s,a&&typeof a=="object"&&(a=ET(e,a),!a)||!e.has(a))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(a=s[0],a&&typeof a=="object"&&(a=ET(e,a),!a)||!cu(s[1],e.get(a)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(bT.call(n,t)&&++s&&!bT.call(e,t)||!(t in e)||!cu(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function gV(n){const e=GA();return[n[0],b.useCallback(t=>{if(e())return n[1](t)},[e,n[1]])]}var qn="top",_i="bottom",xi="right",Fn="left",jy="auto",Ku=[qn,_i,xi,Fn],Tl="start",Su="end",vV="clippingParents",gN="viewport",Qc="popper",yV="reference",TT=Ku.reduce(function(n,e){return n.concat([e+"-"+Tl,e+"-"+Su])},[]),vN=[].concat(Ku,[jy]).reduce(function(n,e){return n.concat([e,e+"-"+Tl,e+"-"+Su])},[]),_V="beforeRead",xV="read",bV="afterRead",EV="beforeMain",TV="main",wV="afterMain",SV="beforeWrite",AV="write",NV="afterWrite",jV=[_V,xV,bV,EV,TV,wV,SV,AV,NV];function ss(n){return n.split("-")[0]}function ei(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function no(n){var e=ei(n).Element;return n instanceof e||n instanceof Element}function rs(n){var e=ei(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function Cy(n){if(typeof ShadowRoot>"u")return!1;var e=ei(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}var Qa=Math.max,lf=Math.min,wl=Math.round;function fv(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function yN(){return!/^((?!chrome|android).)*safari/i.test(fv())}function Sl(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var s=n.getBoundingClientRect(),a=1,c=1;e&&rs(n)&&(a=n.offsetWidth>0&&wl(s.width)/n.offsetWidth||1,c=n.offsetHeight>0&&wl(s.height)/n.offsetHeight||1);var d=no(n)?ei(n):window,m=d.visualViewport,p=!yN()&&t,g=(s.left+(p&&m?m.offsetLeft:0))/a,y=(s.top+(p&&m?m.offsetTop:0))/c,x=s.width/a,T=s.height/c;return{width:x,height:T,top:y,right:g+x,bottom:y+T,left:g,x:g,y}}function Ry(n){var e=Sl(n),t=n.offsetWidth,s=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:s}}function _N(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&Cy(t)){var s=e;do{if(s&&n.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function ia(n){return n?(n.nodeName||"").toLowerCase():null}function Js(n){return ei(n).getComputedStyle(n)}function CV(n){return["table","td","th"].indexOf(ia(n))>=0}function ca(n){return((no(n)?n.ownerDocument:n.document)||window.document).documentElement}function Kf(n){return ia(n)==="html"?n:n.assignedSlot||n.parentNode||(Cy(n)?n.host:null)||ca(n)}function wT(n){return!rs(n)||Js(n).position==="fixed"?null:n.offsetParent}function RV(n){var e=/firefox/i.test(fv()),t=/Trident/i.test(fv());if(t&&rs(n)){var s=Js(n);if(s.position==="fixed")return null}var a=Kf(n);for(Cy(a)&&(a=a.host);rs(a)&&["html","body"].indexOf(ia(a))<0;){var c=Js(a);if(c.transform!=="none"||c.perspective!=="none"||c.contain==="paint"||["transform","perspective"].indexOf(c.willChange)!==-1||e&&c.willChange==="filter"||e&&c.filter&&c.filter!=="none")return a;a=a.parentNode}return null}function Qu(n){for(var e=ei(n),t=wT(n);t&&CV(t)&&Js(t).position==="static";)t=wT(t);return t&&(ia(t)==="html"||ia(t)==="body"&&Js(t).position==="static")?e:t||RV(n)||e}function Iy(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function uu(n,e,t){return Qa(n,lf(e,t))}function IV(n,e,t){var s=uu(n,e,t);return s>t?t:s}function xN(){return{top:0,right:0,bottom:0,left:0}}function bN(n){return Object.assign({},xN(),n)}function EN(n,e){return e.reduce(function(t,s){return t[s]=n,t},{})}var OV=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,bN(typeof e!="number"?e:EN(e,Ku))};function DV(n){var e,t=n.state,s=n.name,a=n.options,c=t.elements.arrow,d=t.modifiersData.popperOffsets,m=ss(t.placement),p=Iy(m),g=[Fn,xi].indexOf(m)>=0,y=g?"height":"width";if(!(!c||!d)){var x=OV(a.padding,t),T=Ry(c),S=p==="y"?qn:Fn,j=p==="y"?_i:xi,k=t.rects.reference[y]+t.rects.reference[p]-d[p]-t.rects.popper[y],I=d[p]-t.rects.reference[p],Y=Qu(c),$=Y?p==="y"?Y.clientHeight||0:Y.clientWidth||0:0,B=k/2-I/2,q=x[S],H=$-T[y]-x[j],K=$/2-T[y]/2+B,M=uu(q,K,H),N=p;t.modifiersData[s]=(e={},e[N]=M,e.centerOffset=M-K,e)}}function MV(n){var e=n.state,t=n.options,s=t.element,a=s===void 0?"[data-popper-arrow]":s;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||_N(e.elements.popper,a)&&(e.elements.arrow=a))}const kV={name:"arrow",enabled:!0,phase:"main",fn:DV,effect:MV,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Al(n){return n.split("-")[1]}var PV={top:"auto",right:"auto",bottom:"auto",left:"auto"};function LV(n,e){var t=n.x,s=n.y,a=e.devicePixelRatio||1;return{x:wl(t*a)/a||0,y:wl(s*a)/a||0}}function ST(n){var e,t=n.popper,s=n.popperRect,a=n.placement,c=n.variation,d=n.offsets,m=n.position,p=n.gpuAcceleration,g=n.adaptive,y=n.roundOffsets,x=n.isFixed,T=d.x,S=T===void 0?0:T,j=d.y,k=j===void 0?0:j,I=typeof y=="function"?y({x:S,y:k}):{x:S,y:k};S=I.x,k=I.y;var Y=d.hasOwnProperty("x"),$=d.hasOwnProperty("y"),B=Fn,q=qn,H=window;if(g){var K=Qu(t),M="clientHeight",N="clientWidth";if(K===ei(t)&&(K=ca(t),Js(K).position!=="static"&&m==="absolute"&&(M="scrollHeight",N="scrollWidth")),K=K,a===qn||(a===Fn||a===xi)&&c===Su){q=_i;var O=x&&K===H&&H.visualViewport?H.visualViewport.height:K[M];k-=O-s.height,k*=p?1:-1}if(a===Fn||(a===qn||a===_i)&&c===Su){B=xi;var D=x&&K===H&&H.visualViewport?H.visualViewport.width:K[N];S-=D-s.width,S*=p?1:-1}}var P=Object.assign({position:m},g&&PV),L=y===!0?LV({x:S,y:k},ei(t)):{x:S,y:k};if(S=L.x,k=L.y,p){var C;return Object.assign({},P,(C={},C[q]=$?"0":"",C[B]=Y?"0":"",C.transform=(H.devicePixelRatio||1)<=1?"translate("+S+"px, "+k+"px)":"translate3d("+S+"px, "+k+"px, 0)",C))}return Object.assign({},P,(e={},e[q]=$?k+"px":"",e[B]=Y?S+"px":"",e.transform="",e))}function VV(n){var e=n.state,t=n.options,s=t.gpuAcceleration,a=s===void 0?!0:s,c=t.adaptive,d=c===void 0?!0:c,m=t.roundOffsets,p=m===void 0?!0:m,g={placement:ss(e.placement),variation:Al(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ST(Object.assign({},g,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:d,roundOffsets:p})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ST(Object.assign({},g,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const zV={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:VV,data:{}};var Ah={passive:!0};function UV(n){var e=n.state,t=n.instance,s=n.options,a=s.scroll,c=a===void 0?!0:a,d=s.resize,m=d===void 0?!0:d,p=ei(e.elements.popper),g=[].concat(e.scrollParents.reference,e.scrollParents.popper);return c&&g.forEach(function(y){y.addEventListener("scroll",t.update,Ah)}),m&&p.addEventListener("resize",t.update,Ah),function(){c&&g.forEach(function(y){y.removeEventListener("scroll",t.update,Ah)}),m&&p.removeEventListener("resize",t.update,Ah)}}const BV={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:UV,data:{}};var qV={left:"right",right:"left",bottom:"top",top:"bottom"};function zh(n){return n.replace(/left|right|bottom|top/g,function(e){return qV[e]})}var FV={start:"end",end:"start"};function AT(n){return n.replace(/start|end/g,function(e){return FV[e]})}function Oy(n){var e=ei(n),t=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:t,scrollTop:s}}function Dy(n){return Sl(ca(n)).left+Oy(n).scrollLeft}function HV(n,e){var t=ei(n),s=ca(n),a=t.visualViewport,c=s.clientWidth,d=s.clientHeight,m=0,p=0;if(a){c=a.width,d=a.height;var g=yN();(g||!g&&e==="fixed")&&(m=a.offsetLeft,p=a.offsetTop)}return{width:c,height:d,x:m+Dy(n),y:p}}function $V(n){var e,t=ca(n),s=Oy(n),a=(e=n.ownerDocument)==null?void 0:e.body,c=Qa(t.scrollWidth,t.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),d=Qa(t.scrollHeight,t.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),m=-s.scrollLeft+Dy(n),p=-s.scrollTop;return Js(a||t).direction==="rtl"&&(m+=Qa(t.clientWidth,a?a.clientWidth:0)-c),{width:c,height:d,x:m,y:p}}function My(n){var e=Js(n),t=e.overflow,s=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+a+s)}function TN(n){return["html","body","#document"].indexOf(ia(n))>=0?n.ownerDocument.body:rs(n)&&My(n)?n:TN(Kf(n))}function du(n,e){var t;e===void 0&&(e=[]);var s=TN(n),a=s===((t=n.ownerDocument)==null?void 0:t.body),c=ei(s),d=a?[c].concat(c.visualViewport||[],My(s)?s:[]):s,m=e.concat(d);return a?m:m.concat(du(Kf(d)))}function mv(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function GV(n,e){var t=Sl(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function NT(n,e,t){return e===gN?mv(HV(n,t)):no(e)?GV(e,t):mv($V(ca(n)))}function KV(n){var e=du(Kf(n)),t=["absolute","fixed"].indexOf(Js(n).position)>=0,s=t&&rs(n)?Qu(n):n;return no(s)?e.filter(function(a){return no(a)&&_N(a,s)&&ia(a)!=="body"}):[]}function QV(n,e,t,s){var a=e==="clippingParents"?KV(n):[].concat(e),c=[].concat(a,[t]),d=c[0],m=c.reduce(function(p,g){var y=NT(n,g,s);return p.top=Qa(y.top,p.top),p.right=lf(y.right,p.right),p.bottom=lf(y.bottom,p.bottom),p.left=Qa(y.left,p.left),p},NT(n,d,s));return m.width=m.right-m.left,m.height=m.bottom-m.top,m.x=m.left,m.y=m.top,m}function wN(n){var e=n.reference,t=n.element,s=n.placement,a=s?ss(s):null,c=s?Al(s):null,d=e.x+e.width/2-t.width/2,m=e.y+e.height/2-t.height/2,p;switch(a){case qn:p={x:d,y:e.y-t.height};break;case _i:p={x:d,y:e.y+e.height};break;case xi:p={x:e.x+e.width,y:m};break;case Fn:p={x:e.x-t.width,y:m};break;default:p={x:e.x,y:e.y}}var g=a?Iy(a):null;if(g!=null){var y=g==="y"?"height":"width";switch(c){case Tl:p[g]=p[g]-(e[y]/2-t[y]/2);break;case Su:p[g]=p[g]+(e[y]/2-t[y]/2);break}}return p}function Au(n,e){e===void 0&&(e={});var t=e,s=t.placement,a=s===void 0?n.placement:s,c=t.strategy,d=c===void 0?n.strategy:c,m=t.boundary,p=m===void 0?vV:m,g=t.rootBoundary,y=g===void 0?gN:g,x=t.elementContext,T=x===void 0?Qc:x,S=t.altBoundary,j=S===void 0?!1:S,k=t.padding,I=k===void 0?0:k,Y=bN(typeof I!="number"?I:EN(I,Ku)),$=T===Qc?yV:Qc,B=n.rects.popper,q=n.elements[j?$:T],H=QV(no(q)?q:q.contextElement||ca(n.elements.popper),p,y,d),K=Sl(n.elements.reference),M=wN({reference:K,element:B,placement:a}),N=mv(Object.assign({},B,M)),O=T===Qc?N:K,D={top:H.top-O.top+Y.top,bottom:O.bottom-H.bottom+Y.bottom,left:H.left-O.left+Y.left,right:O.right-H.right+Y.right},P=n.modifiersData.offset;if(T===Qc&&P){var L=P[a];Object.keys(D).forEach(function(C){var ve=[xi,_i].indexOf(C)>=0?1:-1,we=[qn,_i].indexOf(C)>=0?"y":"x";D[C]+=L[we]*ve})}return D}function YV(n,e){e===void 0&&(e={});var t=e,s=t.placement,a=t.boundary,c=t.rootBoundary,d=t.padding,m=t.flipVariations,p=t.allowedAutoPlacements,g=p===void 0?vN:p,y=Al(s),x=y?m?TT:TT.filter(function(j){return Al(j)===y}):Ku,T=x.filter(function(j){return g.indexOf(j)>=0});T.length===0&&(T=x);var S=T.reduce(function(j,k){return j[k]=Au(n,{placement:k,boundary:a,rootBoundary:c,padding:d})[ss(k)],j},{});return Object.keys(S).sort(function(j,k){return S[j]-S[k]})}function XV(n){if(ss(n)===jy)return[];var e=zh(n);return[AT(n),e,AT(e)]}function WV(n){var e=n.state,t=n.options,s=n.name;if(!e.modifiersData[s]._skip){for(var a=t.mainAxis,c=a===void 0?!0:a,d=t.altAxis,m=d===void 0?!0:d,p=t.fallbackPlacements,g=t.padding,y=t.boundary,x=t.rootBoundary,T=t.altBoundary,S=t.flipVariations,j=S===void 0?!0:S,k=t.allowedAutoPlacements,I=e.options.placement,Y=ss(I),$=Y===I,B=p||($||!j?[zh(I)]:XV(I)),q=[I].concat(B).reduce(function(pe,xe){return pe.concat(ss(xe)===jy?YV(e,{placement:xe,boundary:y,rootBoundary:x,padding:g,flipVariations:j,allowedAutoPlacements:k}):xe)},[]),H=e.rects.reference,K=e.rects.popper,M=new Map,N=!0,O=q[0],D=0;D<q.length;D++){var P=q[D],L=ss(P),C=Al(P)===Tl,ve=[qn,_i].indexOf(L)>=0,we=ve?"width":"height",X=Au(e,{placement:P,boundary:y,rootBoundary:x,altBoundary:T,padding:g}),re=ve?C?xi:Fn:C?_i:qn;H[we]>K[we]&&(re=zh(re));var J=zh(re),me=[];if(c&&me.push(X[L]<=0),m&&me.push(X[re]<=0,X[J]<=0),me.every(function(pe){return pe})){O=P,N=!1;break}M.set(P,me)}if(N)for(var z=j?3:1,G=function(xe){var Se=q.find(function(rt){var Ue=M.get(rt);if(Ue)return Ue.slice(0,xe).every(function(St){return St})});if(Se)return O=Se,"break"},ae=z;ae>0;ae--){var ue=G(ae);if(ue==="break")break}e.placement!==O&&(e.modifiersData[s]._skip=!0,e.placement=O,e.reset=!0)}}const ZV={name:"flip",enabled:!0,phase:"main",fn:WV,requiresIfExists:["offset"],data:{_skip:!1}};function jT(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function CT(n){return[qn,xi,_i,Fn].some(function(e){return n[e]>=0})}function JV(n){var e=n.state,t=n.name,s=e.rects.reference,a=e.rects.popper,c=e.modifiersData.preventOverflow,d=Au(e,{elementContext:"reference"}),m=Au(e,{altBoundary:!0}),p=jT(d,s),g=jT(m,a,c),y=CT(p),x=CT(g);e.modifiersData[t]={referenceClippingOffsets:p,popperEscapeOffsets:g,isReferenceHidden:y,hasPopperEscaped:x},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":y,"data-popper-escaped":x})}const ez={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:JV};function tz(n,e,t){var s=ss(n),a=[Fn,qn].indexOf(s)>=0?-1:1,c=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,d=c[0],m=c[1];return d=d||0,m=(m||0)*a,[Fn,xi].indexOf(s)>=0?{x:m,y:d}:{x:d,y:m}}function nz(n){var e=n.state,t=n.options,s=n.name,a=t.offset,c=a===void 0?[0,0]:a,d=vN.reduce(function(y,x){return y[x]=tz(x,e.rects,c),y},{}),m=d[e.placement],p=m.x,g=m.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=p,e.modifiersData.popperOffsets.y+=g),e.modifiersData[s]=d}const iz={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:nz};function sz(n){var e=n.state,t=n.name;e.modifiersData[t]=wN({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const rz={name:"popperOffsets",enabled:!0,phase:"read",fn:sz,data:{}};function az(n){return n==="x"?"y":"x"}function oz(n){var e=n.state,t=n.options,s=n.name,a=t.mainAxis,c=a===void 0?!0:a,d=t.altAxis,m=d===void 0?!1:d,p=t.boundary,g=t.rootBoundary,y=t.altBoundary,x=t.padding,T=t.tether,S=T===void 0?!0:T,j=t.tetherOffset,k=j===void 0?0:j,I=Au(e,{boundary:p,rootBoundary:g,padding:x,altBoundary:y}),Y=ss(e.placement),$=Al(e.placement),B=!$,q=Iy(Y),H=az(q),K=e.modifiersData.popperOffsets,M=e.rects.reference,N=e.rects.popper,O=typeof k=="function"?k(Object.assign({},e.rects,{placement:e.placement})):k,D=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),P=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,L={x:0,y:0};if(K){if(c){var C,ve=q==="y"?qn:Fn,we=q==="y"?_i:xi,X=q==="y"?"height":"width",re=K[q],J=re+I[ve],me=re-I[we],z=S?-N[X]/2:0,G=$===Tl?M[X]:N[X],ae=$===Tl?-N[X]:-M[X],ue=e.elements.arrow,pe=S&&ue?Ry(ue):{width:0,height:0},xe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:xN(),Se=xe[ve],rt=xe[we],Ue=uu(0,M[X],pe[X]),St=B?M[X]/2-z-Ue-Se-D.mainAxis:G-Ue-Se-D.mainAxis,an=B?-M[X]/2+z+Ue+rt+D.mainAxis:ae+Ue+rt+D.mainAxis,Xt=e.elements.arrow&&Qu(e.elements.arrow),vn=Xt?q==="y"?Xt.clientTop||0:Xt.clientLeft||0:0,yn=(C=P?.[q])!=null?C:0,_n=re+St-yn-vn,nt=re+an-yn,ni=uu(S?lf(J,_n):J,re,S?Qa(me,nt):me);K[q]=ni,L[q]=ni-re}if(m){var jt,ua=q==="x"?qn:Fn,hs=q==="x"?_i:xi,xn=K[H],kn=H==="y"?"height":"width",ir=xn+I[ua],bi=xn-I[hs],ii=[qn,Fn].indexOf(Y)!==-1,fs=(jt=P?.[H])!=null?jt:0,Ne=ii?ir:xn-M[kn]-N[kn]-fs+D.altAxis,Be=ii?xn+M[kn]+N[kn]-fs-D.altAxis:bi,qt=S&&ii?IV(Ne,xn,Be):uu(S?Ne:ir,xn,S?Be:bi);K[H]=qt,L[H]=qt-xn}e.modifiersData[s]=L}}const lz={name:"preventOverflow",enabled:!0,phase:"main",fn:oz,requiresIfExists:["offset"]};function cz(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function uz(n){return n===ei(n)||!rs(n)?Oy(n):cz(n)}function dz(n){var e=n.getBoundingClientRect(),t=wl(e.width)/n.offsetWidth||1,s=wl(e.height)/n.offsetHeight||1;return t!==1||s!==1}function hz(n,e,t){t===void 0&&(t=!1);var s=rs(e),a=rs(e)&&dz(e),c=ca(e),d=Sl(n,a,t),m={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(s||!s&&!t)&&((ia(e)!=="body"||My(c))&&(m=uz(e)),rs(e)?(p=Sl(e,!0),p.x+=e.clientLeft,p.y+=e.clientTop):c&&(p.x=Dy(c))),{x:d.left+m.scrollLeft-p.x,y:d.top+m.scrollTop-p.y,width:d.width,height:d.height}}function fz(n){var e=new Map,t=new Set,s=[];n.forEach(function(c){e.set(c.name,c)});function a(c){t.add(c.name);var d=[].concat(c.requires||[],c.requiresIfExists||[]);d.forEach(function(m){if(!t.has(m)){var p=e.get(m);p&&a(p)}}),s.push(c)}return n.forEach(function(c){t.has(c.name)||a(c)}),s}function mz(n){var e=fz(n);return jV.reduce(function(t,s){return t.concat(e.filter(function(a){return a.phase===s}))},[])}function pz(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function gz(n){var e=n.reduce(function(t,s){var a=t[s.name];return t[s.name]=a?Object.assign({},a,s,{options:Object.assign({},a.options,s.options),data:Object.assign({},a.data,s.data)}):s,t},{});return Object.keys(e).map(function(t){return e[t]})}var RT={placement:"bottom",modifiers:[],strategy:"absolute"};function IT(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function vz(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,s=t===void 0?[]:t,a=e.defaultOptions,c=a===void 0?RT:a;return function(m,p,g){g===void 0&&(g=c);var y={placement:"bottom",orderedModifiers:[],options:Object.assign({},RT,c),modifiersData:{},elements:{reference:m,popper:p},attributes:{},styles:{}},x=[],T=!1,S={state:y,setOptions:function(Y){var $=typeof Y=="function"?Y(y.options):Y;k(),y.options=Object.assign({},c,y.options,$),y.scrollParents={reference:no(m)?du(m):m.contextElement?du(m.contextElement):[],popper:du(p)};var B=mz(gz([].concat(s,y.options.modifiers)));return y.orderedModifiers=B.filter(function(q){return q.enabled}),j(),S.update()},forceUpdate:function(){if(!T){var Y=y.elements,$=Y.reference,B=Y.popper;if(IT($,B)){y.rects={reference:hz($,Qu(B),y.options.strategy==="fixed"),popper:Ry(B)},y.reset=!1,y.placement=y.options.placement,y.orderedModifiers.forEach(function(D){return y.modifiersData[D.name]=Object.assign({},D.data)});for(var q=0;q<y.orderedModifiers.length;q++){if(y.reset===!0){y.reset=!1,q=-1;continue}var H=y.orderedModifiers[q],K=H.fn,M=H.options,N=M===void 0?{}:M,O=H.name;typeof K=="function"&&(y=K({state:y,options:N,name:O,instance:S})||y)}}}},update:pz(function(){return new Promise(function(I){S.forceUpdate(),I(y)})}),destroy:function(){k(),T=!0}};if(!IT(m,p))return S;S.setOptions(g).then(function(I){!T&&g.onFirstUpdate&&g.onFirstUpdate(I)});function j(){y.orderedModifiers.forEach(function(I){var Y=I.name,$=I.options,B=$===void 0?{}:$,q=I.effect;if(typeof q=="function"){var H=q({state:y,name:Y,instance:S,options:B}),K=function(){};x.push(H||K)}})}function k(){x.forEach(function(I){return I()}),x=[]}return S}}const yz=vz({defaultModifiers:[ez,rz,zV,BV,iz,ZV,lz,kV]}),_z=["enabled","placement","strategy","modifiers"];function xz(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}const bz={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Ez={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:n})=>()=>{const{reference:e,popper:t}=n.elements;if("removeAttribute"in e){const s=(e.getAttribute("aria-describedby")||"").split(",").filter(a=>a.trim()!==t.id);s.length?e.setAttribute("aria-describedby",s.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:n})=>{var e;const{popper:t,reference:s}=n.elements,a=(e=t.getAttribute("role"))==null?void 0:e.toLowerCase();if(t.id&&a==="tooltip"&&"setAttribute"in s){const c=s.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(t.id)!==-1)return;s.setAttribute("aria-describedby",c?`${c},${t.id}`:t.id)}}},Tz=[];function wz(n,e,t={}){let{enabled:s=!0,placement:a="bottom",strategy:c="absolute",modifiers:d=Tz}=t,m=xz(t,_z);const p=b.useRef(d),g=b.useRef(),y=b.useCallback(()=>{var I;(I=g.current)==null||I.update()},[]),x=b.useCallback(()=>{var I;(I=g.current)==null||I.forceUpdate()},[]),[T,S]=gV(b.useState({placement:a,update:y,forceUpdate:x,attributes:{},styles:{popper:{},arrow:{}}})),j=b.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:I})=>{const Y={},$={};Object.keys(I.elements).forEach(B=>{Y[B]=I.styles[B],$[B]=I.attributes[B]}),S({state:I,styles:Y,attributes:$,update:y,forceUpdate:x,placement:I.placement})}}),[y,x,S]),k=b.useMemo(()=>(cu(p.current,d)||(p.current=d),p.current),[d]);return b.useEffect(()=>{!g.current||!s||g.current.setOptions({placement:a,strategy:c,modifiers:[...k,j,bz]})},[c,a,j,s,k]),b.useEffect(()=>{if(!(!s||n==null||e==null))return g.current=yz(n,e,Object.assign({},m,{placement:a,strategy:c,modifiers:[...k,Ez,j]})),()=>{g.current!=null&&(g.current.destroy(),g.current=void 0,S(I=>Object.assign({},I,{attributes:{},styles:{popper:{}}})))}},[s,n,e]),T}var Tg,OT;function Sz(){if(OT)return Tg;OT=1;var n=function(){};return Tg=n,Tg}var Az=Sz();const Nz=Nu(Az),DT=()=>{};function jz(n){return n.button===0}function Cz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}const wg=n=>n&&("current"in n?n.current:n),MT={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function Rz(n,e=DT,{disabled:t,clickTrigger:s="click"}={}){const a=b.useRef(!1),c=b.useRef(!1),d=b.useCallback(g=>{const y=wg(n);Nz(!!y,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),a.current=!y||Cz(g)||!jz(g)||!!of(y,g.target)||c.current,c.current=!1},[n]),m=jn(g=>{const y=wg(n);y&&of(y,g.target)?c.current=!0:c.current=!1}),p=jn(g=>{a.current||e(g)});b.useEffect(()=>{var g,y;if(t||n==null)return;const x=$u(wg(n)),T=x.defaultView||window;let S=(g=T.event)!=null?g:(y=T.parent)==null?void 0:y.event,j=null;MT[s]&&(j=Ur(x,MT[s],m,!0));const k=Ur(x,s,d,!0),I=Ur(x,s,$=>{if($===S){S=void 0;return}p($)});let Y=[];return"ontouchstart"in x.documentElement&&(Y=[].slice.call(x.body.children).map($=>Ur($,"mousemove",DT))),()=>{j?.(),k(),I(),Y.forEach($=>$())}},[n,t,s,d,m,p])}function Iz(n){const e={};return Array.isArray(n)?(n?.forEach(t=>{e[t.name]=t}),e):n||e}function Oz(n={}){return Array.isArray(n)?n:Object.keys(n).map(e=>(n[e].name=e,n[e]))}function Dz({enabled:n,enableEvents:e,placement:t,flip:s,offset:a,fixed:c,containerPadding:d,arrowElement:m,popperConfig:p={}}){var g,y,x,T,S;const j=Iz(p.modifiers);return Object.assign({},p,{placement:t,enabled:n,strategy:c?"fixed":p.strategy,modifiers:Oz(Object.assign({},j,{eventListeners:{enabled:e,options:(g=j.eventListeners)==null?void 0:g.options},preventOverflow:Object.assign({},j.preventOverflow,{options:d?Object.assign({padding:d},(y=j.preventOverflow)==null?void 0:y.options):(x=j.preventOverflow)==null?void 0:x.options}),offset:{options:Object.assign({offset:a},(T=j.offset)==null?void 0:T.options)},arrow:Object.assign({},j.arrow,{enabled:!!m,options:Object.assign({},(S=j.arrow)==null?void 0:S.options,{element:m})}),flip:Object.assign({enabled:!!s},j.flip)}))})}const Mz=["children","usePopper"];function kz(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}const Pz=()=>{};function SN(n={}){const e=b.useContext(Gf),[t,s]=cL(),a=b.useRef(!1),{flip:c,offset:d,rootCloseEvent:m,fixed:p=!1,placement:g,popperConfig:y={},enableEventListeners:x=!0,usePopper:T=!!e}=n,S=e?.show==null?!!n.show:e.show;S&&!a.current&&(a.current=!0);const j=K=>{e?.toggle(!1,K)},{placement:k,setMenu:I,menuElement:Y,toggleElement:$}=e||{},B=wz($,Y,Dz({placement:g||k||"bottom-start",enabled:T,enableEvents:x??S,offset:d,flip:c,fixed:p,arrowElement:t,popperConfig:y})),q=Object.assign({ref:I||Pz,"aria-labelledby":$?.id},B.attributes.popper,{style:B.styles.popper}),H={show:S,placement:k,hasShown:a.current,toggle:e?.toggle,popper:T?B:null,arrowProps:T?Object.assign({ref:s},B.attributes.arrow,{style:B.styles.arrow}):{}};return Rz(Y,j,{clickTrigger:m,disabled:!S}),[q,H]}function AN(n){let{children:e,usePopper:t=!0}=n,s=kz(n,Mz);const[a,c]=SN(Object.assign({},s,{usePopper:t}));return l.jsx(l.Fragment,{children:e(a,c)})}AN.displayName="DropdownMenu";const NN={prefix:String(Math.round(Math.random()*1e10)),current:0},jN=mn.createContext(NN),Lz=mn.createContext(!1);let Sg=new WeakMap;function Vz(n=!1){let e=b.useContext(jN),t=b.useRef(null);if(t.current===null&&!n){var s,a;let c=(a=mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||a===void 0||(s=a.ReactCurrentOwner)===null||s===void 0?void 0:s.current;if(c){let d=Sg.get(c);d==null?Sg.set(c,{id:e.current,state:c.memoizedState}):c.memoizedState!==d.state&&(e.current=d.id,Sg.delete(c))}t.current=++e.current}return t.current}function zz(n){let e=b.useContext(jN),t=Vz(!!n),s=`react-aria${e.prefix}`;return n||`${s}-${t}`}function Uz(n){let e=mn.useId(),[t]=b.useState(Hz()),s=t?"react-aria":`react-aria${NN.prefix}`;return n||`${s}-${e}`}const CN=typeof mn.useId=="function"?Uz:zz;function Bz(){return!1}function qz(){return!0}function Fz(n){return()=>{}}function Hz(){return typeof mn.useSyncExternalStore=="function"?mn.useSyncExternalStore(Fz,Bz,qz):b.useContext(Lz)}const RN=n=>{var e;return((e=n.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},kT=()=>{};function IN(){const n=CN(),{show:e=!1,toggle:t=kT,setToggle:s,menuElement:a}=b.useContext(Gf)||{},c=b.useCallback(m=>{t(!e,m)},[e,t]),d={id:n,ref:s||kT,onClick:c,"aria-expanded":!!e};return a&&RN(a)&&(d["aria-haspopup"]=!0),[d,{show:e,toggle:t}]}function ON({children:n}){const[e,t]=IN();return l.jsx(l.Fragment,{children:n(e,t)})}ON.displayName="DropdownToggle";const $z=["eventKey","disabled","onClick","active","as"];function Gz(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function DN({key:n,href:e,active:t,disabled:s,onClick:a}){const c=b.useContext(ls),d=b.useContext(zf),{activeKey:m}=d||{},p=ta(n,e),g=t==null&&n!=null?ta(m)===p:t;return[{onClick:jn(x=>{s||(a?.(x),c&&!x.isPropagationStopped()&&c(p,x))}),"aria-disabled":s||void 0,"aria-selected":g,[Ll("dropdown-item")]:""},{isActive:g}]}const MN=b.forwardRef((n,e)=>{let{eventKey:t,disabled:s,onClick:a,active:c,as:d=vy}=n,m=Gz(n,$z);const[p]=DN({key:t,href:m.href,disabled:s,onClick:a,active:c});return l.jsx(d,Object.assign({},m,{ref:e},p))});MN.displayName="DropdownItem";function PT(){const n=qA(),e=b.useRef(null),t=b.useCallback(s=>{e.current=s,n()},[n]);return[e,t]}function Yu({defaultShow:n,show:e,onSelect:t,onToggle:s,itemSelector:a=`* [${Ll("dropdown-item")}]`,focusFirstItemOnShow:c,placement:d="bottom-start",children:m}){const p=Hf(),[g,y]=pN(e,n,s),[x,T]=PT(),S=x.current,[j,k]=PT(),I=j.current,Y=KA(g),$=b.useRef(null),B=b.useRef(!1),q=b.useContext(ls),H=b.useCallback((P,L,C=L?.type)=>{y(P,{originalEvent:L,source:C})},[y]),K=jn((P,L)=>{t?.(P,L),H(!1,L,"select"),L.isPropagationStopped()||q?.(P,L)}),M=b.useMemo(()=>({toggle:H,placement:d,show:g,menuElement:S,toggleElement:I,setMenu:T,setToggle:k}),[H,d,g,S,I,T,k]);S&&Y&&!g&&(B.current=S.contains(S.ownerDocument.activeElement));const N=jn(()=>{I&&I.focus&&I.focus()}),O=jn(()=>{const P=$.current;let L=c;if(L==null&&(L=x.current&&RN(x.current)?"keyboard":!1),L===!1||L==="keyboard"&&!/^key.+$/.test(P))return;const C=zs(x.current,a)[0];C&&C.focus&&C.focus()});b.useEffect(()=>{g?O():B.current&&(B.current=!1,N())},[g,B,N,O]),b.useEffect(()=>{$.current=null});const D=(P,L)=>{if(!x.current)return null;const C=zs(x.current,a);let ve=C.indexOf(P)+L;return ve=Math.max(0,Math.min(ve,C.length)),C[ve]};return uL(b.useCallback(()=>p.document,[p]),"keydown",P=>{var L,C;const{key:ve}=P,we=P.target,X=(L=x.current)==null?void 0:L.contains(we),re=(C=j.current)==null?void 0:C.contains(we);if(/input|textarea/i.test(we.tagName)&&(ve===" "||ve!=="Escape"&&X||ve==="Escape"&&we.type==="search")||!X&&!re||ve==="Tab"&&(!x.current||!g))return;$.current=P.type;const me={originalEvent:P,source:P.type};switch(ve){case"ArrowUp":{const z=D(we,-1);z&&z.focus&&z.focus(),P.preventDefault();return}case"ArrowDown":if(P.preventDefault(),!g)y(!0,me);else{const z=D(we,1);z&&z.focus&&z.focus()}return;case"Tab":by(we.ownerDocument,"keyup",z=>{var G;(z.key==="Tab"&&!z.target||!((G=x.current)!=null&&G.contains(z.target)))&&y(!1,me)},{once:!0});break;case"Escape":ve==="Escape"&&(P.preventDefault(),P.stopPropagation()),y(!1,me);break}}),l.jsx(ls.Provider,{value:K,children:l.jsx(Gf.Provider,{value:M,children:m})})}Yu.displayName="Dropdown";Yu.Menu=AN;Yu.Toggle=ON;Yu.Item=MN;const ky=b.createContext({});ky.displayName="DropdownContext";const kN=b.forwardRef(({className:n,bsPrefix:e,as:t="hr",role:s="separator",...a},c)=>(e=Ee(e,"dropdown-divider"),l.jsx(t,{ref:c,className:ye(n,e),role:s,...a})));kN.displayName="DropdownDivider";const PN=b.forwardRef(({className:n,bsPrefix:e,as:t="div",role:s="heading",...a},c)=>(e=Ee(e,"dropdown-header"),l.jsx(t,{ref:c,className:ye(n,e),role:s,...a})));PN.displayName="DropdownHeader";const LN=b.forwardRef(({bsPrefix:n,className:e,eventKey:t,disabled:s=!1,onClick:a,active:c,as:d=Uf,...m},p)=>{const g=Ee(n,"dropdown-item"),[y,x]=DN({key:t,href:m.href,disabled:s,onClick:a,active:c});return l.jsx(d,{...m,...y,ref:p,className:ye(e,g,x.isActive&&"active",s&&"disabled")})});LN.displayName="DropdownItem";const VN=b.forwardRef(({className:n,bsPrefix:e,as:t="span",...s},a)=>(e=Ee(e,"dropdown-item-text"),l.jsx(t,{ref:a,className:ye(n,e),...s})));VN.displayName="DropdownItemText";const Py=b.createContext(null);Py.displayName="InputGroupContext";function zN(n,e){return n}function UN(n,e,t){const s=t?"top-end":"top-start",a=t?"top-start":"top-end",c=t?"bottom-end":"bottom-start",d=t?"bottom-start":"bottom-end",m=t?"right-start":"left-start",p=t?"right-end":"left-end",g=t?"left-start":"right-start",y=t?"left-end":"right-end";let x=n?d:c;return e==="up"?x=n?a:s:e==="end"?x=n?y:g:e==="start"?x=n?p:m:e==="down-centered"?x="bottom":e==="up-centered"&&(x="top"),x}const BN=b.forwardRef(({bsPrefix:n,className:e,align:t,rootCloseEvent:s,flip:a=!0,show:c,renderOnMount:d,as:m="div",popperConfig:p,variant:g,...y},x)=>{let T=!1;const S=b.useContext(co),j=Ee(n,"dropdown-menu"),{align:k,drop:I,isRTL:Y}=b.useContext(ky);t=t||k;const $=b.useContext(Py),B=[];if(t)if(typeof t=="object"){const P=Object.keys(t);if(P.length){const L=P[0],C=t[L];T=C==="start",B.push(`${j}-${L}-${C}`)}}else t==="end"&&(T=!0);const q=UN(T,I,Y),[H,{hasShown:K,popper:M,show:N,toggle:O}]=SN({flip:a,rootCloseEvent:s,show:c,usePopper:!S&&B.length===0,offset:[0,2],popperConfig:p,placement:q});if(H.ref=qf(zN(x),H.ref),tN(()=>{N&&M?.update()},[N]),!K&&!d&&!$)return null;typeof m!="string"&&(H.show=N,H.close=()=>O?.(!1),H.align=t);let D=y.style;return M!=null&&M.placement&&(D={...y.style,...H.style},y["x-placement"]=M.placement),l.jsx(m,{...y,...H,style:D,...(B.length||S)&&{"data-bs-popper":"static"},className:ye(e,j,N&&"show",T&&`${j}-end`,g&&`${j}-${g}`,...B)})});BN.displayName="DropdownMenu";const Oe=b.forwardRef(({as:n,bsPrefix:e,variant:t="primary",size:s,active:a=!1,disabled:c=!1,className:d,...m},p)=>{const g=Ee(e,"btn"),[y,{tagName:x}]=gy({tagName:n,disabled:c,...m}),T=x;return l.jsx(T,{...y,...m,ref:p,disabled:c,className:ye(d,g,a&&"active",t&&`${g}-${t}`,s&&`${g}-${s}`,m.href&&c&&"disabled")})});Oe.displayName="Button";const qN=b.forwardRef(({bsPrefix:n,split:e,className:t,childBsPrefix:s,as:a=Oe,...c},d)=>{const m=Ee(n,"dropdown-toggle"),p=b.useContext(Gf);s!==void 0&&(c.bsPrefix=s);const[g]=IN();return g.ref=qf(g.ref,zN(d)),l.jsx(a,{className:ye(t,m,e&&`${m}-split`,p?.show&&"show"),...g,...c})});qN.displayName="DropdownToggle";const FN=b.forwardRef((n,e)=>{const{bsPrefix:t,drop:s="down",show:a,className:c,align:d="start",onSelect:m,onToggle:p,focusFirstItemOnShow:g,as:y="div",navbar:x,autoClose:T=!0,...S}=lo(n,{show:"onToggle"}),j=b.useContext(Py),k=Ee(t,"dropdown"),I=UA(),Y=M=>T===!1?M==="click":T==="inside"?M!=="rootClose":T==="outside"?M!=="select":!0,$=Zs((M,N)=>{var O;!((O=N.originalEvent)==null||(O=O.target)==null)&&O.classList.contains("dropdown-toggle")&&N.source==="mousedown"||(N.originalEvent.currentTarget===document&&(N.source!=="keydown"||N.originalEvent.key==="Escape")&&(N.source="rootClose"),Y(N.source)&&p?.(M,N))}),q=UN(d==="end",s,I),H=b.useMemo(()=>({align:d,drop:s,isRTL:I}),[d,s,I]),K={down:k,"down-centered":`${k}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return l.jsx(ky.Provider,{value:H,children:l.jsx(Yu,{placement:q,show:a,onSelect:m,onToggle:$,focusFirstItemOnShow:g,itemSelector:`.${k}-item:not(.disabled):not(:disabled)`,children:j?S.children:l.jsx(y,{...S,ref:e,className:ye(c,a&&"show",K[s])})})})});FN.displayName="Dropdown";const Ga=Object.assign(FN,{Toggle:qN,Menu:BN,Item:LN,ItemText:VN,Divider:kN,Header:PN}),HN=b.forwardRef(({id:n,title:e,children:t,bsPrefix:s,className:a,rootCloseEvent:c,menuRole:d,disabled:m,active:p,renderMenuOnMount:g,menuVariant:y,...x},T)=>{const S=Ee(void 0,"nav-item");return l.jsxs(Ga,{ref:T,...x,className:ye(a,S),children:[l.jsx(Ga.Toggle,{id:n,eventKey:null,active:p,disabled:m,childBsPrefix:s,as:Bf,children:e}),l.jsx(Ga.Menu,{role:d,renderOnMount:g,rootCloseEvent:c,variant:y,children:t})]})});HN.displayName="NavDropdown";const Bs=Object.assign(HN,{Item:Ga.Item,ItemText:Ga.ItemText,Divider:Ga.Divider,Header:Ga.Header}),Kz={type:An.string,tooltip:An.bool,as:An.elementType},Qf=b.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:s=!1,...a},c)=>l.jsx(n,{...a,ref:c,className:ye(e,`${t}-${s?"tooltip":"feedback"}`)}));Qf.displayName="Feedback";Qf.propTypes=Kz;const er=b.createContext({}),Ly=b.forwardRef(({id:n,bsPrefix:e,className:t,type:s="checkbox",isValid:a=!1,isInvalid:c=!1,as:d="input",...m},p)=>{const{controlId:g}=b.useContext(er);return e=Ee(e,"form-check-input"),l.jsx(d,{...m,ref:p,type:s,id:n||g,className:ye(t,e,a&&"is-valid",c&&"is-invalid")})});Ly.displayName="FormCheckInput";const cf=b.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...s},a)=>{const{controlId:c}=b.useContext(er);return n=Ee(n,"form-check-label"),l.jsx("label",{...s,ref:a,htmlFor:t||c,className:ye(e,n)})});cf.displayName="FormCheckLabel";function LT(n,e){let t=0;return b.Children.map(n,s=>b.isValidElement(s)?e(s,t++):s)}function Qz(n,e){let t=0;b.Children.forEach(n,s=>{b.isValidElement(s)&&e(s,t++)})}function Yz(n,e){return b.Children.toArray(n).some(t=>b.isValidElement(t)&&t.type===e)}const $N=b.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:s=!1,reverse:a=!1,disabled:c=!1,isValid:d=!1,isInvalid:m=!1,feedbackTooltip:p=!1,feedback:g,feedbackType:y,className:x,style:T,title:S="",type:j="checkbox",label:k,children:I,as:Y="input",...$},B)=>{e=Ee(e,"form-check"),t=Ee(t,"form-switch");const{controlId:q}=b.useContext(er),H=b.useMemo(()=>({controlId:n||q}),[q,n]),K=!I&&k!=null&&k!==!1||Yz(I,cf),M=l.jsx(Ly,{...$,type:j==="switch"?"checkbox":j,ref:B,isValid:d,isInvalid:m,disabled:c,as:Y});return l.jsx(er.Provider,{value:H,children:l.jsx("div",{style:T,className:ye(x,K&&e,s&&`${e}-inline`,a&&`${e}-reverse`,j==="switch"&&t),children:I||l.jsxs(l.Fragment,{children:[M,K&&l.jsx(cf,{title:S,children:k}),g&&l.jsx(Qf,{type:y,tooltip:p,children:g})]})})})});$N.displayName="FormCheck";const uf=Object.assign($N,{Input:Ly,Label:cf}),GN=b.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:s,id:a,className:c,isValid:d=!1,isInvalid:m=!1,plaintext:p,readOnly:g,as:y="input",...x},T)=>{const{controlId:S}=b.useContext(er);return n=Ee(n,"form-control"),l.jsx(y,{...x,type:e,size:s,ref:T,readOnly:g,id:a||S,className:ye(c,p?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,d&&"is-valid",m&&"is-invalid")})});GN.displayName="FormControl";const Vy=Object.assign(GN,{Feedback:Qf}),KN=b.forwardRef(({className:n,bsPrefix:e,as:t="div",...s},a)=>(e=Ee(e,"form-floating"),l.jsx(t,{ref:a,className:ye(n,e),...s})));KN.displayName="FormFloating";const zy=b.forwardRef(({controlId:n,as:e="div",...t},s)=>{const a=b.useMemo(()=>({controlId:n}),[n]);return l.jsx(er.Provider,{value:a,children:l.jsx(e,{...t,ref:s})})});zy.displayName="FormGroup";function Xz({as:n,bsPrefix:e,className:t,...s}){e=Ee(e,"col");const a=VA(),c=zA(),d=[],m=[];return a.forEach(p=>{const g=s[p];delete s[p];let y,x,T;typeof g=="object"&&g!=null?{span:y,offset:x,order:T}=g:y=g;const S=p!==c?`-${p}`:"";y&&d.push(y===!0?`${e}${S}`:`${e}${S}-${y}`),T!=null&&m.push(`order${S}-${T}`),x!=null&&m.push(`offset${S}-${x}`)}),[{...s,className:ye(t,...d,...m)},{as:n,bsPrefix:e,spans:d}]}const fe=b.forwardRef((n,e)=>{const[{className:t,...s},{as:a="div",bsPrefix:c,spans:d}]=Xz(n);return l.jsx(a,{...s,ref:e,className:ye(t,!d.length&&c)})});fe.displayName="Col";const QN=b.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:s=!1,className:a,htmlFor:c,...d},m)=>{const{controlId:p}=b.useContext(er);e=Ee(e,"form-label");let g="col-form-label";typeof t=="string"&&(g=`${g} ${g}-${t}`);const y=ye(a,e,s&&"visually-hidden",t&&g);return c=c||p,t?l.jsx(fe,{ref:m,as:"label",className:y,htmlFor:c,...d}):l.jsx(n,{ref:m,className:y,htmlFor:c,...d})});QN.displayName="FormLabel";const YN=b.forwardRef(({bsPrefix:n,className:e,id:t,...s},a)=>{const{controlId:c}=b.useContext(er);return n=Ee(n,"form-range"),l.jsx("input",{...s,type:"range",ref:a,className:ye(e,n),id:t||c})});YN.displayName="FormRange";const XN=b.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:s,isValid:a=!1,isInvalid:c=!1,id:d,...m},p)=>{const{controlId:g}=b.useContext(er);return n=Ee(n,"form-select"),l.jsx("select",{...m,size:t,ref:p,className:ye(s,n,e&&`${n}-${e}`,a&&"is-valid",c&&"is-invalid"),id:d||g})});XN.displayName="FormSelect";const WN=b.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:s,...a},c)=>(n=Ee(n,"form-text"),l.jsx(t,{...a,ref:c,className:ye(e,n,s&&"text-muted")})));WN.displayName="FormText";const ZN=b.forwardRef((n,e)=>l.jsx(uf,{...n,ref:e,type:"switch"}));ZN.displayName="Switch";const Wz=Object.assign(ZN,{Input:uf.Input,Label:uf.Label}),JN=b.forwardRef(({bsPrefix:n,className:e,children:t,controlId:s,label:a,...c},d)=>(n=Ee(n,"form-floating"),l.jsxs(zy,{ref:d,className:ye(e,n),controlId:s,...c,children:[t,l.jsx("label",{htmlFor:s,children:a})]})));JN.displayName="FloatingLabel";const Zz={_ref:An.any,validated:An.bool,as:An.elementType},Uy=b.forwardRef(({className:n,validated:e,as:t="form",...s},a)=>l.jsx(t,{...s,ref:a,className:ye(n,e&&"was-validated")}));Uy.displayName="Form";Uy.propTypes=Zz;const V=Object.assign(Uy,{Group:zy,Control:Vy,Floating:KN,Check:uf,Switch:Wz,Label:QN,Text:WN,Range:YN,Select:XN,FloatingLabel:JN});function Jz(){const[n,e]=b.useState(""),t=Yt(),s=a=>{a.preventDefault();const c=n.trim();t(`/studente/scopri${c?`?q=${encodeURIComponent(c)}`:""}`)};return l.jsx(Br,{expand:"lg",className:"mb-4 glass-nav",children:l.jsxs(st,{fluid:!0,className:"px-0",children:[l.jsx(Br.Brand,{as:Re,to:"/studente",children:"AI-Learning  Studente"}),l.jsx(Br.Toggle,{"aria-controls":"navbar-nav"}),l.jsxs(Br.Collapse,{id:"navbar-nav",children:[l.jsxs(Xi,{className:"nav-bar",children:[l.jsx(Xi.Link,{as:Re,to:"/studente/scopri",children:"Scopri"}),l.jsx(Xi.Link,{as:Re,to:"/studente/corsi",children:"I miei corsi"}),l.jsx(Xi.Link,{as:Re,to:"/studente/profilo",children:"Profilo"}),l.jsxs(Bs,{title:"Altro",id:"basic-nav-dropdown",children:[l.jsx(Bs.Item,{as:Re,to:"faq",children:"FAQ"}),l.jsx(Bs.Divider,{}),l.jsx(Bs.Item,{as:Re,to:"/logout",children:"Logout"})]})]}),l.jsxs(V,{className:"d-flex ms-auto",onSubmit:s,children:[l.jsx(Vy,{type:"search",placeholder:"Cerca...",className:"me-2","aria-label":"Cerca",value:n,onChange:a=>e(a.target.value)}),l.jsx(Oe,{type:"submit",className:"btn-cerca",variant:"outline-primary",children:"Cerca"})]})]})]})})}function as({variant:n="embedded",showHeader:e=!1,placeholder:t="Fai una domanda...",expandable:s=!0}){const[a,c]=b.useState([]),[d,m]=b.useState(""),p=b.useRef(null),[g,y]=b.useState(!1);b.useEffect(()=>{const j=p.current;j&&(j.scrollTop=j.scrollHeight)},[a,g]),b.useEffect(()=>{if(!g)return;const j=k=>{k.key==="Escape"&&y(!1)};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[g]);const x=j=>{j.preventDefault(),d.trim()&&(c(k=>[...k,{from:"user",text:d}]),m(""),setTimeout(()=>{const k="Risposta generica del bot";c(I=>[...I,{from:"bot",text:k}])},300))},T=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),x(j))},S=l.jsxs(l.Fragment,{children:[e&&l.jsxs("div",{className:"chat-header",children:[l.jsx("span",{children:"ChatAI"}),s&&!g&&l.jsx("button",{type:"button",className:"chat-icon-button","aria-label":"Apri in popup",onClick:()=>y(!0),title:"Apri in popup",children:""})]}),l.jsx("div",{className:"messages",ref:p,"aria-live":"polite",children:a.map((j,k)=>l.jsx("div",{className:`message ${j.from}`,children:j.text},k))}),l.jsxs("form",{className:"input-form",onSubmit:x,children:[l.jsx("textarea",{className:"chat-input",placeholder:t,value:d,onChange:j=>m(j.target.value),onKeyDown:T,rows:1}),l.jsx("button",{type:"submit",className:"send-button","aria-label":"Invia",children:""})]})]});return l.jsxs("div",{className:`chat-box ${n==="standalone"?"standalone":"embedded"}`,children:[S,s&&g&&HT.createPortal(l.jsx("div",{className:"chat-modal-backdrop",role:"dialog","aria-modal":"true",children:l.jsxs("div",{className:"chat-modal",role:"document",children:[l.jsx("button",{type:"button",className:"chat-close-button","aria-label":"Chiudi popup",onClick:()=>y(!1),title:"Chiudi",children:""}),l.jsx("div",{className:"chat-modal-body",children:l.jsx("div",{className:"chat-box standalone",children:S})})]})}),document.body)]})}const e4=""+new URL("hero-illustration-StudentApp-Do_SDbUG.png",import.meta.url).href;function t4(){const n=Oi(),e=Yt(),t=n.pathname==="/studente",s=b.useRef(null),[a,c]=b.useState(420);return b.useEffect(()=>{const d=()=>{if(s.current){const p=Math.round(s.current.getBoundingClientRect().height);p>0&&c(p)}};let m=null;return typeof ResizeObserver<"u"&&s.current&&(m=new ResizeObserver(()=>d()),m.observe(s.current)),d(),window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d),m&&s.current&&m.unobserve(s.current)}},[]),l.jsxs(l.Fragment,{children:[l.jsx(Jz,{}),l.jsx("main",{className:t?"landing":"",children:t?l.jsxs("section",{className:"landing-stickyLayout",children:[l.jsxs("div",{className:"landing-col-left",children:[l.jsx("div",{className:"landing-hero",children:l.jsxs("div",{className:"landing-hero-inner",children:[l.jsx("h1",{className:"landing-title",children:"Impara pi velocemente"}),l.jsx("p",{className:"landing-subtitle",children:"LAI risponde alle tue domande sui materiali del corso: PDF, slide e video."}),l.jsxs("div",{className:"landing-cta",children:[l.jsx("button",{className:"landing-btn primary",onClick:()=>e("/studente/corsi"),children:"I miei corsi"}),l.jsx("button",{className:"landing-btn outline",onClick:()=>e("/studente/scopri"),children:"Scopri nuovi corsi"})]})]})}),l.jsxs("div",{className:"landing-demo",id:"demo",children:[l.jsx("h2",{className:"landing-title",children:"Prova la Chat AI"}),l.jsx("p",{className:"landing-subtitle",children:"Scrivi una domanda come faresti al docente e ricevi risposte contestuali ai tuoi contenuti."}),l.jsx("div",{className:"chat-container",children:l.jsx(as,{variant:"standalone",showHeader:!0,placeholder:"Chiedi alla ChatAI..."})})]}),l.jsxs("section",{className:"landing-section landing-benefits",children:[l.jsx("h2",{className:"landing-heading",children:"Benefici per lo studente"}),l.jsxs("ul",{className:"landing-benefitList",children:[l.jsx("li",{children:" Risparmio di tempo nello studio"}),l.jsx("li",{children:" Risposte contestuali ai propri materiali (PDF, video, slide)"}),l.jsx("li",{children:" Supporto 24/7 senza dipendere dal docente"}),l.jsx("li",{children:" Rivedi le domande frequenti degli altri studenti"})]})]}),l.jsxs("section",{className:"landing-section landing-features",children:[l.jsx("h2",{className:"landing-heading",children:"Caratteristiche principali"}),l.jsxs("div",{className:"landing-featureGrid",children:[l.jsx("div",{className:"landing-featureCard",children:" Materiali sempre disponibili"}),l.jsx("div",{className:"landing-featureCard",children:" Domande in linguaggio naturale"}),l.jsx("div",{className:"landing-featureCard",children:" Accedi da qualsiasi dispositivo"}),l.jsx("div",{className:"landing-featureCard",children:" Progressi salvati automaticamente"})]})]}),l.jsxs("section",{className:"landing-section landing-testimonials",children:[l.jsx("h2",{className:"landing-heading",children:"Cosa dicono gli studenti"}),l.jsxs("div",{className:"landing-testimonialsGrid",children:[l.jsxs("figure",{className:"landing-quote",children:[l.jsx("blockquote",{children:"Maria, Informatica: -30% sui tempi di preparazione agli esami."}),l.jsx("figcaption",{children:" Caso reale, sessione estiva"})]}),l.jsxs("figure",{className:"landing-quote",children:[l.jsx("blockquote",{children:"Con la chat AI mi sento seguito anche fuori dagli orari di lezione."}),l.jsx("figcaption",{children:" Studente triennale"})]}),l.jsxs("figure",{className:"landing-quote",children:[l.jsx("blockquote",{children:"Grazie allapp ho capito meglio concetti complessi senza dover aspettare le esercitazioni."}),l.jsx("figcaption",{children:" Marco, Ingegneria"})]}),l.jsxs("figure",{className:"landing-quote",children:[l.jsx("blockquote",{children:"Ho potuto ripassare le slide del corso con spiegazioni personalizzate, come se fosse un tutor privato."}),l.jsx("figcaption",{children:" Giulia, Medicina"})]}),l.jsxs("figure",{className:"landing-quote",children:[l.jsx("blockquote",{children:"Finalmente posso studiare quando voglio: anche di notte ho sempre risposte puntuali."}),l.jsx("figcaption",{children:" Luca, Economia"})]}),l.jsxs("figure",{className:"landing-quote",children:[l.jsx("blockquote",{children:"La funzione FAQ mi ha fatto risparmiare tempo, trovando subito le domande che facevano anche i miei colleghi."}),l.jsx("figcaption",{children:" Sara, Giurisprudenza"})]})]})]}),l.jsxs("section",{className:"landing-section landing-faq",children:[l.jsx("h2",{className:"landing-heading",children:"FAQ"}),l.jsxs("details",{className:"landing-faqItem",children:[l.jsx("summary",{children:"I dati sono sicuri?"}),l.jsx("p",{children:"I materiali sono trattati secondo le normative sulla privacy e non sono condivisi senza consenso."})]}),l.jsxs("details",{className:"landing-faqItem",children:[l.jsx("summary",{children:"Posso caricare qualsiasi tipo di file?"}),l.jsx("p",{children:"Supportiamo PDF, video, slide e testi. Altri formati arriveranno presto."})]}),l.jsxs("details",{className:"landing-faqItem",children:[l.jsx("summary",{children:" compatibile con il mio corso?"}),l.jsx("p",{children:"S, lapp si adatta a corsi universitari e scolastici di qualunque disciplina."})]}),l.jsx("div",{className:"landing-faqButtonWrapper",children:l.jsx("button",{className:"landing-btn primary",onClick:()=>e("/studente/faq"),children:"Vai alla sezione FAQ"})})]})]}),l.jsx("div",{className:"landing-col-right",children:l.jsx("div",{className:"landing-imageCard",children:l.jsx("img",{ref:s,src:e4,alt:"Studente che impara online"})})})]}):l.jsx(mf,{})})]})}const By=b.forwardRef(({className:n,bsPrefix:e,as:t="div",...s},a)=>(e=Ee(e,"card-body"),l.jsx(t,{ref:a,className:ye(n,e),...s})));By.displayName="CardBody";const ej=b.forwardRef(({className:n,bsPrefix:e,as:t="div",...s},a)=>(e=Ee(e,"card-footer"),l.jsx(t,{ref:a,className:ye(n,e),...s})));ej.displayName="CardFooter";const tj=b.forwardRef(({bsPrefix:n,className:e,as:t="div",...s},a)=>{const c=Ee(n,"card-header"),d=b.useMemo(()=>({cardHeaderBsPrefix:c}),[c]);return l.jsx(_y.Provider,{value:d,children:l.jsx(t,{ref:a,...s,className:ye(e,c)})})});tj.displayName="CardHeader";const nj=b.forwardRef(({bsPrefix:n,className:e,variant:t,as:s="img",...a},c)=>{const d=Ee(n,"card-img");return l.jsx(s,{ref:c,className:ye(t?`${d}-${t}`:d,e),...a})});nj.displayName="CardImg";const ij=b.forwardRef(({className:n,bsPrefix:e,as:t="div",...s},a)=>(e=Ee(e,"card-img-overlay"),l.jsx(t,{ref:a,className:ye(n,e),...s})));ij.displayName="CardImgOverlay";const sj=b.forwardRef(({className:n,bsPrefix:e,as:t="a",...s},a)=>(e=Ee(e,"card-link"),l.jsx(t,{ref:a,className:ye(n,e),...s})));sj.displayName="CardLink";const n4=Gu("h6"),rj=b.forwardRef(({className:n,bsPrefix:e,as:t=n4,...s},a)=>(e=Ee(e,"card-subtitle"),l.jsx(t,{ref:a,className:ye(n,e),...s})));rj.displayName="CardSubtitle";const aj=b.forwardRef(({className:n,bsPrefix:e,as:t="p",...s},a)=>(e=Ee(e,"card-text"),l.jsx(t,{ref:a,className:ye(n,e),...s})));aj.displayName="CardText";const i4=Gu("h5"),oj=b.forwardRef(({className:n,bsPrefix:e,as:t=i4,...s},a)=>(e=Ee(e,"card-title"),l.jsx(t,{ref:a,className:ye(n,e),...s})));oj.displayName="CardTitle";const lj=b.forwardRef(({bsPrefix:n,className:e,bg:t,text:s,border:a,body:c=!1,children:d,as:m="div",...p},g)=>{const y=Ee(n,"card");return l.jsx(m,{ref:g,...p,className:ye(e,y,t&&`bg-${t}`,s&&`text-${s}`,a&&`border-${a}`),children:c?l.jsx(By,{children:d}):d})});lj.displayName="Card";const ce=Object.assign(lj,{Img:nj,Title:oj,Subtitle:rj,Body:By,Link:sj,Text:aj,Header:tj,Footer:ej,ImgOverlay:ij}),il=""+new URL("PlaceholderStudentCourse-CTKUpAN7.png",import.meta.url).href,s4=[{id:1,title:"Programmazione I",description:"Studio dei fondamenti della programmazione imperativa e orientata agli oggetti. Approfondisce strutture dati, algoritmi, gestione della memoria e debugging.",image:il},{id:2,title:"Interazione Uomo-Macchina",description:"Analisi dei principi per progettare interfacce usabili ed efficaci. Include ergonomia, progettazione centrata sullutente, prototipazione e valutazione dellusabilit.",image:il},{id:3,title:"Basi di Dati",description:"Insegna a modellare, progettare e interrogare basi di dati relazionali. Comprende SQL, normalizzazione, transazioni e gestione dei dati persistenti.",image:il},{id:4,title:"Ingegneria della conoscenza",description:"Tratta la modellazione della conoscenza e luso di sistemi intelligenti. Include rappresentazione simbolica, apprendimento automatico e ragionamento incerto",image:il},{id:5,title:"Architettura degli elaboratori",description:"Esplora la struttura interna dei calcolatori: CPU, memoria, bus, input/output. Introduce anche linguaggi a basso livello e funzionamento logico dellhardware.",image:il},{id:6,title:"Metodi per il ritrovamento dell'informazione",description:"Studio dei sistemi per cercare, filtrare e classificare documenti. Copre modelli booleani, vettoriali, ranking e metodi per valutare la qualit dei risultati.",image:il}],VT=(n,e)=>n.length>e?n.slice(0,e-1)+"":n;function r4(){return l.jsxs("section",{className:"course-section",children:[l.jsx("h2",{className:"section-title",children:"Recentemente seguiti:"}),l.jsx("div",{className:"carousel-wrapper",children:l.jsx("div",{className:"card-carousel",children:s4.map(n=>l.jsxs(ce,{className:"course-card",children:[l.jsx(ce.Img,{variant:"top",src:n.image}),l.jsxs(ce.Body,{className:"card-body",children:[l.jsx(ce.Title,{children:VT(n.title,30)}),l.jsx(ce.Text,{children:VT(n.description,90)}),l.jsx(Oe,{variant:"primary",children:"Vai al corso"})]})]},n.id))})})]})}function cj(n,e){return Array.isArray(n)?n.includes(e):n===e}const Xu=b.createContext({});Xu.displayName="AccordionContext";const qy=b.forwardRef(({as:n="div",bsPrefix:e,className:t,children:s,eventKey:a,...c},d)=>{const{activeEventKey:m}=b.useContext(Xu);return e=Ee(e,"accordion-collapse"),l.jsx(Ty,{ref:d,in:cj(m,a),...c,className:ye(t,e),children:l.jsx(n,{children:b.Children.only(s)})})});qy.displayName="AccordionCollapse";const Yf=b.createContext({eventKey:""});Yf.displayName="AccordionItemContext";const uj=b.forwardRef(({as:n="div",bsPrefix:e,className:t,onEnter:s,onEntering:a,onEntered:c,onExit:d,onExiting:m,onExited:p,...g},y)=>{e=Ee(e,"accordion-body");const{eventKey:x}=b.useContext(Yf);return l.jsx(qy,{eventKey:x,onEnter:s,onEntering:a,onEntered:c,onExit:d,onExiting:m,onExited:p,children:l.jsx(n,{ref:y,...g,className:ye(t,e)})})});uj.displayName="AccordionBody";function a4(n,e){const{activeEventKey:t,onSelect:s,alwaysOpen:a}=b.useContext(Xu);return c=>{let d=n===t?null:n;a&&(Array.isArray(t)?t.includes(n)?d=t.filter(m=>m!==n):d=[...t,n]:d=[n]),s?.(d,c),e?.(c)}}const Fy=b.forwardRef(({as:n="button",bsPrefix:e,className:t,onClick:s,...a},c)=>{e=Ee(e,"accordion-button");const{eventKey:d}=b.useContext(Yf),m=a4(d,s),{activeEventKey:p}=b.useContext(Xu);return n==="button"&&(a.type="button"),l.jsx(n,{ref:c,onClick:m,...a,"aria-expanded":Array.isArray(p)?p.includes(d):d===p,className:ye(t,e,!cj(p,d)&&"collapsed")})});Fy.displayName="AccordionButton";const dj=b.forwardRef(({as:n="h2","aria-controls":e,bsPrefix:t,className:s,children:a,onClick:c,...d},m)=>(t=Ee(t,"accordion-header"),l.jsx(n,{ref:m,...d,className:ye(s,t),children:l.jsx(Fy,{onClick:c,"aria-controls":e,children:a})})));dj.displayName="AccordionHeader";const hj=b.forwardRef(({as:n="div",bsPrefix:e,className:t,eventKey:s,...a},c)=>{e=Ee(e,"accordion-item");const d=b.useMemo(()=>({eventKey:s}),[s]);return l.jsx(Yf.Provider,{value:d,children:l.jsx(n,{ref:c,...a,className:ye(t,e)})})});hj.displayName="AccordionItem";const fj=b.forwardRef((n,e)=>{const{as:t="div",activeKey:s,bsPrefix:a,className:c,onSelect:d,flush:m,alwaysOpen:p,...g}=lo(n,{activeKey:"onSelect"}),y=Ee(a,"accordion"),x=b.useMemo(()=>({activeEventKey:s,onSelect:d,alwaysOpen:p}),[s,d,p]);return l.jsx(Xu.Provider,{value:x,children:l.jsx(t,{ref:e,...g,className:ye(c,y,m&&`${y}-flush`)})})});fj.displayName="Accordion";const vi=Object.assign(fj,{Button:Fy,Collapse:qy,Item:hj,Header:dj,Body:uj}),mj=Gu("h4");mj.displayName="DivStyledAsH4";const pj=b.forwardRef(({className:n,bsPrefix:e,as:t=mj,...s},a)=>(e=Ee(e,"alert-heading"),l.jsx(t,{ref:a,className:ye(n,e),...s})));pj.displayName="AlertHeading";const gj=b.forwardRef(({className:n,bsPrefix:e,as:t=Uf,...s},a)=>(e=Ee(e,"alert-link"),l.jsx(t,{ref:a,className:ye(n,e),...s})));gj.displayName="AlertLink";const vj=b.forwardRef((n,e)=>{const{bsPrefix:t,show:s=!0,closeLabel:a="Close alert",closeVariant:c,className:d,children:m,variant:p="primary",onClose:g,dismissible:y,transition:x=na,...T}=lo(n,{show:"onClose"}),S=Ee(t,"alert"),j=Zs(Y=>{g&&g(!1,Y)}),k=x===!0?na:x,I=l.jsxs("div",{role:"alert",...k?void 0:T,ref:e,className:ye(d,S,p&&`${S}-${p}`,y&&`${S}-dismissible`),children:[y&&l.jsx($f,{onClick:j,"aria-label":a,variant:c}),m]});return k?l.jsx(k,{unmountOnExit:!0,...T,ref:void 0,in:s,children:I}):s?I:null});vj.displayName="Alert";const df=Object.assign(vj,{Link:gj,Heading:pj}),Ye=b.forwardRef(({bsPrefix:n,bg:e="primary",pill:t=!1,text:s,className:a,as:c="span",...d},m)=>{const p=Ee(n,"badge");return l.jsx(c,{ref:m,...d,className:ye(a,p,t&&"rounded-pill",s&&`text-${s}`,e&&`bg-${e}`)})});Ye.displayName="Badge";function o4(n){const e=b.useRef(n);return e.current=n,e}function l4(n){const e=o4(n);b.useEffect(()=>()=>e.current(),[])}const yj=b.forwardRef(({bsPrefix:n,active:e,disabled:t,eventKey:s,className:a,variant:c,action:d,as:m,...p},g)=>{n=Ee(n,"list-group-item");const[y,x]=yy({key:ta(s,p.href),active:e,...p}),T=Zs(j=>{if(t){j.preventDefault(),j.stopPropagation();return}y.onClick(j)});t&&p.tabIndex===void 0&&(p.tabIndex=-1,p["aria-disabled"]=!0);const S=m||(d?p.href?"a":"button":"div");return l.jsx(S,{ref:g,...p,...y,onClick:T,className:ye(a,n,x.isActive&&"active",t&&"disabled",c&&`${n}-${c}`,d&&`${n}-action`)})});yj.displayName="ListGroupItem";const _j=b.forwardRef((n,e)=>{const{className:t,bsPrefix:s,variant:a,horizontal:c,numbered:d,as:m="div",...p}=lo(n,{activeKey:"onSelect"}),g=Ee(s,"list-group");let y;return c&&(y=c===!0?"horizontal":`horizontal-${c}`),l.jsx($A,{ref:e,...p,as:m,className:ye(t,g,a&&`${g}-${a}`,y&&`${g}-${y}`,d&&`${g}-numbered`)})});_j.displayName="ListGroup";const hf=Object.assign(_j,{Item:yj});var Nh;function zT(n){if((!Nh&&Nh!==0||n)&&zl){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Nh=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Nh}function c4(){return b.useState(null)}const xj=b.forwardRef(({className:n,bsPrefix:e,as:t="div",...s},a)=>(e=Ee(e,"modal-body"),l.jsx(t,{ref:a,className:ye(n,e),...s})));xj.displayName="ModalBody";const Hy=b.forwardRef(({bsPrefix:n,className:e,contentClassName:t,centered:s,size:a,fullscreen:c,children:d,scrollable:m,...p},g)=>{n=Ee(n,"modal");const y=`${n}-dialog`,x=typeof c=="string"?`${n}-fullscreen-${c}`:`${n}-fullscreen`;return l.jsx("div",{...p,ref:g,className:ye(y,e,a&&`${n}-${a}`,s&&`${y}-centered`,m&&`${y}-scrollable`,c&&x),children:l.jsx("div",{className:ye(`${n}-content`,t),children:d})})});Hy.displayName="ModalDialog";const bj=b.forwardRef(({className:n,bsPrefix:e,as:t="div",...s},a)=>(e=Ee(e,"modal-footer"),l.jsx(t,{ref:a,className:ye(n,e),...s})));bj.displayName="ModalFooter";const Ej=b.forwardRef(({bsPrefix:n,className:e,closeLabel:t="Close",closeButton:s=!1,...a},c)=>(n=Ee(n,"modal-header"),l.jsx(Ny,{ref:c,...a,className:ye(e,n),closeLabel:t,closeButton:s})));Ej.displayName="ModalHeader";const u4=Gu("h4"),Tj=b.forwardRef(({className:n,bsPrefix:e,as:t=u4,...s},a)=>(e=Ee(e,"modal-title"),l.jsx(t,{ref:a,className:ye(n,e),...s})));Tj.displayName="ModalTitle";function d4(n){return l.jsx(na,{...n,timeout:null})}function h4(n){return l.jsx(na,{...n,timeout:null})}const wj=b.forwardRef(({bsPrefix:n,className:e,style:t,dialogClassName:s,contentClassName:a,children:c,dialogAs:d=Hy,"data-bs-theme":m,"aria-labelledby":p,"aria-describedby":g,"aria-label":y,show:x=!1,animation:T=!0,backdrop:S=!0,keyboard:j=!0,onEscapeKeyDown:k,onShow:I,onHide:Y,container:$,autoFocus:B=!0,enforceFocus:q=!0,restoreFocus:H=!0,restoreFocusOptions:K,onEntered:M,onExit:N,onExiting:O,onEnter:D,onEntering:P,onExited:L,backdropClassName:C,manager:ve,...we},X)=>{const[re,J]=b.useState({}),[me,z]=b.useState(!1),G=b.useRef(!1),ae=b.useRef(!1),ue=b.useRef(null),[pe,xe]=c4(),Se=qf(X,xe),rt=Zs(Y),Ue=UA();n=Ee(n,"modal");const St=b.useMemo(()=>({onHide:rt}),[rt]);function an(){return ve||uN({isRTL:Ue})}function Xt(Ne){if(!zl)return;const Be=an().getScrollbarWidth()>0,qt=Ne.scrollHeight>$u(Ne).documentElement.clientHeight;J({paddingRight:Be&&!qt?zT():void 0,paddingLeft:!Be&&qt?zT():void 0})}const vn=Zs(()=>{pe&&Xt(pe.dialog)});l4(()=>{dv(window,"resize",vn),ue.current==null||ue.current()});const yn=()=>{G.current=!0},_n=Ne=>{G.current&&pe&&Ne.target===pe.dialog&&(ae.current=!0),G.current=!1},nt=()=>{z(!0),ue.current=WA(pe.dialog,()=>{z(!1)})},ni=Ne=>{Ne.target===Ne.currentTarget&&nt()},jt=Ne=>{if(S==="static"){ni(Ne);return}if(ae.current||Ne.target!==Ne.currentTarget){ae.current=!1;return}Y?.()},ua=Ne=>{j?k?.(Ne):(Ne.preventDefault(),S==="static"&&nt())},hs=(Ne,Be)=>{Ne&&Xt(Ne),D?.(Ne,Be)},xn=Ne=>{ue.current==null||ue.current(),N?.(Ne)},kn=(Ne,Be)=>{P?.(Ne,Be),by(window,"resize",vn)},ir=Ne=>{Ne&&(Ne.style.display=""),L?.(Ne),dv(window,"resize",vn)},bi=b.useCallback(Ne=>l.jsx("div",{...Ne,className:ye(`${n}-backdrop`,C,!T&&"show")}),[T,C,n]),ii={...t,...re};ii.display="block";const fs=Ne=>l.jsx("div",{role:"dialog",...Ne,style:ii,className:ye(e,n,me&&`${n}-static`,!T&&"show"),onClick:S?jt:void 0,onMouseUp:_n,"data-bs-theme":m,"aria-label":y,"aria-labelledby":p,"aria-describedby":g,children:l.jsx(d,{...we,onMouseDown:yn,className:s,contentClassName:a,children:c})});return l.jsx(Ay.Provider,{value:St,children:l.jsx(sN,{show:x,ref:Se,backdrop:S,container:$,keyboard:!0,autoFocus:B,enforceFocus:q,restoreFocus:H,restoreFocusOptions:K,onEscapeKeyDown:ua,onShow:I,onHide:Y,onEnter:hs,onEntering:kn,onEntered:M,onExit:xn,onExiting:O,onExited:ir,manager:an(),transition:T?d4:void 0,backdropTransition:T?h4:void 0,renderBackdrop:bi,renderDialog:fs})})});wj.displayName="Modal";const gt=Object.assign(wj,{Body:xj,Header:Ej,Title:Tj,Footer:bj,Dialog:Hy,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),ze=b.forwardRef(({bsPrefix:n,className:e,as:t="div",...s},a)=>{const c=Ee(n,"row"),d=VA(),m=zA(),p=`${c}-cols`,g=[];return d.forEach(y=>{const x=s[y];delete s[y];let T;x!=null&&typeof x=="object"?{cols:T}=x:T=x;const S=y!==m?`-${y}`:"";T!=null&&g.push(`${p}${S}-${T}`)}),l.jsx(t,{ref:a,...s,className:ye(e,c,...g)})});ze.displayName="Row";const Sj=b.forwardRef(({bsPrefix:n,variant:e,animation:t="border",size:s,as:a="div",className:c,...d},m)=>{n=Ee(n,"spinner");const p=`${n}-${t}`;return l.jsx(a,{ref:m,...d,className:ye(c,p,s&&`${p}-${s}`,e&&`text-${e}`)})});Sj.displayName="Spinner";const f4=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],m4=["activeKey","getControlledId","getControllerId"],p4=["as"];function pv(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function Aj(n){let{active:e,eventKey:t,mountOnEnter:s,transition:a,unmountOnExit:c,role:d="tabpanel",onEnter:m,onEntering:p,onEntered:g,onExit:y,onExiting:x,onExited:T}=n,S=pv(n,f4);const j=b.useContext(Pl);if(!j)return[Object.assign({},S,{role:d}),{eventKey:t,isActive:e,mountOnEnter:s,transition:a,unmountOnExit:c,onEnter:m,onEntering:p,onEntered:g,onExit:y,onExiting:x,onExited:T}];const{activeKey:k,getControlledId:I,getControllerId:Y}=j,$=pv(j,m4),B=ta(t);return[Object.assign({},S,{role:d,id:I(t),"aria-labelledby":Y(t)}),{eventKey:t,isActive:e==null&&B!=null?ta(k)===B:e,transition:a||$.transition,mountOnEnter:s??$.mountOnEnter,unmountOnExit:c??$.unmountOnExit,onEnter:m,onEntering:p,onEntered:g,onExit:y,onExiting:x,onExited:T}]}const Nj=b.forwardRef((n,e)=>{let{as:t="div"}=n,s=pv(n,p4);const[a,{isActive:c,onEnter:d,onEntering:m,onEntered:p,onExit:g,onExiting:y,onExited:x,mountOnEnter:T,unmountOnExit:S,transition:j=Sy}]=Aj(s);return l.jsx(Pl.Provider,{value:null,children:l.jsx(ls.Provider,{value:null,children:l.jsx(j,{in:c,onEnter:d,onEntering:m,onEntered:p,onExit:g,onExiting:y,onExited:x,mountOnEnter:T,unmountOnExit:S,children:l.jsx(t,Object.assign({},a,{ref:e,hidden:!c,"aria-hidden":!c}))})})})});Nj.displayName="TabPanel";const $y=n=>{const{id:e,generateChildId:t,onSelect:s,activeKey:a,defaultActiveKey:c,transition:d,mountOnEnter:m,unmountOnExit:p,children:g}=n,[y,x]=pN(a,c,s),T=CN(e),S=b.useMemo(()=>t||((k,I)=>T?`${T}-${I}-${k}`:null),[T,t]),j=b.useMemo(()=>({onSelect:x,activeKey:y,transition:d,mountOnEnter:m||!1,unmountOnExit:p||!1,getControlledId:k=>S(k,"tabpane"),getControllerId:k=>S(k,"tab")}),[x,y,d,m,p,S]);return l.jsx(Pl.Provider,{value:j,children:l.jsx(ls.Provider,{value:x||null,children:g})})};$y.Panel=Nj;function Gy(n){return typeof n=="boolean"?n?na:Sy:n}const jj=({transition:n,...e})=>l.jsx($y,{...e,transition:Gy(n)});jj.displayName="TabContainer";const Ky=b.forwardRef(({className:n,bsPrefix:e,as:t="div",...s},a)=>(e=Ee(e,"tab-content"),l.jsx(t,{ref:a,className:ye(n,e),...s})));Ky.displayName="TabContent";const Qy=b.forwardRef(({bsPrefix:n,transition:e,...t},s)=>{const[{className:a,as:c="div",...d},{isActive:m,onEnter:p,onEntering:g,onEntered:y,onExit:x,onExiting:T,onExited:S,mountOnEnter:j,unmountOnExit:k,transition:I=na}]=Aj({...t,transition:Gy(e)}),Y=Ee(n,"tab-pane");return l.jsx(Pl.Provider,{value:null,children:l.jsx(ls.Provider,{value:null,children:l.jsx(I,{in:m,onEnter:p,onEntering:g,onEntered:y,onExit:x,onExiting:T,onExited:S,mountOnEnter:j,unmountOnExit:k,children:l.jsx(c,{...d,ref:s,className:ye(a,Y,m&&"active")})})})})});Qy.displayName="TabPane";const g4={eventKey:An.oneOfType([An.string,An.number]),title:An.node.isRequired,disabled:An.bool,tabClassName:An.string,tabAttrs:An.object},Cj=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};Cj.propTypes=g4;const gl=Object.assign(Cj,{Container:jj,Content:Ky,Pane:Qy}),Rj=b.forwardRef(({bsPrefix:n,className:e,striped:t,bordered:s,borderless:a,hover:c,size:d,variant:m,responsive:p,...g},y)=>{const x=Ee(n,"table"),T=ye(e,x,m&&`${x}-${m}`,d&&`${x}-${d}`,t&&`${x}-${typeof t=="string"?`striped-${t}`:"striped"}`,s&&`${x}-bordered`,a&&`${x}-borderless`,c&&`${x}-hover`),S=l.jsx("table",{...g,className:T,ref:y});if(p){let j=`${x}-responsive`;return typeof p=="string"&&(j=`${j}-${p}`),l.jsx("div",{className:j,children:S})}return S});Rj.displayName="Table";function v4(n){let e;return Qz(n,t=>{e==null&&(e=t.props.eventKey)}),e}function y4(n){const{title:e,eventKey:t,disabled:s,tabClassName:a,tabAttrs:c,id:d}=n.props;return e==null?null:l.jsx(xy,{as:"li",role:"presentation",children:l.jsx(Bf,{as:"button",type:"button",eventKey:t,disabled:s,id:d,className:a,...c,children:e})})}const Yy=n=>{const{id:e,onSelect:t,transition:s,mountOnEnter:a=!1,unmountOnExit:c=!1,variant:d="tabs",children:m,activeKey:p=v4(m),...g}=lo(n,{activeKey:"onSelect"});return l.jsxs($y,{id:e,activeKey:p,onSelect:t,transition:Gy(s),mountOnEnter:a,unmountOnExit:c,children:[l.jsx(Xi,{id:e,...g,role:"tablist",as:"ul",variant:d,children:LT(m,y4)}),l.jsx(Ky,{children:LT(m,y=>{const x={...y.props};return delete x.title,delete x.disabled,delete x.tabClassName,delete x.tabAttrs,l.jsx(Qy,{...x})})})]})};Yy.displayName="Tabs";const cs=[{id:1,titolo:"React Base",descrizione:"Fondamenti di React: JSX, componenti, props, state, lifecycle e hook.",stato:"attivo",instructor:"Mario Rossi",durata:"8 settimane",livello:"Principiante",tags:["React","JavaScript","Front-end"],imageUrl:"/assets/react-base.jpg",introduzione:{academicYear:"2024/2025",professor:"Prof./Prof.ssa [NOME COGNOME]",degree:"CdS in Informatica",semester:"primo semestre",credits:6,notes:"Le date e gli orari delle lezioni sono riportati nel manifesto/regolamento.",officeHoursTitle:"Ricevimento studenti",officeHours:"Marted dalle 12 alle 13 su appuntamento in studio/da remoto (prenotazione via email)."},sections:[{id:1,title:"Introduzione a React",description:"Panoramica sul framework e setup iniziale con Create React App.",lessons:[{id:1,title:"Cos React?",type:"video",duration:"10 min",fileTypes:["video"],description:"Panoramica sulle caratteristiche principali di React e sugli scenari in cui  vantaggioso."},{id:2,title:"JSX e Virtual DOM",type:"video",duration:"15 min",fileTypes:["video"],description:"Spiegazione di JSX, come viene compilato e il funzionamento del Virtual DOM."},{id:3,title:"Primo componente",type:"hands-on",duration:"20 min",fileTypes:["video","pdf"],description:"Creazione del primo componente React passo a passo, con esempi pratici."}]},{id:2,title:"State e Props",description:"Gestione dei dati e comunicazione fra componenti.",lessons:[{id:1,title:"Props immutabili",type:"reading",duration:"10 min",fileTypes:["pdf"],description:"Approfondimento sul concetto di props e sulla loro natura immutabile."},{id:2,title:"useState e useEffect",type:"video",duration:"18 min",fileTypes:["video"],description:"Utilizzo dei principali hook di React per gestire lo stato e gli effetti collaterali."},{id:3,title:"Esercizio pratico",type:"hands-on",duration:"25 min",fileTypes:["pdf"],description:"Esercizio guidato per applicare useState e useEffect in un componente funzionale."}]}]},{id:2,titolo:"AI e Machine Learning",descrizione:"Introduzione a modelli ML, Python, scikit-learn e integrazione con API AI.",stato:"completato",instructor:"Luisa Bianchi",durata:"10 settimane",livello:"Intermedio",tags:["AI","Machine Learning","Python"],imageUrl:"/assets/ai-ml.jpg",introduzione:{academicYear:"2024/2025",professor:"Prof./Prof.ssa [NOME COGNOME]",degree:"CdS in Informatica",semester:"primo semestre",credits:6,notes:"Le date e gli orari delle lezioni sono riportati nel manifesto/regolamento.",officeHoursTitle:"Ricevimento studenti",officeHours:"Marted dalle 12 alle 13 su appuntamento in studio/da remoto (prenotazione via email)."},sections:[{id:1,title:"Python per ML",description:"Setup ambiente, numpy e pandas per il data processing.",lessons:[{id:1,title:"Installazione e virtualenv",type:"hands-on",duration:"15 min",fileTypes:["pdf"],description:"Configurazione dellambiente Python e gestione delle virtualenv."},{id:2,title:"Manipolazione array",type:"video",duration:"20 min",fileTypes:["video"],description:"Lavorare con numpy per creare e manipolare array multidimensionali."},{id:3,title:"DataFrame con pandas",type:"video",duration:"25 min",fileTypes:["video"],description:"Introduzione a pandas e alle operazioni fondamentali sui DataFrame."}]},{id:2,title:"Modelli supervisionati",description:"Regressione e classificazione con scikit-learn.",lessons:[{id:1,title:"Regressione lineare",type:"reading",duration:"12 min",fileTypes:["pdf"],description:"Teoria della regressione lineare e implementazione con scikit-learn."},{id:2,title:"Classificazione k-NN",type:"video",duration:"18 min",fileTypes:["video"],description:"Spiegazione del k-NN e casi duso pratici per la classificazione."}]}]},{id:3,titolo:"Design UI/UX",descrizione:"Principi di design, wireframing, prototipazione e test di usabilit.",stato:"attivo",instructor:"Giulia Verdi",durata:"6 settimane",livello:"Principiante",tags:["UI","UX","Design"],imageUrl:"/assets/ui-ux.jpg",introduzione:{academicYear:"2024/2025",professor:"Prof./Prof.ssa [NOME COGNOME]",degree:"CdS in Informatica",semester:"primo semestre",credits:6,notes:"Le date e gli orari delle lezioni sono riportati nel manifesto/regolamento.",officeHoursTitle:"Ricevimento studenti",officeHours:"Marted dalle 12 alle 13 su appuntamento in studio/da remoto (prenotazione via email)."},sections:[{id:1,title:"Teoria del colore e tipografia",description:"Scelta palette e principi tipografici.",lessons:[{id:1,title:"Teoria del colore",type:"video",duration:"14 min",fileTypes:["video"],description:"Come scegliere palette cromatiche efficaci per il web."},{id:2,title:"Font e leggibilit",type:"reading",duration:"10 min",fileTypes:["pdf"],description:"Importanza della tipografia e best practice per il web."}]},{id:2,title:"Wireframe e prototipi",description:"Uso di Sketch e Figma per prototipi interattivi.",lessons:[{id:1,title:"Sketch Basics",type:"hands-on",duration:"30 min",fileTypes:["pdf"],description:"Primi passi con Sketch: strumenti e funzionalit principali."},{id:2,title:"Test di usabilit",type:"reading",duration:"12 min",fileTypes:["pdf"],description:"Metodologie per condurre test di usabilit con utenti reali."}]}]},{id:4,titolo:"Programmazione I",descrizione:"Fondamenti di programmazione imperativa e OOP in Java.",stato:"attivo",instructor:"Alessandro Neri",durata:"8 settimane",livello:"Principiante",tags:["Java","OOP","Programmazione"],imageUrl:"/assets/programmazione1.jpg",introduzione:{academicYear:"2024/2025",professor:"Prof./Prof.ssa [NOME COGNOME]",degree:"CdS in Informatica",semester:"primo semestre",credits:6,notes:"Le date e gli orari delle lezioni sono riportati nel manifesto/regolamento.",officeHoursTitle:"Ricevimento studenti",officeHours:"Marted dalle 12 alle 13 su appuntamento in studio/da remoto (prenotazione via email)."},sections:[{id:1,title:"Sintassi di base",description:"Variabili, tipi, operatori e controllo del flusso.",lessons:[{id:1,title:"Variabili e tipi",type:"video",duration:"15 min",fileTypes:["video"],description:"Definizione di variabili e tipi di dato in Java."},{id:2,title:"Condizionali e cicli",type:"hands-on",duration:"20 min",fileTypes:["pdf"],description:"Esercizi pratici con if, switch, for e while."}]},{id:2,title:"Classi e oggetti",description:"Incapsulamento, ereditariet e polimorfismo.",lessons:[{id:1,title:"Creare classi",type:"video",duration:"18 min",fileTypes:["video"],description:"Come definire classi e costruttori in Java."},{id:2,title:"Esercizio OOP",type:"hands-on",duration:"30 min",fileTypes:["pdf"],description:"Implementazione di un semplice esempio OOP."}]}]},{id:5,titolo:"Basi di Dati",descrizione:"Progettazione di basi relazionali, normalizzazione e SQL avanzato.",stato:"completato",instructor:"Francesca Russo",durata:"7 settimane",livello:"Intermedio",tags:["SQL","Database","Relazionale"],imageUrl:"/assets/basi-dati.jpg",introduzione:{academicYear:"2024/2025",professor:"Prof./Prof.ssa [NOME COGNOME]",degree:"CdS in Informatica",semester:"primo semestre",credits:6,notes:"Le date e gli orari delle lezioni sono riportati nel manifesto/regolamento.",officeHoursTitle:"Ricevimento studenti",officeHours:"Marted dalle 12 alle 13 su appuntamento in studio/da remoto (prenotazione via email)."},sections:[{id:1,title:"Modello relazionale",description:"Entit, relazioni, chiavi primarie e esterne.",lessons:[{id:1,title:"Diagrammi ER",type:"reading",duration:"12 min",fileTypes:["pdf"],description:"Creazione e lettura di diagrammi Entit-Relazione."},{id:2,title:"Normalizzazione",type:"video",duration:"18 min",fileTypes:["video"],description:"Principi di normalizzazione e forme normali."}]},{id:2,title:"Query avanzate",description:"JOIN, subquery, view, stored procedure.",lessons:[{id:1,title:"JOIN multipli",type:"hands-on",duration:"25 min",fileTypes:["pdf"],description:"Esercizi pratici con join tra pi tabelle."},{id:2,title:"Stored procedure",type:"video",duration:"15 min",fileTypes:["video"],description:"Creazione e utilizzo di stored procedure in SQL."}]}]}];function _4({corso:n}){return l.jsx(Re,{to:`/studente/corsi/${n.id}`,className:"text-decoration-none",children:l.jsxs(ce,{className:"h-100 glass-card clickable-card",children:[l.jsxs(ce.Body,{children:[l.jsx(ce.Title,{className:"courseTitle mb-1",id:"title",children:n.titolo}),l.jsxs("div",{className:"small text-muted mb-2",children:["Docente: ",n.instructor]}),n.descrizione&&l.jsx(ce.Text,{className:"mb-3",children:n.descrizione}),l.jsxs("div",{className:"course-meta mb-2 d-flex gap-2 flex-wrap",children:[Number.isFinite(n?.introduzione?.credits)&&l.jsxs(Ye,{bg:"light",text:"dark",children:[n.introduzione.credits," CFU"]}),n?.introduzione?.semester&&l.jsx(Ye,{bg:"light",text:"dark",children:n.introduzione.semester})]}),l.jsx("div",{className:"course-tags d-flex gap-2 flex-wrap",children:(n.tags||[]).slice(0,6).map(e=>l.jsxs(Ye,{bg:"light",text:"dark",children:["#",e]},e))})]}),l.jsx(ce.Footer,{children:l.jsx("small",{className:"text-muted",children:n.stato==="attivo"?"In corso":"Completato"})})]})})}function x4(){return l.jsxs(st,{className:"py-4",children:[l.jsxs("section",{className:"glass-hero text-white mb-5",children:[l.jsx("h1",{className:"fw-bold hero-title",children:"I miei corsi"}),l.jsx("p",{className:"hero-subtitle",children:"Gestisci le iscrizioni, monitora i progressi e accedi ai materiali quando vuoi."}),l.jsxs("div",{className:"hero-actions d-flex justify-content-center flex-wrap gap-2",children:[l.jsx(Re,{to:"/studente/scopri",className:"landing-btn primary",children:"Scopri nuovi corsi"}),l.jsx(Re,{to:"/studente/profilo",className:"landing-btn outline",children:"Visualizza profilo"})]})]}),l.jsxs(ze,{className:"g-3",children:[cs.map(n=>l.jsx(fe,{xs:12,md:6,lg:4,children:l.jsx(_4,{corso:n})},n.id)),cs.length===0&&l.jsx(fe,{children:l.jsx("p",{children:"Non sei iscritto a nessun corso."})})]})]})}function b4(){const{id:n}=ti(),e=cs.find(t=>t.id===+n);return l.jsx("div",{className:"course-detail-page",children:e?l.jsxs(l.Fragment,{children:[l.jsx("h2",{className:"cd-title",children:e.titolo}),l.jsx("div",{className:"glass-nav-container glass-nav",children:l.jsxs(Yy,{defaultActiveKey:"corso",id:"course-detail-tabs",className:"cd-tabs",children:[l.jsxs(gl,{eventKey:"corso",title:"Corso",children:[l.jsxs("div",{className:"glass-intro-container mb-4",children:[l.jsx("div",{className:"intro-year",children:e.introduzione.academicYear}),l.jsx("h5",{className:"intro-professor",children:e.introduzione.professor}),l.jsxs("div",{className:"intro-degree",children:[e.introduzione.degree,"  ",e.introduzione.semester,", ",e.introduzione.credits," CFU"]}),l.jsx("hr",{}),l.jsx("div",{className:"intro-notes",children:e.introduzione.notes}),l.jsx("h6",{className:"intro-office-title",children:e.introduzione.officeHoursTitle}),l.jsx("div",{className:"intro-office",children:e.introduzione.officeHours}),l.jsx("hr",{}),l.jsx("h5",{children:"Obiettivi del corso"}),l.jsx("p",{children:e.descrizione})]}),l.jsx(vi,{alwaysOpen:!0,defaultActiveKey:e.sections.map(t=>t.id.toString()),className:"cd-accordion",children:e.sections.map(t=>l.jsxs(vi.Item,{eventKey:t.id.toString(),children:[l.jsx(vi.Header,{children:t.title}),l.jsx(vi.Body,{children:l.jsx(hf,{variant:"flush",children:t.lessons.map(s=>l.jsx(hf.Item,{action:!0,as:Re,to:`/studente/corsi/${e.id}/sezioni/${t.id}/lezioni/${s.id}`,className:"glass-card clickable-card mb-2 d-flex justify-content-between align-items-center",children:l.jsxs("div",{children:[l.jsx("span",{children:s.title})," ",l.jsxs("small",{className:"text-muted ms-3",children:["[",s.fileTypes.join(", "),"]"]})]})},s.id))})})]},t.id))})]}),l.jsx(gl,{eventKey:"valutazioni",title:"Valutazioni",children:l.jsx("p",{children:"Qui compariranno i voti e i feedback del corso."})}),l.jsx(gl,{eventKey:"altro",title:"Altro",children:l.jsx("p",{children:"Altre risorse, Q&A, materiali scaricabili"})})]})})]}):l.jsx("div",{className:"cd-not-found",children:l.jsx("h3",{children:"Corso non trovato"})})})}const Ij=({src:n})=>l.jsxs("video",{className:"video-player",controls:!0,preload:"metadata",children:[l.jsx("source",{src:n,type:"video/mp4"}),"Il tuo browser non supporta il tag video."]});function E4({title:n,videoUrl:e}){const{id:t,secId:s,lezId:a}=ti(),p=cs.find(T=>T.id===+t)?.sections.find(T=>T.id===+s)?.lessons.find(T=>T.id===+a)?.description||"",g=b.useRef(null),[y,x]=b.useState(0);return b.useEffect(()=>{function T(){g.current&&x(g.current.offsetHeight)}return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),l.jsxs("div",{className:"lesson-video-page",children:[l.jsx("h1",{className:"lesson-title",children:n}),p&&l.jsx("p",{className:"lesson-description",children:p}),l.jsxs("div",{className:"lesson-content",children:[l.jsx("div",{className:"video-container",ref:g,children:l.jsx(Ij,{src:e})}),l.jsx("div",{className:"chat-container",style:{height:y},children:l.jsx(as,{variant:"standalone",showHeader:!0,placeholder:"Chiedi alla ChatAI..."})})]}),l.jsxs("div",{className:"lesson-summary",children:[l.jsx("h2",{children:"Riassunto della lezione"}),l.jsxs("p",{children:["Qui verr visualizzato un riassunto della lezione creato utilizzando AI, per ora aggiungo un placeholder per riempire lo spazio.",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quam perferendis provident sequi dolor, explicabo odio sunt reprehenderit eos, repudiandae iure repellendus modi, expedita qui fuga cumque. Consequuntur, rerum ut? Quasi, tempora corrupti voluptatibus facere expedita rem, quae recusandae nihil perspiciatis blanditiis excepturi. Culpa voluptatibus explicabo fuga dolor sint maxime, soluta voluptatem nobis quam est illo repellendus consequatur eaque pariatur ex, suscipit ab quos at cum? Aspernatur facere eligendi quo quisquam! Placeat provident aut magnam eius non soluta voluptatem quisquam ipsum, aliquam obcaecati. Exercitationem nostrum laboriosam facilis accusantium et porro fugiat illo perferendis magni expedita eaque corrupti, iusto, illum doloremque dolores?",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Illum suscipit voluptatem beatae neque deserunt tenetur, eligendi placeat harum et animi exercitationem iusto quo reprehenderit asperiores eius adipisci consequuntur voluptates maxime optio eveniet laborum! Minus perspiciatis omnis iure maiores debitis illo ullam. Quo amet esse repudiandae nobis aspernatur error est incidunt?",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eligendi voluptates recusandae omnis obcaecati consequatur, praesentium magnam aliquid architecto autem reprehenderit quibusdam, officiis facere! Commodi id nihil laborum sit vero non consectetur aut voluptatem excepturi mollitia nemo architecto, hic perferendis officia quas iure iusto earum. Impedit sunt porro dignissimos non at accusamus nemo voluptas quibusdam deleniti eius iusto aliquam magnam suscipit magni quasi sed, mollitia ipsa animi tempore ullam quae rerum."]})]})]})}const T4={width:"100%",height:"100%",border:"none",borderRadius:"8px"};function Oj({src:n}){return l.jsx("iframe",{src:n,title:"PDF Viewer",style:T4})}function w4(){const{id:n,secId:e,lezId:t}=ti(),c=cs.find(k=>k.id===+n)?.sections.find(k=>k.id===+e)?.lessons.find(k=>k.id===+t),d=c?.title||"",m=c?.description||"",p=c?.videoUrl||c?.url||"",g=c?.fileUrl||c?.contentUrl||"",y=b.useRef(null),[x,T]=b.useState(0);b.useEffect(()=>{function k(){y.current&&T(y.current.offsetHeight)}return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const[S,j]=b.useState("video");return l.jsxs("div",{className:"lesson-videopdf-page",children:[l.jsx("h1",{className:"lesson-title",children:d}),m&&l.jsx("p",{className:"lesson-description",children:m}),l.jsxs("div",{className:"view-toggle",children:[l.jsx("button",{className:S==="video"?"active":"",onClick:()=>j("video"),children:"Video"}),l.jsx("button",{className:S==="pdf"?"active":"",onClick:()=>j("pdf"),children:"PDF"})]}),l.jsxs("div",{className:"lesson-content",children:[l.jsx("div",{className:"media-pane",ref:y,children:S==="video"?l.jsx("div",{className:"video-container",children:l.jsx(Ij,{src:p})}):l.jsx("div",{className:"pdf-container",children:l.jsx(Oj,{src:g})})}),l.jsx("div",{className:"chat-container",style:{height:x},children:l.jsx(as,{variant:"standalone",showHeader:!0,placeholder:"Chiedi alla ChatAI..."})})]}),l.jsxs("div",{className:"lesson-summary",children:[l.jsxs("h2",{children:["Riassunto della lezione ",S==="video"?"Video":"PDF"]}),l.jsxs("p",{children:["Qui verr visualizzato un riassunto ",S==="video"?"del video":"del PDF"," creato utilizzando AI, per ora aggiungo un placeholder per riempire lo spazio.",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quam perferendis provident sequi dolor, explicabo odio sunt reprehenderit eos, repudiandae iure repellendus modi, expedita qui fuga cumque. Consequuntur, rerum ut? Quasi, tempora corrupti voluptatibus facere expedita rem, quae recusandae nihil perspiciatis blanditiis excepturi. Culpa voluptatibus explicabo fuga dolor sint maxime, soluta voluptatem nobis quam est illo repellendus consequatur eaque pariatur ex, suscipit ab quos at cum? Aspernatur facere eligendi quo quisquam! Placeat provident aut magnam eius non soluta voluptatem quisquam ipsum, aliquam obcaecati. Exercitationem nostrum laboriosam facilis accusantium et porro fugiat illo perferendis magni expedita eaque corrupti, iusto, illum doloremque dolores?",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Illum suscipit voluptatem beatae neque deserunt tenetur, eligendi placeat harum et animi exercitationem iusto quo reprehenderit asperiores eius adipisci consequuntur voluptates maxime optio eveniet laborum! Minus perspiciatis omnis iure maiores debitis illo ullam. Quo amet esse repudiandae nobis aspernatur error est incidunt?",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eligendi voluptates recusandae omnis obcaecati consequatur, praesentium magnam aliquid architecto autem reprehenderit quibusdam, officiis facere! Commodi id nihil laborum sit vero non consectetur aut voluptatem excepturi mollitia nemo architecto, hic perferendis officia quas iure iusto earum. Impedit sunt porro dignissimos non at accusamus nemo voluptas quibusdam deleniti eius iusto aliquam magnam suscipit magni quasi sed, mollitia ipsa animi tempore ullam quae rerum."]})]})]})}function S4(){const{id:n,secId:e,lezId:t}=ti(),c=cs.find(T=>T.id===+n)?.sections.find(T=>T.id===+e)?.lessons.find(T=>T.id===+t),d=c?.title||"",m=c?.description||"",p=c?.fileUrl||c?.contentUrl||"",g=b.useRef(null),[y,x]=b.useState(0);return b.useEffect(()=>{function T(){g.current&&x(g.current.offsetHeight)}return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),l.jsxs("div",{className:"lesson-pdf-page",children:[l.jsx("h1",{className:"lesson-title",children:d}),m&&l.jsx("p",{className:"lesson-description",children:m}),l.jsxs("div",{className:"lesson-content",children:[l.jsx("div",{className:"media-pane",ref:g,children:l.jsx("div",{className:"pdf-container",children:l.jsx(Oj,{src:p})})}),l.jsx("div",{className:"chat-container",style:{height:y},children:l.jsx(as,{variant:"standalone",showHeader:!0,placeholder:"Chiedi alla ChatAI..."})})]}),l.jsxs("div",{className:"lesson-summary",children:[l.jsx("h2",{children:"Riassunto del PDF"}),l.jsxs("p",{children:["Qui verr visualizzato un riassunto del PDF creato utilizzando AI, per ora aggiungo un placeholder per riempire lo spazio.",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quam perferendis provident sequi dolor, explicabo odio sunt reprehenderit eos, repudiandae iure repellendus modi, expedita qui fuga cumque. Consequuntur, rerum ut?",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Illum suscipit voluptatem beatae neque deserunt tenetur, eligendi placeat harum et animi exercitationem iusto quo reprehenderit asperiores eius adipisci consequuntur voluptates maxime."]})]})]})}function A4(){const{id:n,secId:e,lezId:t}=ti(),s=cs.find(T=>T.id===+n);if(!s)return l.jsx("div",{children:"Corso non trovato"});const a=s.sections.find(T=>T.id===+e);if(!a)return l.jsx("div",{children:"Sezione non trovata"});const c=a.lessons.find(T=>T.id===+t);if(!c)return l.jsx("div",{children:"Lezione non trovata"});const d=(c.type||"").toLowerCase(),m=Array.isArray(c.fileTypes)?c.fileTypes.map(T=>String(T).toLowerCase()):[],p=m.includes("video")||d==="video"||!!(c.videoUrl||c.url),g=m.includes("pdf")||d==="pdf"||d==="reading"||!!(c.pdfUrl||c.fileUrl||c.contentUrl),y=c.videoUrl||c.url||"",x=c.pdfUrl||c.fileUrl||c.contentUrl||"";return p&&g?l.jsx(w4,{title:c.title,videoUrl:y,pdfUrl:x}):!p&&g?l.jsx(S4,{title:c.title,pdfUrl:x}):p&&!g?l.jsx(E4,{title:c.title,videoUrl:y}):l.jsx("div",{children:"Tipo di lezione non supportato"})}const N4=[{id:6,titolo:"Sistemi Operativi",descrizione:"Processi, thread, scheduling, memoria virtuale, file system.",instructor:"Paolo Marchetti",durata:"9 settimane",livello:"Intermedio",tags:["OS","Processi","Memoria"],imageUrl:"/assets/sistemi-operativi.jpg",introduzione:{academicYear:"2024/2025",professor:"Prof. Paolo Marchetti",degree:"CdS in Informatica",semester:"secondo semestre",credits:9,notes:"Esoneri in itinere.",officeHoursTitle:"Ricevimento studenti",officeHours:"Gioved 1012 in studio."}},{id:7,titolo:"Algoritmi e Strutture Dati",descrizione:"Liste, alberi, grafi, ricerca e ordinamento; analisi di complessit.",instructor:"Chiara De Luca",durata:"10 settimane",livello:"Intermedio",tags:["Algoritmi","Strutture Dati"],imageUrl:"/assets/algoritmi-sd.jpg",introduzione:{academicYear:"2024/2025",professor:"Prof.ssa Chiara De Luca",degree:"CdS in Informatica",semester:"primo semestre",credits:9,notes:"Laboratorio settimanale.",officeHoursTitle:"Ricevimento studenti",officeHours:"Luned 1416 online."}},{id:8,titolo:"Sviluppo Mobile con React Native",descrizione:"Componenti, navigazione, integrazione API e pubblicazione su store.",instructor:"Davide Serra",durata:"6 settimane",livello:"Avanzato",tags:["React Native","Mobile","API"],imageUrl:"/assets/react-native.jpg",introduzione:{academicYear:"2024/2025",professor:"Ing. Davide Serra",degree:"CdS in Informatica",semester:"secondo semestre",credits:6,notes:"Project work finale.",officeHoursTitle:"Ricevimento studenti",officeHours:"Mercoled 1112 su Teams."}}],j4=[...cs,...N4],C4=""+new URL("hero-elearning-iVtTMm8g.png",import.meta.url).href;function R4(n=""){const e=(n||"").toLowerCase();return e.startsWith("prin")?"beginner":e.startsWith("inter")?"intermediate":e.startsWith("avan")?"advanced":"default"}function I4({corso:n,isEnrolled:e,onRequest:t}){const s=R4(n.livello);return l.jsxs(ce,{className:"h-100 glass-card clickable-card position-relative",children:[n.livello&&l.jsx("span",{className:`pill pill-level ${s}`,children:n.livello}),l.jsx("span",{className:`pill pill-enrollment ${e?"pill-enrolled":"pill-not-enrolled"}`,children:e?"Iscritto":"Non iscritto"}),l.jsxs(ce.Body,{className:"course-body",children:[l.jsx(ce.Title,{className:"courseTitle mb-1",children:n.titolo}),l.jsxs("div",{className:"small text-muted mb-2",children:["Docente: ",n.instructor]}),n.descrizione&&l.jsx(ce.Text,{className:"mb-3",children:n.descrizione}),l.jsxs("div",{className:"course-meta mb-2",children:[Number.isFinite(n?.introduzione?.credits)&&l.jsxs(Ye,{bg:"light",text:"dark",children:[n.introduzione.credits," CFU"]}),n?.introduzione?.semester&&l.jsx(Ye,{bg:"light",text:"dark",children:n.introduzione.semester})]}),l.jsx("div",{className:"course-tags mb-3",children:(n.tags||[]).slice(0,6).map(a=>l.jsxs(Ye,{bg:"light",text:"dark",children:["#",a]},a))}),l.jsx("div",{className:"d-flex justify-content-end",children:l.jsx(Oe,{className:"btn-glass",onClick:()=>t(n),children:"Dettagli e richiesta"})})]})]})}function O4(){const{search:n}=Oi(),e=b.useMemo(()=>new URLSearchParams(n),[n]),[t,s]=b.useState(e.get("q")||""),[a,c]=b.useState("Tutti"),[d,m]=b.useState("Tutti"),[p,g]=b.useState("Tutti"),[y,x]=b.useState(""),[T,S]=b.useState(""),[j,k]=b.useState("Rilevanza");b.useEffect(()=>{s(e.get("q")||"")},[e]);const I=b.useMemo(()=>{const J=new Map;return(j4||[]).forEach(me=>J.set(me.id,me)),Array.from(J.values())},[]),Y=b.useMemo(()=>new Set((cs||[]).map(J=>J.id)),[]),$=b.useMemo(()=>{const J=new Set(I.map(me=>me.livello).filter(Boolean));return["Tutti",...Array.from(J).sort()]},[I]),B=b.useMemo(()=>{const J=new Set(I.map(me=>me.introduzione?.semester).filter(Boolean));return["Tutti",...Array.from(J).sort()]},[I]),q=b.useMemo(()=>{const J=I.length,me={Principiante:0,Intermedio:0,Avanzato:0,Altro:0};I.forEach(pe=>{const xe=(pe.livello||"").toLowerCase();xe.startsWith("prin")?me.Principiante++:xe.startsWith("inter")?me.Intermedio++:xe.startsWith("avan")?me.Avanzato++:me.Altro++});const z=new Map;I.forEach(pe=>{const xe=Number(pe.introduzione?.credits);Number.isFinite(xe)&&z.set(xe,(z.get(xe)||0)+1)});const G=[...z.entries()].sort((pe,xe)=>pe[0]-xe[0]),ae=new Map;I.forEach(pe=>{const xe=pe.introduzione?.semester;xe&&ae.set(xe,(ae.get(xe)||0)+1)});const ue=[...ae.entries()];return{total:J,byLevel:me,cfuList:G,semList:ue}},[I]),H=(J,me)=>{if(!me)return 0;const z=me.toLowerCase();let G=0;return J.titolo?.toLowerCase().includes(z)&&(G+=3),J.instructor?.toLowerCase().includes(z)&&(G+=2),J.descrizione?.toLowerCase().includes(z)&&(G+=1),(J.tags||[]).some(ae=>ae.toLowerCase().includes(z))&&(G+=1),G},K=b.useMemo(()=>{const J=t.trim().toLowerCase();return I.filter(me=>{const z=!J||me.titolo?.toLowerCase().includes(J)||me.instructor?.toLowerCase().includes(J)||me.descrizione?.toLowerCase().includes(J)||(me.tags||[]).some(St=>St.toLowerCase().includes(J)),G=a==="Tutti"||me.livello===a,ae=me.introduzione?.semester,ue=d==="Tutti"||ae===d,pe=Number(me.introduzione?.credits),xe=y===""||!Number.isNaN(pe)&&pe>=Number(y),Se=T===""||!Number.isNaN(pe)&&pe<=Number(T),rt=Y.has(me.id);return z&&G&&ue&&xe&&Se&&(p==="Tutti"||p==="Iscritti"&&rt||p==="Non iscritti"&&!rt)})},[I,t,a,d,y,T,p,Y]),M=b.useMemo(()=>{const J=t.trim(),me=[...K],z=(G,ae,ue)=>(G[ue]||"").localeCompare(ae[ue]||"","it",{sensitivity:"base"});switch(j){case"Titolo AZ":me.sort((G,ae)=>z(G,ae,"titolo"));break;case"Titolo ZA":me.sort((G,ae)=>z(ae,G,"titolo"));break;case"Docente AZ":me.sort((G,ae)=>z(G,ae,"instructor"));break;case"CFU ":me.sort((G,ae)=>(Number(G.introduzione?.credits)||0)-(Number(ae.introduzione?.credits)||0));break;case"CFU ":me.sort((G,ae)=>(Number(ae.introduzione?.credits)||0)-(Number(G.introduzione?.credits)||0));break;case"Livello":me.sort((G,ae)=>z(G,ae,"livello"));break;case"Rilevanza":default:J?me.sort((G,ae)=>H(ae,J)-H(G,J)):me.sort((G,ae)=>z(G,ae,"titolo"));break}return me},[K,j,t]),[N,O]=b.useState(null),[D,P]=b.useState(""),[L,C]=b.useState(!1),[ve,we]=b.useState(!1),X=()=>{O(null),P(""),C(!1),we(!1)},re=()=>{c("Tutti"),m("Tutti"),g("Tutti"),x(""),S(""),k("Rilevanza")};return l.jsxs("div",{className:"explore-page",children:[l.jsx("section",{className:"explore-hero",children:l.jsx(st,{className:"px-0",children:l.jsxs(ze,{className:"align-items-center gy-4",children:[l.jsxs(fe,{md:6,className:"hero-left",children:[l.jsx("h1",{className:"hero-title",children:"Esplora nuovi corsi"}),l.jsx("p",{className:"hero-sub",children:"Scopri il catalogo completo, filtra per livello, semestre e CFU e invia una richiesta di accesso."}),l.jsxs("div",{className:"hero-cta d-flex gap-2",children:[l.jsx("a",{href:"#explore-filters",className:"landing-btn primary",children:"Inizia la ricerca"}),l.jsx("a",{href:"/studente/corsi",className:"landing-btn outline",children:"Scopri i miei corsi"})]})]}),l.jsx(fe,{md:6,className:"hero-right",children:l.jsx("img",{src:C4,alt:"E-learning illustration",className:"hero-illustration"})})]})})}),l.jsx("section",{className:"howto-banner",children:l.jsxs("div",{className:"howto-inner",children:[l.jsx("h3",{children:"Come cercare velocemente"}),l.jsxs("ol",{className:"howto-steps",children:[l.jsxs("li",{children:["Digita ",l.jsx("strong",{children:"titolo"}),", ",l.jsx("strong",{children:"docente"})," o un ",l.jsx("strong",{children:"#tag"})," nella barra di ricerca."]}),l.jsxs("li",{children:["Filtra per ",l.jsx("strong",{children:"Livello"}),", ",l.jsx("strong",{children:"Semestre"})," e ",l.jsx("strong",{children:"CFU"})," per restringere i risultati."]}),l.jsxs("li",{children:["Apri ",l.jsx("strong",{children:"Dettagli"})," e invia la ",l.jsx("strong",{children:"richiesta"})," con un messaggio opzionale al docente."]})]})]})}),l.jsx("section",{className:"stats-section",children:l.jsxs("div",{className:"stats-grid",children:[l.jsxs("div",{className:"stat-card kpi",children:[l.jsx("div",{className:"stat-kpi",children:q.total}),l.jsx("div",{className:"stat-label",children:"Corsi totali"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-title",children:"Per livello"}),l.jsxs("div",{className:"stat-chips",children:[q.byLevel.Principiante>0&&l.jsxs("button",{className:"chip chip-lv-beginner",onClick:()=>c("Principiante"),children:["Principiante ",l.jsx("span",{className:"chip-badge",children:q.byLevel.Principiante})]}),q.byLevel.Intermedio>0&&l.jsxs("button",{className:"chip chip-lv-intermediate",onClick:()=>c("Intermedio"),children:["Intermedio ",l.jsx("span",{className:"chip-badge",children:q.byLevel.Intermedio})]}),q.byLevel.Avanzato>0&&l.jsxs("button",{className:"chip chip-lv-advanced",onClick:()=>c("Avanzato"),children:["Avanzato ",l.jsx("span",{className:"chip-badge",children:q.byLevel.Avanzato})]})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-title",children:"Per CFU"}),l.jsx("div",{className:"stat-chips",children:q.cfuList.map(([J,me])=>l.jsxs("button",{className:"chip",onClick:()=>{x(String(J)),S(String(J))},title:`Filtra per ${J} CFU`,children:[J," CFU ",l.jsx("span",{className:"chip-badge",children:me})]},J))})]}),q.semList.length>0&&l.jsxs("div",{className:"stat-card stat-span",children:[l.jsx("div",{className:"stat-title",children:"Per semestre"}),l.jsx("div",{className:"stat-chips",children:q.semList.map(([J,me])=>l.jsxs("button",{className:"chip",onClick:()=>m(J),title:`Filtra per ${J}`,children:[J," ",l.jsx("span",{className:"chip-badge",children:me})]},J))})]})]})}),l.jsx("div",{id:"explore-filters"}),l.jsxs(st,{className:"px-0",children:[l.jsx(V,{className:"mb-4 filters-bar",children:l.jsxs(ze,{className:"g-3 align-items-end",children:[l.jsx(fe,{xs:12,lg:4,children:l.jsx(V.Control,{type:"search",placeholder:"Cerca per titolo, docente o tag",value:t,onChange:J=>s(J.target.value),onBlur:()=>s(J=>J.trim()),"aria-label":"Ricerca"})}),l.jsx(fe,{xs:6,md:4,lg:2,children:l.jsxs(V.Select,{"aria-label":"Livello",value:a==="Tutti"?"":a,onChange:J=>c(J.target.value||"Tutti"),children:[l.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Livello"}),l.jsx("option",{value:"Tutti",children:"Tutti"}),$.filter(J=>J!=="Tutti").map(J=>l.jsx("option",{value:J,children:J},J))]})}),l.jsx(fe,{xs:6,md:4,lg:2,children:l.jsxs(V.Select,{"aria-label":"Semestre",value:d==="Tutti"?"":d,onChange:J=>m(J.target.value||"Tutti"),children:[l.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Semestre"}),l.jsx("option",{value:"Tutti",children:"Tutti"}),B.filter(J=>J!=="Tutti").map(J=>l.jsx("option",{value:J,children:J},J))]})}),l.jsx(fe,{xs:6,md:3,lg:2,children:l.jsx(V.Control,{type:"number",min:0,placeholder:"CFU min (es. 3)",value:y,onChange:J=>x(J.target.value),"aria-label":"CFU min"})}),l.jsx(fe,{xs:6,md:3,lg:2,children:l.jsx(V.Control,{type:"number",min:0,placeholder:"CFU max (es. 12)",value:T,onChange:J=>S(J.target.value),"aria-label":"CFU max"})}),l.jsx(fe,{xs:12,md:6,lg:3,children:l.jsxs(V.Select,{"aria-label":"Iscrizione",value:p==="Tutti"?"":p,onChange:J=>g(J.target.value||"Tutti"),children:[l.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Iscrizione"}),l.jsx("option",{value:"Tutti",children:"Tutti"}),l.jsx("option",{value:"Iscritti",children:"Iscritti"}),l.jsx("option",{value:"Non iscritti",children:"Non iscritti"})]})}),l.jsx(fe,{xs:12,md:6,lg:3,children:l.jsxs(V.Select,{"aria-label":"Ordina per",value:j==="Rilevanza"?"":j,onChange:J=>k(J.target.value||"Rilevanza"),children:[l.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Ordina per"}),l.jsx("option",{value:"Rilevanza",children:"Rilevanza"}),l.jsx("option",{value:"Titolo AZ",children:"Titolo AZ"}),l.jsx("option",{value:"Titolo ZA",children:"Titolo ZA"}),l.jsx("option",{value:"Docente AZ",children:"Docente AZ"}),l.jsx("option",{value:"CFU ",children:"CFU "}),l.jsx("option",{value:"CFU ",children:"CFU "}),l.jsx("option",{value:"Livello",children:"Livello"})]})}),l.jsx(fe,{xs:"auto",className:"d-flex",children:l.jsx(Oe,{type:"button",className:"btn-glass-outline btn-reset",onClick:re,children:"Reset"})})]})}),l.jsxs(ze,{className:"g-4",children:[M.map(J=>{const me=Y.has(J.id);return l.jsx(fe,{xs:12,md:6,lg:4,children:l.jsx(I4,{corso:J,isEnrolled:me,onRequest:O})},J.id)}),M.length===0&&l.jsx(fe,{children:l.jsx("p",{className:"text-center m-0",children:"Nessun corso trovato con i filtri correnti."})})]})]}),l.jsx(gt,{show:!!N,onHide:X,centered:!0,contentClassName:"glass-modal",backdropClassName:"glass-backdrop",children:ve?l.jsxs(l.Fragment,{children:[l.jsx(gt.Header,{closeButton:!0,children:l.jsx(gt.Title,{className:"text-white",children:"Richiesta inviata"})}),l.jsx(gt.Body,{children:l.jsx("p",{className:"mb-0 text-white-75",children:"La tua richiesta  stata inviata ed  in attesa di approvazione."})}),l.jsx(gt.Footer,{children:l.jsx(Oe,{className:"btn-glass",onClick:X,children:"Ok"})})]}):l.jsxs(l.Fragment,{children:[l.jsx(gt.Header,{closeButton:!0,children:l.jsx(gt.Title,{className:"text-white",children:N?.titolo})}),l.jsx(gt.Body,{children:N&&l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"mb-1 text-white-50",children:["Docente: ",N.instructor]}),l.jsx("p",{className:"mb-3 text-white",children:N.descrizione}),l.jsxs("ul",{className:"modal-meta text-white",children:[N.introduzione?.credits!=null&&l.jsxs("li",{children:[l.jsx("strong",{children:"CFU:"})," ",N.introduzione.credits]}),N.durata&&l.jsxs("li",{children:[l.jsx("strong",{children:"Durata:"})," ",N.durata]}),N.livello&&l.jsxs("li",{children:[l.jsx("strong",{children:"Livello:"})," ",N.livello]}),N.introduzione?.semester&&l.jsxs("li",{children:[l.jsx("strong",{children:"Semestre:"})," ",N.introduzione.semester]})]}),l.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:(N.tags||[]).map(J=>l.jsx(Ye,{bg:"secondary",children:J},J))}),l.jsxs(V.Group,{className:"mb-2",children:[l.jsx(V.Label,{className:"text-white-75",children:"Nota per il docente (opzionale)"}),l.jsx(V.Control,{as:"textarea",rows:3,placeholder:"Scrivi una breve richiesta o motivazione",value:D,onChange:J=>P(J.target.value)})]})]})}),l.jsxs(gt.Footer,{children:[l.jsx(Oe,{className:"btn-glass-outline text-white",onClick:X,children:"Annulla"}),l.jsx(Oe,{className:"btn-glass",onClick:()=>{we(!0)},disabled:Y.has(N?.id),title:Y.has(N?.id)?"Sei gi iscritto a questo corso":void 0,children:Y.has(N?.id)?"Gi iscritto":"Richiedi accesso"})]})]})})]})}function D4(){const n={initials:"AC",name:"Alessandro",surname:"Carrisi",role:"Studente",degree:"Informatica",year:2,email:"a.carrisi3@studenti.uniba.it",sede:"Bari, IT",bio:"Studente di Informatica appassionato di AI applicata all'e-learning. Costruisco front-end reattivi, integro LLM e curo la UX."},e=cs,t=e.filter(a=>a.stato==="attivo"),s=e.filter(a=>a.stato!=="attivo");return l.jsxs(st,{className:"student-profile-view py-4",children:[l.jsx("section",{className:"glass-hero text-white mb-4 profile-hero",children:l.jsxs(ze,{className:"g-3 align-items-center",children:[l.jsx(fe,{xs:12,md:"auto",children:l.jsx("div",{className:"avatar-ring xl",children:l.jsx("div",{className:"avatar-placeholder",children:n.initials})})}),l.jsxs(fe,{children:[l.jsxs("h1",{className:"hero-title mb-1",children:[n.name," ",n.surname]}),l.jsxs("p",{className:"hero-subtitle mb-2",children:[n.role,"  ",n.degree," (",n.year," anno)"]}),l.jsxs("div",{className:"badge-teacher d-flex gap-2 flex-wrap",children:[l.jsx(Ye,{bg:"light",text:"dark",children:n.role}),l.jsx(Ye,{bg:"light",text:"dark",children:"Anno Accademico 2024/25"})]})]}),l.jsx(fe,{xs:12,md:"auto",className:"mt-2 mt-md-0",children:l.jsx(Re,{to:"/studente/impostazioni",className:"landing-btn primary",children:"Modifica profilo"})})]})}),l.jsx(ze,{className:"g-3",children:l.jsx(fe,{xs:12,children:l.jsx(ce,{className:"h-100 glass-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Biografia"}),l.jsx("p",{className:"mb-0 text-white-90",children:n.bio})]})})})}),l.jsxs(ze,{className:"g-3",children:[l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"h-100 glass-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Contatti"}),l.jsxs("ul",{className:"profile-list",children:[l.jsxs("li",{children:[l.jsx("span",{children:"Email"}),l.jsx("a",{href:`mailto:${n.email}`,children:n.email})]}),l.jsxs("li",{children:[l.jsx("span",{children:"Matricola"}),"736830"]}),l.jsxs("li",{children:[l.jsx("span",{children:"Sede"}),n.sede]})]})]})})}),l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"h-100 glass-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Social"}),l.jsx("ul",{className:"profile-list",children:l.jsxs("li",{children:[l.jsx("span",{children:""}),"Nessun social collegato"]})})]})})})]}),l.jsx(ze,{className:"g-3",children:l.jsx(fe,{xs:12,children:l.jsx(ce,{className:"h-100 glass-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Statistiche"}),l.jsxs("div",{className:"kpi-grid",children:[l.jsxs("div",{className:"kpi",children:[l.jsx("div",{className:"kpi-value",children:e.length}),l.jsx("div",{className:"kpi-label",children:"Iscrizioni"})]}),l.jsxs("div",{className:"kpi",children:[l.jsx("div",{className:"kpi-value",children:t.length}),l.jsx("div",{className:"kpi-label",children:"In corso"})]}),l.jsxs("div",{className:"kpi",children:[l.jsx("div",{className:"kpi-value",children:s.length}),l.jsx("div",{className:"kpi-label",children:"Completati"})]})]})]})})})}),l.jsx(ze,{className:"g-3",children:l.jsx(fe,{xs:12,children:l.jsx(ce,{className:"h-100 glass-card",children:l.jsxs(ce.Body,{children:[l.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[l.jsx("h5",{className:"mb-0",children:"Corsi"}),l.jsx(Re,{to:"/studente/corsi",className:"landing-btn outline",children:"Vai a tutti i corsi"})]}),l.jsx(ze,{className:"g-3",children:e.map(a=>l.jsx(fe,{xs:12,lg:6,children:l.jsxs(ce,{className:"h-100 glass-card clickable-card",children:[l.jsxs(ce.Body,{children:[l.jsx(ce.Title,{className:"courseTitle mb-1",id:`course-${a.id}`,children:a.titolo}),l.jsxs("div",{className:"small text-white-90 mb-2",children:["Docente: ",a.instructor]}),a.descrizione&&l.jsx(ce.Text,{className:"mb-3",children:a.descrizione}),l.jsxs("div",{className:"course-meta mb-2 d-flex gap-2 flex-wrap",children:[Number.isFinite(a?.introduzione?.credits)&&l.jsxs(Ye,{bg:"light",text:"dark",children:[a.introduzione.credits," CFU"]}),a?.introduzione?.semester&&l.jsx(Ye,{bg:"light",text:"dark",children:a.introduzione.semester})]})]}),l.jsxs(ce.Footer,{className:"d-flex align-items-center justify-content-between gap-2",children:[l.jsx("small",{className:"text-muted",children:a.stato==="attivo"?"In corso":a.stato.charAt(0).toUpperCase()+a.stato.slice(1)}),l.jsxs("div",{className:"d-flex gap-2 ms-auto",children:[l.jsx(Re,{to:`/studente/corsi/${a.id}`,className:"landing-btn primary",children:"Apri corso"}),l.jsx(Re,{to:`/studente/corsi/${a.id}`,className:"landing-btn outline",children:"Dettagli corso"})]})]})]})},a.id))})]})})})})]})}const M4=""+new URL("avatar-student-khjJeG79.jpeg",import.meta.url).href,k4=()=>({id:"u-001",nome:"Alessandro",cognome:"Carrisi",username:"a.carrisi",email:"a.carrisi3@studenti.uniba.it",matricola:"736830",corsoDiStudi:"Informatica",anno:2,sede:"Bari, IT",bio:`Studente di Informatica appassionato di AI applicata all'elearning.
Costruisco front-end reattivi, integro modelli LLM e curo UX accessibile.`,avatar:null});function P4(){const n=Yt(),e=b.useMemo(k4,[]),[t,s]=b.useState(!1),[a,c]=b.useState(!1),[d,m]=b.useState(""),[p,g]=b.useState({nome:e.nome||"",cognome:e.cognome||"",username:e.username||"",email:e.email||"",matricola:e.matricola||"",corsoDiStudi:e.corsoDiStudi||"",anno:e.anno||1,sede:e.sede||"",bio:e.bio||""}),[y,x]=b.useState(null),[T,S]=b.useState(e.avatar||M4);b.useEffect(()=>{if(!y)return;const K=URL.createObjectURL(y);return S(K),()=>URL.revokeObjectURL(K)},[y]);const j=K=>{const{name:M,value:N}=K.target;g(O=>({...O,[M]:N}))},[k,I]=b.useState({newsletter:!0,notifEmail:!0,notifPush:!1,profiloPubblico:!1}),Y=K=>{const{name:M,checked:N}=K.target;I(O=>({...O,[M]:N}))},[$,B]=b.useState({current:"",next:"",confirm:""}),q=()=>{if(!p.nome.trim()||!p.cognome.trim())return"Nome e cognome sono obbligatori.";if(!/^\S+@\S+\.\S+$/.test(p.email))return"Email non valida.";if($.next||$.confirm||$.current){if($.next.length<8)return"La nuova password deve avere almeno 8 caratteri.";if($.next!==$.confirm)return"Le password non coincidono."}return""},H=async K=>{K.preventDefault(),m("");const M=q();if(M){m(M);return}s(!0);try{await new Promise(N=>setTimeout(N,700)),c(!0),setTimeout(()=>n("/studente/profilo"),600)}catch{m("Si  verificato un errore durante il salvataggio.")}finally{s(!1)}};return l.jsx("div",{className:"student-profile-edit-page",children:l.jsxs(st,{children:[l.jsxs(ze,{className:"align-items-center gy-3 mb-3",children:[l.jsxs(fe,{md:8,children:[l.jsx("h1",{className:"edit-title",children:"Modifica profilo"}),l.jsx("p",{className:"edit-sub",children:"Aggiorna i tuoi dati anagrafici, lavatar, le preferenze e la password."})]}),l.jsx(fe,{md:4,className:"text-md-end",children:l.jsx(Re,{to:"/studente/profilo",className:"landing-btn outline",children:"Torna al profilo"})})]}),d&&l.jsx(df,{variant:"danger",className:"glass-alert",children:d}),a&&l.jsx(df,{variant:"success",className:"glass-alert",children:"Profilo aggiornato con successo."}),l.jsxs(V,{onSubmit:H,children:[l.jsxs(ze,{className:"gy-4",children:[l.jsx(fe,{lg:4,md:6,children:l.jsxs(ce,{className:"glass-card p-3 edit-card",children:[l.jsx("h5",{className:"section-title",children:"Avatar"}),l.jsx("div",{className:"avatar-wrap",children:l.jsx("img",{src:T,alt:"Anteprima avatar",className:"avatar-img"})}),l.jsxs("div",{className:"d-grid gap-2 mt-3",children:[l.jsxs(V.Label,{className:"btn-upload",children:["Carica nuova immagine",l.jsx(V.Control,{type:"file",accept:"image/*",className:"visually-hidden",onChange:K=>x(K.target.files?.[0]||null)})]}),y&&l.jsx(Oe,{variant:"outline-light",className:"btn-reset-file",onClick:()=>x(null),children:"Rimuovi selezione"})]}),l.jsx("small",{className:"text-white-50 d-block mt-3",children:"Formati consigliati: JPG/PNG, max 2MB, quadrato  400400."})]})}),l.jsx(fe,{lg:8,md:6,children:l.jsxs(ce,{className:"glass-card p-3 edit-card",children:[l.jsx("h5",{className:"section-title",children:"Anagrafica"}),l.jsxs(ze,{className:"g-3",children:[l.jsx(fe,{md:6,children:l.jsxs(V.Group,{controlId:"nome",children:[l.jsx(V.Label,{children:"Nome"}),l.jsx(V.Control,{name:"nome",value:p.nome,onChange:j,required:!0})]})}),l.jsx(fe,{md:6,children:l.jsxs(V.Group,{controlId:"cognome",children:[l.jsx(V.Label,{children:"Cognome"}),l.jsx(V.Control,{name:"cognome",value:p.cognome,onChange:j,required:!0})]})}),l.jsx(fe,{md:6,children:l.jsxs(V.Group,{controlId:"username",children:[l.jsx(V.Label,{children:"Username"}),l.jsx(V.Control,{name:"username",value:p.username,onChange:j})]})}),l.jsx(fe,{md:6,children:l.jsxs(V.Group,{controlId:"email",children:[l.jsx(V.Label,{children:"Email"}),l.jsx(V.Control,{type:"email",name:"email",value:p.email,onChange:j,required:!0})]})}),l.jsx(fe,{md:6,children:l.jsxs(V.Group,{controlId:"matricola",children:[l.jsx(V.Label,{children:"Matricola"}),l.jsx(V.Control,{name:"matricola",value:p.matricola,onChange:j,disabled:!0})]})}),l.jsx(fe,{md:6,children:l.jsxs(V.Group,{controlId:"sede",children:[l.jsx(V.Label,{children:"Sede"}),l.jsx(V.Control,{name:"sede",value:p.sede,onChange:j})]})}),l.jsx(fe,{md:6,children:l.jsxs(V.Group,{controlId:"corsoDiStudi",children:[l.jsx(V.Label,{children:"Corso di studi"}),l.jsxs(V.Select,{name:"corsoDiStudi",value:p.corsoDiStudi,onChange:j,children:[l.jsx("option",{children:"Informatica"}),l.jsx("option",{children:"Ingegneria Informatica"}),l.jsx("option",{children:"Data Science"}),l.jsx("option",{children:"Altro"})]})]})}),l.jsx(fe,{md:6,children:l.jsxs(V.Group,{controlId:"anno",children:[l.jsx(V.Label,{children:"Anno"}),l.jsxs(V.Select,{name:"anno",value:p.anno,onChange:j,children:[l.jsx("option",{value:1,children:"1"}),l.jsx("option",{value:2,children:"2"}),l.jsx("option",{value:3,children:"3"})]})]})}),l.jsx(fe,{xs:12,children:l.jsxs(V.Group,{controlId:"bio",children:[l.jsx(V.Label,{children:"Bio"}),l.jsx(V.Control,{as:"textarea",rows:4,name:"bio",value:p.bio,onChange:j,placeholder:"Una breve descrizione di te"})]})})]})]})}),l.jsx(fe,{lg:6,children:l.jsxs(ce,{className:"glass-card p-3 edit-card",children:[l.jsx("h5",{className:"section-title",children:"Preferenze"}),l.jsx(V.Check,{type:"switch",id:"newsletter",name:"newsletter",label:"Iscrivimi alla newsletter",checked:k.newsletter,onChange:Y}),l.jsx(V.Check,{type:"switch",id:"notifEmail",name:"notifEmail",label:"Ricevi notifiche via email",checked:k.notifEmail,onChange:Y}),l.jsx(V.Check,{type:"switch",id:"notifPush",name:"notifPush",label:"Ricevi notifiche push",checked:k.notifPush,onChange:Y}),l.jsx(V.Check,{type:"switch",id:"profiloPubblico",name:"profiloPubblico",label:"Rendi visibile il profilo ai compagni",checked:k.profiloPubblico,onChange:Y})]})}),l.jsx(fe,{lg:6,children:l.jsxs(ce,{className:"glass-card p-3 edit-card",children:[l.jsx("h5",{className:"section-title",children:"Sicurezza"}),l.jsxs(ze,{className:"g-3",children:[l.jsx(fe,{md:12,children:l.jsxs(V.Group,{controlId:"pwdCurrent",children:[l.jsx(V.Label,{children:"Password attuale"}),l.jsx(V.Control,{type:"password",value:$.current,onChange:K=>B({...$,current:K.target.value}),placeholder:""})]})}),l.jsx(fe,{md:6,children:l.jsxs(V.Group,{controlId:"pwdNext",children:[l.jsx(V.Label,{children:"Nuova password"}),l.jsx(V.Control,{type:"password",value:$.next,onChange:K=>B({...$,next:K.target.value}),placeholder:"Minimo 8 caratteri"})]})}),l.jsx(fe,{md:6,children:l.jsxs(V.Group,{controlId:"pwdConfirm",children:[l.jsx(V.Label,{children:"Conferma password"}),l.jsx(V.Control,{type:"password",value:$.confirm,onChange:K=>B({...$,confirm:K.target.value}),placeholder:"Ripeti la nuova password"})]})})]})]})})]}),l.jsxs("div",{className:"edit-actions",children:[l.jsx(Re,{to:"/studente/profilo",className:"landing-btn outline",children:"Annulla"}),l.jsx("button",{type:"submit",className:"landing-btn primary",disabled:t,children:t?"Salvataggio":"Salva modifiche"})]})]})]})})}function L4(){const n=b.useMemo(()=>[{q:"I dati sono sicuri?",a:"S. I materiali sono trattati secondo le normative sulla privacy e non vengono condivisi senza il tuo consenso."},{q:"Posso caricare qualsiasi tipo di file?",a:"Supportiamo PDF, video, slide e testi. Altri formati (immagini, ZIP) stanno arrivando."},{q:" compatibile con il mio corso?",a:"S, la webapp  pensata per corsi universitari e scolastici di qualunque disciplina."},{q:"Come funziona la chat AI sui materiali?",a:"Carichi i tuoi contenuti (PDF, slide, video) e fai domande in linguaggio naturale. Le risposte citano i passaggi rilevanti e tengono il contesto."},{q:"Come vedo i corsi a cui sono iscritto?",a:"Vai su I miei corsi: trovi stato (in corso, completato), progressi e link rapidi alle lezioni."},{q:"Posso usare lapp da mobile?",a:"Certo. Linterfaccia  responsive e sono supportati i principali browser mobile."},{q:"Come cambio email, username o password?",a:"Apri Profilo  Impostazioni. Puoi aggiornare anagrafica, preferenze, avatar e password."},{q:"Non vedo un corso nel catalogo. Cosa faccio?",a:"Usa Scopri per cercare per titolo/docente/tag. Se non compare, invia una richiesta o contatta il supporto."},{q:"Come vengono calcolati i miei progressi?",a:"Ogni lezione completata aggiorna la percentuale. Alcuni corsi includono quiz che pesano sulla progressione."},{q:"Come contatto il supporto?",a:"Dal menu Profilo  Supporto. In alternativa, apri un ticket dalla pagina del corso."}],[]),e={"@context":"https://schema.org","@type":"FAQPage",mainEntity:n.map(({q:t,a:s})=>({"@type":"Question",name:t,acceptedAnswer:{"@type":"Answer",text:s}}))};return l.jsxs("div",{className:"student-faq-page",children:[l.jsxs(st,{className:"px-0",children:[l.jsxs("header",{className:"faq-hero glass-hero",children:[l.jsx("h1",{className:"faq-title",children:"Domande frequenti"}),l.jsx("p",{className:"faq-sub",children:"Risposte rapide su corsi, chat AI e gestione del profilo."}),l.jsxs("div",{className:"faq-cta",children:[l.jsx(Re,{to:"/studente/corsi",className:"landing-btn primary",children:"I miei corsi"}),l.jsx(Re,{to:"/studente",className:"landing-btn outline",children:"HomePage"})]})]}),l.jsx("section",{className:"faq-accordion",children:n.map(({q:t,a:s},a)=>l.jsxs("details",{className:"faq-item",children:[l.jsxs("summary",{className:"faq-summary",children:[l.jsx("span",{className:"faq-q",children:t}),l.jsx("span",{className:"chev","aria-hidden":!0,children:""})]}),l.jsx("div",{className:"faq-answer",children:s})]},a))}),l.jsxs("section",{className:"faq-help glass-block",children:[l.jsx("h2",{className:"faq-help-title",children:"Non hai trovato quello che cercavi?"}),l.jsxs("p",{className:"faq-help-text",children:["Vai su ",l.jsx(Re,{to:"/supporto",children:"Supporto"})," oppure apri un ticket dalla pagina del corso."]})]})]}),l.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}})]})}function V4(){const[n,e]=b.useState(""),t=Yt(),s=a=>{a.preventDefault();const c=n.trim();t(`/docente/corsi${c?`?q=${encodeURIComponent(c)}`:""}`)};return l.jsx(Br,{expand:"lg",className:"mb-4",children:l.jsxs(st,{fluid:!0,className:"px-0",children:[l.jsx(Br.Brand,{as:Re,to:"/docente",children:"AI-Learning  Docente"}),l.jsx(Br.Toggle,{"aria-controls":"navbar-nav"}),l.jsxs(Br.Collapse,{id:"navbar-nav",children:[l.jsxs(Xi,{className:"nav-bar",children:[l.jsx(Xi.Link,{as:Re,to:"/docente/dashboard",children:"Dashboard"}),l.jsx(Xi.Link,{as:Re,to:"/docente/corsi",children:"Corsi"}),l.jsx(Xi.Link,{as:Re,to:"/docente/valutazioni",children:"Valutazioni"}),l.jsx(Xi.Link,{as:Re,to:"/docente/profilo",children:"Profilo"}),l.jsxs(Bs,{title:"Altro",id:"basic-nav-dropdown",children:[l.jsx(Bs.Item,{as:Re,to:"/docente/faq",children:"FAQ Docente"}),l.jsx(Bs.Item,{as:Re,to:"/docente/impostazioni",children:"Impostazioni"}),l.jsx(Bs.Divider,{}),l.jsx(Bs.Item,{as:Re,to:"/logout",children:"Logout"})]})]}),l.jsxs(V,{className:"d-flex ms-auto",onSubmit:s,children:[l.jsx(Vy,{type:"search",placeholder:"Cerca...",className:"me-2","aria-label":"Cerca",value:n,onChange:a=>e(a.target.value)}),l.jsx(Oe,{type:"submit",className:"btn-cerca",children:"Cerca"})]})]})]})})}const z4=""+new URL("hero-illustration-TeacherApp-Csn9LXvh.png",import.meta.url).href;function U4(){const n=Oi(),e=Yt(),t=n.pathname==="/docente",s=b.useRef(null),[a,c]=b.useState(420);return b.useEffect(()=>{const d=()=>{if(s.current){const p=Math.round(s.current.getBoundingClientRect().height);p>0&&c(p)}};let m=null;return typeof ResizeObserver<"u"&&s.current&&(m=new ResizeObserver(()=>d()),m.observe(s.current)),d(),window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d),m&&s.current&&m.unobserve(s.current)}},[]),l.jsxs(l.Fragment,{children:[l.jsx(V4,{}),l.jsx("main",{className:t?"landing":"",children:t?l.jsxs("section",{className:"landing-stickyLayout",children:[l.jsxs("div",{className:"landing-col-left",children:[l.jsx("div",{className:"landing-hero",children:l.jsxs("div",{className:"landing-hero-inner",children:[l.jsx("h1",{className:"landing-title",children:"Insegna in modo pi smart"}),l.jsx("p",{className:"landing-subtitle",children:"Centralizza corsi, lezioni, materiali e valutazioni. LAI ti aiuta a creare contenuti, rispondere ai dubbi e monitorare landamento della classe."}),l.jsxs("div",{className:"landing-cta",children:[l.jsx("button",{className:"landing-btn primary",onClick:()=>e("/docente/corsi"),children:"I miei corsi"}),l.jsx("button",{className:"landing-btn outline",onClick:()=>e("/docente/corsi/nuovo"),children:"Crea nuovo corso"})]})]})}),l.jsxs("div",{className:"landing-demo",id:"demo",children:[l.jsx("h2",{className:"landing-title",children:"Assistente Docente AI"}),l.jsx("p",{className:"landing-subtitle",children:"Chiedi di generare quiz dalle tue slide, riassunti di PDF, o risposte alle FAQ degli studenti."}),l.jsx("div",{className:"chat-container",children:l.jsx(as,{variant:"standalone",showHeader:!0,placeholder:"Chiedi alla ChatAI..."})})]}),l.jsxs("section",{className:"landing-section landing-benefits",children:[l.jsx("h2",{className:"landing-heading",children:"Benefici per il docente"}),l.jsxs("ul",{className:"landing-benefitList",children:[l.jsx("li",{children:" Generazione rapida di quiz, riassunti e materiali"}),l.jsx("li",{children:" Insight su domande e difficolt pi frequenti"}),l.jsx("li",{children:" Meno tempo su email/FAQ ripetitive"}),l.jsx("li",{children:" Collaborazione con tutor e co-docenti"})]})]}),l.jsxs("section",{className:"landing-section landing-features",children:[l.jsx("h2",{className:"landing-heading",children:"Cosa puoi fare"}),l.jsxs("div",{className:"landing-featureGrid",children:[l.jsx("div",{className:"landing-featureCard",children:" Gestione corsi e lezioni"}),l.jsx("div",{className:"landing-featureCard",children:" Upload e organizzazione materiali"}),l.jsx("div",{className:"landing-featureCard",children:" Valutazioni e feedback"}),l.jsx("div",{className:"landing-featureCard",children:" Generazione quiz/riassunti (AI)"})]})]}),l.jsxs("section",{className:"landing-section landing-faq",children:[l.jsx("h2",{className:"landing-heading",children:"Domande frequenti"}),l.jsxs("details",{className:"landing-faqItem",children:[l.jsx("summary",{children:"Come creo un corso?"}),l.jsx("p",{children:"Vai su I miei corsi e premi Crea nuovo corso. Potrai aggiungere sezioni, lezioni e materiali."})]}),l.jsxs("details",{className:"landing-faqItem",children:[l.jsx("summary",{children:"Come genero un quiz dalle slide?"}),l.jsx("p",{children:"Apri la lezione, carica le slide e usa lassistente AI per generare domande a risposta multipla."})]}),l.jsxs("details",{className:"landing-faqItem",children:[l.jsx("summary",{children:"Posso pubblicare bozze in privato?"}),l.jsx("p",{children:"S, ogni lezione pu restare in bozza finch non la pubblichi agli studenti."})]}),l.jsx("div",{className:"landing-faqButtonWrapper",children:l.jsx("button",{className:"landing-btn primary",onClick:()=>e("/docente/faq"),children:"Vai alla sezione FAQ Docente"})})]})]}),l.jsx("div",{className:"landing-col-right",children:l.jsx("div",{className:"landing-imageCard",children:l.jsx("img",{ref:s,src:z4,alt:"Docente che gestisce corsi e materiali"})})})]}):l.jsx(mf,{})})]})}function gv(n){const e=n.data();return{id:n.id,titolo:e.titolo||"",descrizione:e.descrizione||"",stato:e.stato||"attivo",imageUrl:e.imageUrl??null,introduzione:e.introduzione||{},createdAt:e.createdAt||null}}const UT=n=>{const e=n.data();return{id:n.id,title:e.title||"",description:e.description||"",order:e.order??0,createdAt:e.createdAt||null}},B4=n=>{const e=n.data();return{id:n.id,title:e.title||"",description:e.description||"",duration:e.duration||"",fileTypes:e.fileTypes||[],videoUrl:e.videoUrl||"",type:e.type||null,createdAt:e.createdAt||null}};async function q4({titolo:n,descrizione:e,stato:t="attivo",introd:s={},initialSectionTitle:a,initialLesson:c}){const d=pn.currentUser?.uid;if(!d)throw new Error("not-authenticated");const m=await lu(Bn(tt,"courses"),{titolo:n,descrizione:e,stato:t,ownerId:d,imageUrl:null,introduzione:{academicYear:s.academicYear||"",professor:s.professor||"",degree:s.degree||"",semester:s.semester||"",credits:s.credits??null,notes:s.notes||"",officeHoursTitle:s.officeHoursTitle||"",officeHours:s.officeHours||""},createdAt:sn(),updatedAt:sn()});if(a){const p=await lu(Bn(tt,"courses",m.id,"sections"),{title:a,description:"",order:1,createdAt:sn(),updatedAt:sn()});c?.title&&await lu(Bn(tt,"courses",m.id,"sections",p.id,"lessons"),{title:c.title,description:c.description||"",duration:c.duration||"",fileTypes:c.fileTypes||[],videoUrl:c.videoUrl||"",type:c.type||null,createdAt:sn(),updatedAt:sn()})}return m.id}async function F4(n,{titolo:e,descrizione:t,introd:s={}}){const a=pn.currentUser?.uid;if(!a)throw new Error("not-authenticated");const c=rn(tt,"courses",n),d=await Xs(c);if(!d.exists())throw new Error("not-found");if(d.data().ownerId!==a)throw new Error("forbidden");await py(c,{titolo:e,descrizione:t,introduzione:{academicYear:s.academicYear||"",professor:s.professor||"",degree:s.degree||"",semester:s.semester||"",credits:s.credits??null,notes:s.notes||"",officeHoursTitle:s.officeHoursTitle||"",officeHours:s.officeHours||""},updatedAt:sn()})}async function Xy(n){const e=rn(tt,"courses",n),t=await Xs(e);return t.exists()?gv(t):null}async function Dj(){const n=pn.currentUser?.uid;if(!n)throw new Error("not-authenticated");try{const e=af(Bn(tt,"courses"),av("ownerId","==",n),fy("createdAt","desc"));return(await Ws(e)).docs.map(gv)}catch(e){if(e?.code==="failed-precondition"){const t=af(Bn(tt,"courses"),av("ownerId","==",n));return(await Ws(t)).docs.map(gv).sort((a,c)=>(c.createdAt?.seconds||0)-(a.createdAt?.seconds||0))}throw e}}async function Mj(n){try{const e=af(Bn(tt,"courses",n,"sections"),fy("order","asc"));return(await Ws(e)).docs.map(UT)}catch{return(await Ws(Bn(tt,"courses",n,"sections"))).docs.map(UT).sort((t,s)=>t.order-s.order)}}async function H4(n,{title:e,description:t="",order:s=1}){return(await lu(Bn(tt,"courses",n,"sections"),{title:e,description:t,order:s,createdAt:sn(),updatedAt:sn()})).id}async function $4(n,e){const t=await Ws(Bn(tt,"courses",n,"sections",e,"lessons"));let s=iT(tt),a=0;for(const c of t.docs)s.delete(c.ref),a++,a===450&&(await s.commit(),s=iT(tt),a=0);a>0&&await s.commit(),await PA(rn(tt,"courses",n,"sections",e))}async function Wy(n,e){return(await Ws(Bn(tt,"courses",n,"sections",e,"lessons"))).docs.map(B4)}async function G4(n,e,t){return(await lu(Bn(tt,"courses",n,"sections",e,"lessons"),{title:t.title,description:t.description||"",duration:t.duration||"",fileTypes:t.fileTypes||[],videoUrl:t.videoUrl||"",type:t.type||null,createdAt:sn(),updatedAt:sn()})).id}async function K4(n,e,t,s){const a=rn(tt,"courses",n,"sections",e,"lessons",t),c={updatedAt:sn()};["title","description","duration","videoUrl","type"].forEach(d=>{s[d]!==void 0&&(c[d]=s[d])}),Array.isArray(s.fileTypes)&&(c.fileTypes=s.fileTypes),await py(a,c)}async function Q4(n,e,t){const s=rn(tt,"courses",n,"sections",e,"lessons",t);await PA(s)}function Y4({corso:n}){return l.jsx(Re,{to:`/docente/corsi/${n.id}`,className:"text-decoration-none",children:l.jsxs(ce,{className:"h-100 glass-card clickable-card",children:[l.jsxs(ce.Body,{children:[l.jsx(ce.Title,{className:"courseTitle mb-1",id:"title",children:n.titolo}),l.jsx("div",{className:"small text-muted mb-2",children:"Iscritti:  "}),n.descrizione&&l.jsx(ce.Text,{className:"mb-3",children:n.descrizione}),l.jsxs("div",{className:"course-meta mb-2 d-flex gap-2 flex-wrap",children:[Number.isFinite(n?.introduzione?.credits)&&l.jsxs(Ye,{bg:"light",text:"dark",children:[n.introduzione.credits," CFU"]}),n?.introduzione?.semester&&l.jsx(Ye,{bg:"light",text:"dark",children:n.introduzione.semester})]}),l.jsx("div",{className:"course-tags d-flex gap-2 flex-wrap"})]}),l.jsx(ce.Footer,{children:l.jsx("small",{className:"text-muted",children:n.stato.charAt(0).toUpperCase()+n.stato.slice(1)})})]})})}function X4(){const[n,e]=bR();Yt();const t=(n.get("q")||"").toLowerCase(),[s,a]=b.useState([]),[c,d]=b.useState(!0);b.useEffect(()=>{let p=!0;return Dj().then(g=>{p&&a(g)}).finally(()=>{p&&d(!1)}),()=>{p=!1}},[]);const m=s.filter(p=>[p.titolo,p.descrizione,p?.introduzione?.professor,p?.introduzione?.semester,String(p?.introduzione?.credits)].join(" ").toLowerCase().includes(t));return l.jsxs(st,{className:"py-4",children:[l.jsxs("section",{className:"glass-hero text-white mb-5",children:[l.jsx("h1",{className:"fw-bold hero-title",children:"I miei corsi"}),l.jsx("p",{className:"hero-subtitle",children:"Crea, organizza e aggiorna i tuoi corsi. Aggiungi lezioni e materiali in pochi clic."}),l.jsx("div",{className:"hero-actions d-flex justify-content-center flex-wrap gap-2",children:l.jsx(Re,{to:"/docente/corsi/nuovo",className:"landing-btn primary",children:"+ Crea nuovo corso"})})]}),l.jsxs(ze,{className:"g-3",children:[c&&l.jsx(fe,{children:l.jsx("p",{className:"text-white-50",children:"Caricamento corsi"})}),!c&&m.map(p=>l.jsx(fe,{xs:12,md:6,lg:4,children:l.jsx(Y4,{corso:p})},p.id)),m.length===0&&l.jsx(fe,{children:l.jsx("p",{className:"text-white-50",children:"Nessun corso trovato."})})]})]})}function W4(){const{courseId:n}=ti();Yt();const[e,t]=b.useState(null),[s,a]=b.useState([]),[c,d]=b.useState(!0),[m,p]=b.useState(!1),[g,y]=b.useState(!1),[x,T]=b.useState(null),[S,j]=b.useState(null);b.useEffect(()=>{let B=!0;return(async()=>{try{d(!0);const q=await Xy(n);if(!B||(t(q||null),!q))return;const H=await Mj(n);if(!B)return;const K=[];for(const M of H){const N=await Wy(n,M.id);K.push({...M,lessons:N})}a(K)}catch(q){console.error("TeacherCourseDetail load:",q),t(null)}finally{B&&d(!1)}})(),()=>{B=!1}},[n]);const k=B=>{T(B),p(!0)},I=(B,q)=>{T(B),j(q),y(!0)},Y=async()=>{try{await $4(n,x),a(B=>B.filter(q=>q.id!==x))}catch(B){console.error("deleteSectionDeep:",B),alert("Errore durante leliminazione della sezione.")}finally{p(!1),T(null)}},$=async()=>{try{await Q4(n,x,S),a(B=>B.map(q=>q.id===x?{...q,lessons:(q.lessons||[]).filter(H=>H.id!==S)}:q))}catch(B){console.error("deleteLesson:",B),alert("Errore durante leliminazione della lezione.")}finally{y(!1),T(null),j(null)}};return c?l.jsx(st,{className:"py-4 text-white",children:"Caricamento"}):e?l.jsxs("div",{className:"course-detail-page",children:[l.jsx("h2",{className:"cd-title",children:e.titolo}),l.jsx("div",{className:"glass-nav-container glass-nav",children:l.jsxs(Yy,{defaultActiveKey:"corso",id:"teacher-course-detail-tabs",className:"cd-tabs",children:[l.jsxs(gl,{eventKey:"corso",title:"Corso",children:[l.jsxs("div",{className:"glass-intro-container mb-4",children:[l.jsx("div",{className:"intro-year",children:e.introduzione?.academicYear}),l.jsx("h5",{className:"intro-professor",children:e.introduzione?.professor}),l.jsxs("div",{className:"intro-degree",children:[e.introduzione?.degree,"  ",e.introduzione?.semester,Number.isFinite(e.introduzione?.credits)?`, ${e.introduzione.credits} CFU`:""]}),l.jsx("hr",{}),l.jsx("div",{className:"intro-notes",children:e.introduzione?.notes}),l.jsx("h6",{className:"intro-office-title",children:e.introduzione?.officeHoursTitle}),l.jsx("div",{className:"intro-office",children:e.introduzione?.officeHours}),l.jsx("hr",{}),l.jsx("h5",{children:"Obiettivi del corso"}),l.jsx("p",{children:e.descrizione}),l.jsx("div",{className:"text-center mt-3",children:l.jsx(Oe,{as:Re,to:`/docente/corsi/${n}/modifica`,className:"btn-glass",children:" Modifica info corso"})})]}),s.length===0?l.jsx("p",{className:"text-white-50",children:"Nessuna sezione presente. Aggiungine una qui sotto."}):l.jsx(vi,{alwaysOpen:!0,defaultActiveKey:s.map(B=>B.id),className:"cd-accordion",children:s.map(B=>l.jsxs(vi.Item,{eventKey:B.id,children:[l.jsxs(vi.Header,{children:[l.jsx("span",{className:"cd-section-title",children:B.title}),l.jsx("div",{className:"cd-section-actions",onClick:q=>q.stopPropagation(),children:l.jsx(Oe,{size:"sm",className:"btn btn-sm btn-glass",id:"eliminaSezione",onClick:()=>k(B.id),children:"Elimina sezione"})})]}),l.jsxs(vi.Body,{children:[l.jsx(hf,{variant:"flush",children:(B.lessons||[]).map(q=>l.jsxs(hf.Item,{className:"glass-card clickable-card mb-2 d-flex justify-content-between align-items-center",children:[l.jsxs("div",{children:[l.jsx("span",{children:q.title})," ",l.jsxs("small",{className:"text-muted ms-3",children:["[",(q.fileTypes||[]).join(", "),"]"]})]}),l.jsxs("div",{className:"d-flex gap-2",children:[l.jsx(Re,{className:"btn btn-sm btn-glass",to:`/docente/corsi/${n}/sezioni/${B.id}/lezioni/${q.id}`,children:"Anteprima"}),l.jsx(Re,{className:"btn btn-sm btn-glass",to:`/docente/corsi/${n}/sezioni/${B.id}/lezioni/${q.id}/modifica`,children:"Modifica"}),l.jsx(Oe,{size:"sm",className:"btn btn-sm btn-glass btn-delete",onClick:()=>I(B.id,q.id),children:""})]})]},q.id))}),l.jsx(Oe,{as:Re,to:`/docente/corsi/${n}/sezioni/${B.id}/lezioni/nuova`,className:"btn-glass mt-2",children:"+ Aggiungi lezione"})]})]},B.id))}),l.jsx("div",{className:"text-center mt-4",children:l.jsx(Oe,{as:Re,to:`/docente/corsi/${n}/sezioni/nuova`,className:"btn-glass",children:"+ Aggiungi sezione"})})]}),l.jsx(gl,{eventKey:"valutazioni",title:"Valutazioni",children:l.jsx("p",{children:"Gestisci valutazioni, compiti ed esoneri (placeholder)."})}),l.jsx(gl,{eventKey:"materiali",title:"Materiali",children:l.jsx("p",{children:"Carica e organizza i materiali del corso (placeholder)."})})]})}),l.jsx("div",{className:"text-center mt-3",children:l.jsx(Re,{to:"/docente/corsi",className:"landing-btn outline",children:"Torna ai corsi"})}),l.jsxs(gt,{show:m,onHide:()=>p(!1),centered:!0,children:[l.jsx(gt.Header,{closeButton:!0,className:"glass-modal-header",children:l.jsx(gt.Title,{children:"Conferma eliminazione"})}),l.jsx(gt.Body,{className:"glass-modal-body",children:"Sei sicuro di voler eliminare questa sezione? Verranno eliminate anche le lezioni contenute."}),l.jsxs(gt.Footer,{className:"glass-modal-footer",children:[l.jsx(Oe,{className:"btn-glass-outline",onClick:()=>p(!1),children:"Annulla"}),l.jsx(Oe,{className:"btn-glass",onClick:Y,children:"Elimina"})]})]}),l.jsxs(gt,{show:g,onHide:()=>y(!1),centered:!0,children:[l.jsx(gt.Header,{closeButton:!0,className:"glass-modal-header",children:l.jsx(gt.Title,{children:"Conferma eliminazione"})}),l.jsx(gt.Body,{className:"glass-modal-body",children:"Sei sicuro di voler eliminare questa lezione?"}),l.jsxs(gt.Footer,{className:"glass-modal-footer",children:[l.jsx(Oe,{className:"btn-glass-outline",onClick:()=>y(!1),children:"Annulla"}),l.jsx(Oe,{className:"btn-glass",onClick:$,children:"Elimina"})]})]})]}):l.jsx(st,{className:"py-4 text-white",children:"Corso non trovato."})}function Z4(){const{courseId:n}=ti(),e=Yt(),[t,s]=b.useState(""),[a,c]=b.useState(""),d=async m=>{m.preventDefault();try{await H4(n,{title:t,description:a,order:1}),e(`/docente/corsi/${n}`)}catch(p){console.error("createSection:",p),alert("Impossibile creare la sezione.")}};return l.jsx(st,{className:"py-4 teacher-section-new",children:l.jsx(ce,{className:"glass-surface lesson-card",children:l.jsxs(ce.Body,{className:"lesson-card__body lesson-stack",children:[l.jsx("div",{className:"lesson-card__inner header-inner",children:l.jsxs("header",{className:"lesson-header",children:[l.jsx("h1",{className:"hero-title m-0",children:"Crea nuova sezione"}),l.jsx("p",{className:"hero-subtitle",children:"Definisci titolo e descrizione per organizzare meglio le lezioni del corso."})]})}),l.jsx("div",{className:"lesson-card__inner form-inner",children:l.jsxs(V,{onSubmit:d,children:[l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Titolo sezione"}),l.jsx(V.Control,{placeholder:"Es. Introduzione a JavaScript",value:t,onChange:m=>s(m.target.value),required:!0})]}),l.jsxs(V.Group,{className:"mb-4",children:[l.jsx(V.Label,{children:"Descrizione"}),l.jsx(V.Control,{as:"textarea",rows:3,placeholder:"Breve descrizione della sezione...",value:a,onChange:m=>c(m.target.value)})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(Oe,{type:"button",className:"btn-fixed btn-cancel",onClick:()=>e(-1),children:"Annulla"}),l.jsx(Oe,{type:"submit",className:"btn-fixed btn-confirm",children:"Crea"})]})]})})]})})})}function J4(){const{courseId:n,secId:e,sectionId:t,lezId:s,lessonId:a}=ti(),c=e||t,d=s||a,m=Yt(),[p,g]=b.useState(null),[y,x]=b.useState(!0),[T,S]=b.useState(""),[j,k]=b.useState(""),[I,Y]=b.useState(""),[$,B]=b.useState(!1),[q,H]=b.useState(!1),[K,M]=b.useState("");b.useEffect(()=>{let D=!0;return x(!0),Wy(n,c).then(P=>{if(!D)return;const L=P.find(C=>String(C.id)===String(d))||null;if(g(L),L){S(L.title||""),k(L.description||""),Y(L.duration||"");const C=Array.isArray(L.fileTypes)?L.fileTypes:[];B(C.includes("video")),H(C.includes("pdf")),M(L.videoUrl||"")}}).catch(P=>{console.error("TeacherLessonEdit.listLessons",P),g(null)}).finally(()=>D&&x(!1)),()=>{D=!1}},[n,c,d]);const N=b.useMemo(()=>[...$?["video"]:[],...q?["pdf"]:[]],[$,q]),O=async D=>{D.preventDefault();try{await K4(n,c,d,{title:T,description:j,duration:I,fileTypes:N,videoUrl:$?K:"",type:$?"video":q?"reading":null}),m(`/docente/corsi/${n}`)}catch(P){console.error("updateLesson",P),alert("Impossibile aggiornare la lezione.")}};return y?l.jsx(st,{className:"py-4 text-white",children:"Caricamento"}):p?l.jsx(st,{className:"py-4 teacher-lesson-edit",children:l.jsx(ce,{className:"glass-surface lesson-card",children:l.jsxs(ce.Body,{className:"lesson-card__body lesson-stack",children:[l.jsx("div",{className:"lesson-card__inner header-inner",children:l.jsxs("header",{className:"lesson-header",children:[l.jsx("h1",{className:"hero-title m-0",children:"Modifica lezione"}),l.jsx("p",{className:"hero-subtitle",children:"Aggiorna titolo, tipologie e risorse collegate alla lezione esistente."})]})}),l.jsx("div",{className:"lesson-card__inner form-inner",children:l.jsxs(V,{onSubmit:O,children:[l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Titolo"}),l.jsx(V.Control,{value:T,onChange:D=>S(D.target.value),required:!0})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Tipologia contenuto"}),l.jsxs("div",{className:"d-flex flex-wrap gap-2 mb-2",children:[l.jsx(V.Check,{type:"checkbox",id:"chk-video",label:"Contiene Video",checked:$,onChange:D=>B(D.target.checked)}),l.jsx(V.Check,{type:"checkbox",id:"chk-pdf",label:"Contiene PDF",checked:q,onChange:D=>H(D.target.checked)})]}),l.jsx("div",{className:"mb-2",children:N.length>0?N.map(D=>l.jsx(Ye,{bg:"light",text:"dark",className:"me-1",children:D},D)):l.jsx(Ye,{bg:"light",text:"dark",children:"nessun tipo selezionato"})})]}),$&&l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Link Video"}),l.jsx(V.Control,{type:"url",placeholder:"https://",value:K,onChange:D=>M(D.target.value)})]}),q&&l.jsxs(V.Group,{className:"mb-4",children:[l.jsx(V.Label,{children:"Carica nuovo PDF"}),l.jsx(V.Control,{type:"file",accept:"application/pdf"}),l.jsx(V.Text,{className:"text-muted",children:"Per ora salviamo solo i metadati."})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Durata (opzionale)"}),l.jsx(V.Control,{placeholder:"Es. 15 min",value:I,onChange:D=>Y(D.target.value)})]}),l.jsxs(V.Group,{className:"mb-4",children:[l.jsx(V.Label,{children:"Descrizione (opzionale)"}),l.jsx(V.Control,{as:"textarea",rows:3,placeholder:"Breve descrizione",value:j,onChange:D=>k(D.target.value)})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(Oe,{type:"button",className:"btn-fixed btn-cancel",onClick:()=>m(-1),children:"Annulla"}),l.jsx(Oe,{type:"submit",className:"btn-fixed btn-confirm",children:"Salva"})]})]})})]})})}):l.jsx(st,{className:"py-4 text-white",children:"Lezione non trovata."})}function e3(){const{courseId:n,secId:e}=ti(),t=Yt(),[s,a]=b.useState(""),[c,d]=b.useState(""),[m,p]=b.useState("video"),[g,y]=b.useState(""),[x,T]=b.useState(""),S=m==="videopdf"?["video","pdf"]:m==="video"?["video"]:["pdf"],j=async k=>{k.preventDefault();try{await G4(n,e,{title:s,description:c,duration:g,fileTypes:S,videoUrl:m==="video"||m==="videopdf"?x:"",type:m==="video"?"video":m==="pdf"?"reading":"video"}),t(`/docente/corsi/${n}`)}catch(I){console.error("createLesson:",I),alert("Impossibile creare la lezione.")}};return l.jsxs(st,{className:"py-4 teacher-lesson-new",children:[l.jsx(ce,{className:"glass-surface lesson-card",children:l.jsxs(ce.Body,{className:"lesson-card__body lesson-stack",children:[l.jsx("div",{className:"lesson-card__inner header-inner",children:l.jsxs("header",{className:"lesson-header",children:[l.jsx("h1",{className:"hero-title m-0",children:"Crea nuova lezione"}),l.jsx("p",{className:"hero-subtitle",children:"Imposta titolo, tipologia dei file multimediali (Video, PDF o entrambi) e carica il materiale."})]})}),l.jsx("div",{className:"lesson-card__inner form-inner",children:l.jsxs(V,{onSubmit:j,children:[l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Titolo"}),l.jsx(V.Control,{placeholder:"Es. Closure e Scope",value:s,onChange:k=>a(k.target.value),required:!0})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Tipologia contenuto"}),l.jsxs("div",{className:"d-flex flex-wrap gap-2 mb-2 type-buttons",children:[l.jsx(Oe,{type:"button",className:`lesson-type-btn ${m==="video"?"active":""}`,onClick:()=>p("video"),children:" Video"}),l.jsx(Oe,{type:"button",className:`lesson-type-btn ${m==="pdf"?"active":""}`,onClick:()=>p("pdf"),children:" PDF"}),l.jsx(Oe,{type:"button",className:`lesson-type-btn ${m==="videopdf"?"active":""}`,onClick:()=>p("videopdf"),children:" +  Entrambi"})]}),l.jsx("div",{children:S.map(k=>l.jsx(Ye,{bg:"light",text:"dark",className:"me-1",children:k},k))})]}),(m==="video"||m==="videopdf")&&l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Link Video"}),l.jsx(V.Control,{type:"url",placeholder:"https://",value:x,onChange:k=>T(k.target.value),required:m!=="pdf"}),l.jsx(V.Text,{className:"text-muted",children:"Inserisci il link al video (YouTube, Vimeo, ecc.)."})]}),(m==="pdf"||m==="videopdf")&&l.jsxs(V.Group,{className:"mb-4",children:[l.jsx(V.Label,{children:"Carica PDF"}),l.jsx(V.Control,{type:"file",accept:"application/pdf",required:m!=="video"}),l.jsx(V.Text,{className:"text-muted",children:"Per ora salveremo solo i metadati (niente upload su Storage)."})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Durata (opzionale)"}),l.jsx(V.Control,{placeholder:"Es. 15 min",value:g,onChange:k=>y(k.target.value)})]}),l.jsxs(V.Group,{className:"mb-4",children:[l.jsx(V.Label,{children:"Descrizione (opzionale)"}),l.jsx(V.Control,{as:"textarea",rows:3,placeholder:"Breve descrizione della lezione",value:c,onChange:k=>d(k.target.value)})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(Oe,{type:"button",className:"btn-fixed btn-cancel",onClick:()=>t(-1),children:"Annulla"}),l.jsx(Oe,{type:"submit",className:"btn-fixed btn-confirm",children:"Crea"})]})]})})]})}),l.jsx("div",{className:"text-center mt-3",children:l.jsx(Oe,{type:"button",className:"btn-glass-outline",onClick:()=>t(`/docente/corsi/${n}`),children:"Torna al corso"})})]})}function t3(){const{courseId:n,secId:e,sectionId:t,lezId:s,lessonId:a}=ti(),c=e||t,d=s||a,[m,p]=b.useState(!0),[g,y]=b.useState(!0),[x,T]=b.useState(null),[S,j]=b.useState(!0),[k,I]=b.useState("video"),Y=b.useRef(null),[$,B]=b.useState(0);if(b.useEffect(()=>{const L=()=>{Y.current&&B(Y.current.offsetHeight)};return L(),window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]),b.useEffect(()=>{let L=!0;return(async()=>{try{j(!0);const C=await Xy(n);if(!L)return;if(!C){p(!1),j(!1);return}const ve=await Mj(n);if(!L)return;const we=ve.some(re=>String(re.id)===String(c));if(y(we),!we){j(!1);return}const X=await Wy(n,c);if(!L)return;T(X.find(re=>String(re.id)===String(d))||null)}catch(C){console.error("TeacherLessonPreview load",C),T(null)}finally{L&&j(!1)}})(),()=>{L=!1}},[n,c,d]),S)return l.jsx("div",{className:"lesson-video-page",children:l.jsx("h1",{className:"lesson-title",children:"Caricamento"})});if(!m)return l.jsx("div",{className:"lesson-video-page",children:l.jsx("h1",{className:"lesson-title",children:"Corso non trovato"})});if(!g)return l.jsx("div",{className:"lesson-video-page",children:l.jsx("h1",{className:"lesson-title",children:"Sezione non trovata"})});if(!x)return l.jsx("div",{className:"lesson-video-page",children:l.jsx("h1",{className:"lesson-title",children:"Lezione non trovata"})});const q=x.title||"",H=x.description||"",K=String(x.type||"").toLowerCase(),M=Array.isArray(x.fileTypes)?x.fileTypes.map(L=>String(L).toLowerCase()):[],N=M.includes("video")||K==="video"||!!x.videoUrl,O=M.includes("pdf")||["pdf","reading"].includes(K)||!!x.pdfUrl,D=x.videoUrl||"",P=x.pdfUrl||"";return N&&!O?l.jsxs("div",{className:"lesson-video-page",children:[l.jsx("h1",{className:"lesson-title",children:q}),H&&l.jsx("p",{className:"lesson-description",children:H}),l.jsxs("div",{className:"lesson-content",children:[l.jsx("div",{className:"video-container",ref:Y,children:D?l.jsx("video",{controls:!0,style:{width:"100%",height:"100%",borderRadius:12},src:D}):l.jsx("div",{style:{color:"#fff",padding:"1rem"},children:"Video mancante"})}),l.jsx("div",{className:"chat-container",children:l.jsx(as,{variant:"standalone",showHeader:!0,placeholder:"Chiedi alla ChatAI..."})})]}),l.jsxs("div",{className:"lesson-summary",children:[l.jsx("h2",{children:"Riassunto della lezione Video"}),l.jsxs("p",{children:["Qui verr visualizzato un riassunto ",k==="video"?"del video":"del PDF"," creato utilizzando AI, per ora aggiungo un placeholder per riempire lo spazio.",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quam perferendis provident sequi dolor, explicabo odio sunt reprehenderit eos, repudiandae iure repellendus modi, expedita qui fuga cumque. Consequuntur, rerum ut? Quasi, tempora corrupti voluptatibus facere expedita rem, quae recusandae nihil perspiciatis blanditiis excepturi. Culpa voluptatibus explicabo fuga dolor sint maxime, soluta voluptatem nobis quam est illo repellendus consequatur eaque pariatur ex, suscipit ab quos at cum? Aspernatur facere eligendi quo quisquam! Placeat provident aut magnam eius non soluta voluptatem quisquam ipsum, aliquam obcaecati. Exercitationem nostrum laboriosam facilis accusantium et porro fugiat illo perferendis magni expedita eaque corrupti, iusto, illum doloremque dolores?",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Illum suscipit voluptatem beatae neque deserunt tenetur, eligendi placeat harum et animi exercitationem iusto quo reprehenderit asperiores eius adipisci consequuntur voluptates maxime optio eveniet laborum! Minus perspiciatis omnis iure maiores debitis illo ullam. Quo amet esse repudiandae nobis aspernatur error est incidunt?",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eligendi voluptates recusandae omnis obcaecati consequatur, praesentium magnam aliquid architecto autem reprehenderit quibusdam, officiis facere! Commodi id nihil laborum sit vero non consectetur aut voluptatem excepturi mollitia nemo architecto, hic perferendis officia quas iure iusto earum. Impedit sunt porro dignissimos non at accusamus nemo voluptas quibusdam deleniti eius iusto aliquam magnam suscipit magni quasi sed, mollitia ipsa animi tempore ullam quae rerum."]})]})]}):!N&&O?l.jsxs("div",{className:"lesson-pdf-page",children:[l.jsx("h1",{className:"lesson-title",children:q}),H&&l.jsx("p",{className:"lesson-description",children:H}),l.jsxs("div",{className:"lesson-content",children:[l.jsx("div",{className:"media-pane",ref:Y,children:l.jsx("div",{className:"pdf-container",children:P?l.jsx("iframe",{title:"pdf",src:P,style:{width:"100%",height:"100%",border:0,borderRadius:12}}):l.jsx("div",{style:{padding:"1rem"},children:"PDF mancante"})})}),l.jsx("div",{className:"chat-container",style:{minHeight:$},children:l.jsx(as,{variant:"standalone",showHeader:!0,placeholder:"Chiedi alla ChatAI..."})})]}),l.jsxs("div",{className:"lesson-summary",children:[l.jsx("h2",{children:"Riassunto della lezione PDF"}),l.jsxs("p",{children:["Qui verr visualizzato un riassunto ",k==="video"?"del video":"del PDF"," creato utilizzando AI, per ora aggiungo un placeholder per riempire lo spazio.",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quam perferendis provident sequi dolor, explicabo odio sunt reprehenderit eos, repudiandae iure repellendus modi, expedita qui fuga cumque. Consequuntur, rerum ut? Quasi, tempora corrupti voluptatibus facere expedita rem, quae recusandae nihil perspiciatis blanditiis excepturi. Culpa voluptatibus explicabo fuga dolor sint maxime, soluta voluptatem nobis quam est illo repellendus consequatur eaque pariatur ex, suscipit ab quos at cum? Aspernatur facere eligendi quo quisquam! Placeat provident aut magnam eius non soluta voluptatem quisquam ipsum, aliquam obcaecati. Exercitationem nostrum laboriosam facilis accusantium et porro fugiat illo perferendis magni expedita eaque corrupti, iusto, illum doloremque dolores?",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Illum suscipit voluptatem beatae neque deserunt tenetur, eligendi placeat harum et animi exercitationem iusto quo reprehenderit asperiores eius adipisci consequuntur voluptates maxime optio eveniet laborum! Minus perspiciatis omnis iure maiores debitis illo ullam. Quo amet esse repudiandae nobis aspernatur error est incidunt?",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eligendi voluptates recusandae omnis obcaecati consequatur, praesentium magnam aliquid architecto autem reprehenderit quibusdam, officiis facere! Commodi id nihil laborum sit vero non consectetur aut voluptatem excepturi mollitia nemo architecto, hic perferendis officia quas iure iusto earum. Impedit sunt porro dignissimos non at accusamus nemo voluptas quibusdam deleniti eius iusto aliquam magnam suscipit magni quasi sed, mollitia ipsa animi tempore ullam quae rerum."]})]})]}):l.jsxs("div",{className:"lesson-videopdf-page",children:[l.jsx("h1",{className:"lesson-title",children:q}),H&&l.jsx("p",{className:"lesson-description",children:H}),l.jsxs("div",{className:"view-toggle",children:[l.jsx("button",{className:k==="video"?"active":"",onClick:()=>I("video"),children:"Video"}),l.jsx("button",{className:k==="pdf"?"active":"",onClick:()=>I("pdf"),children:"PDF"})]}),l.jsxs("div",{className:"lesson-content",children:[l.jsx("div",{className:"media-pane",ref:Y,children:k==="video"?l.jsx("div",{className:"video-container",children:D?l.jsx("video",{controls:!0,style:{width:"100%",height:"100%",borderRadius:12},src:D}):l.jsx("div",{style:{color:"#fff",padding:"1rem"},children:"Video mancante"})}):l.jsx("div",{className:"pdf-container",children:P?l.jsx("iframe",{title:"pdf",src:P,style:{width:"100%",height:"100%",border:0,borderRadius:12}}):l.jsx("div",{style:{padding:"1rem"},children:"PDF mancante"})})}),l.jsx("div",{className:"chat-container",style:{minHeight:$},children:l.jsx(as,{variant:"standalone",showHeader:!0,placeholder:"Chiedi alla ChatAI..."})})]}),l.jsxs("div",{className:"lesson-summary",children:[l.jsxs("h2",{children:["Riassunto della lezione ",k==="video"?"Video":"PDF"]}),l.jsxs("p",{children:["Qui verr visualizzato un riassunto ",k==="video"?"del video":"del PDF"," creato utilizzando AI, per ora aggiungo un placeholder per riempire lo spazio.",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quam perferendis provident sequi dolor, explicabo odio sunt reprehenderit eos, repudiandae iure repellendus modi, expedita qui fuga cumque. Consequuntur, rerum ut? Quasi, tempora corrupti voluptatibus facere expedita rem, quae recusandae nihil perspiciatis blanditiis excepturi. Culpa voluptatibus explicabo fuga dolor sint maxime, soluta voluptatem nobis quam est illo repellendus consequatur eaque pariatur ex, suscipit ab quos at cum? Aspernatur facere eligendi quo quisquam! Placeat provident aut magnam eius non soluta voluptatem quisquam ipsum, aliquam obcaecati. Exercitationem nostrum laboriosam facilis accusantium et porro fugiat illo perferendis magni expedita eaque corrupti, iusto, illum doloremque dolores?",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Illum suscipit voluptatem beatae neque deserunt tenetur, eligendi placeat harum et animi exercitationem iusto quo reprehenderit asperiores eius adipisci consequuntur voluptates maxime optio eveniet laborum! Minus perspiciatis omnis iure maiores debitis illo ullam. Quo amet esse repudiandae nobis aspernatur error est incidunt?",l.jsx("br",{}),l.jsx("br",{}),"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eligendi voluptates recusandae omnis obcaecati consequatur, praesentium magnam aliquid architecto autem reprehenderit quibusdam, officiis facere! Commodi id nihil laborum sit vero non consectetur aut voluptatem excepturi mollitia nemo architecto, hic perferendis officia quas iure iusto earum. Impedit sunt porro dignissimos non at accusamus nemo voluptas quibusdam deleniti eius iusto aliquam magnam suscipit magni quasi sed, mollitia ipsa animi tempore ullam quae rerum."]})]})]})}function n3(){const n=Yt(),[e,t]=b.useState(""),[s,a]=b.useState(""),[c,d]=b.useState(""),[m,p]=b.useState(""),[g,y]=b.useState(""),[x,T]=b.useState(""),[S,j]=b.useState(""),[k,I]=b.useState(""),[Y,$]=b.useState(""),[B,q]=b.useState(""),[H,K]=b.useState(""),[M,N]=b.useState(""),[O,D]=b.useState(!1),[P,L]=b.useState(!1),[C,ve]=b.useState(""),[we,X]=b.useState(""),[re,J]=b.useState(""),me=b.useMemo(()=>[...O?["video"]:[],...P?["pdf"]:[]],[O,P]),z=async G=>{G.preventDefault();const ae=await q4({titolo:e,descrizione:s,stato:"attivo",introd:{academicYear:c,professor:m,degree:g,semester:x,credits:S?Number(S):null,notes:k,officeHoursTitle:Y,officeHours:B},initialSectionTitle:H||null,initialLesson:M?{title:M,fileTypes:me,videoUrl:O?C:"",duration:we,description:re,type:O?"video":P?"reading":null}:null});n(`/docente/corsi/${ae}`)};return l.jsx("div",{className:"cnew-page",children:l.jsx("div",{className:"cnew-card",children:l.jsxs("div",{className:"cnew-stack",children:[l.jsxs("div",{className:"cnew-inner cnew-header",children:[l.jsxs("header",{className:"cnew-hero",children:[l.jsx("h1",{className:"cnew-hero-title",children:"Crea nuovo corso"}),l.jsxs("p",{className:"cnew-hero-subtitle",children:["Inserisci ",l.jsx("b",{children:"titolo"})," e ",l.jsx("b",{children:"sottotitolo"})," (spiegazione generale). Poi compila le",l.jsx("b",{children:" informazioni generali"}),". Infine crea una ",l.jsx("b",{children:"sola sezione"})," con una",l.jsx("b",{children:" sola lezione"})," iniziale. Le altre sezioni/lezioni le aggiungerai dalla pagina del corso."]})]}),l.jsxs(V,{className:"cnew-grid cnew-grid--1col cnew-grid--2col-md",children:[l.jsxs(V.Group,{className:"mb-3 cnew-col-2",children:[l.jsx(V.Label,{children:"Titolo corso"}),l.jsx(V.Control,{value:e,onChange:G=>t(G.target.value),required:!0})]}),l.jsxs(V.Group,{className:"mb-0 cnew-col-2",children:[l.jsx(V.Label,{children:"Sottotitolo / Spiegazione generale"}),l.jsx(V.Control,{as:"textarea",rows:3,placeholder:"Breve spiegazione del corso",value:s,onChange:G=>a(G.target.value)})]})]})]}),l.jsxs("div",{className:"cnew-inner cnew-form",children:[l.jsx("h2",{className:"cnew-block-title",children:"Informazioni generali del corso"}),l.jsxs(V,{className:"cnew-grid cnew-grid--1col cnew-grid--2col-md",children:[l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Anno accademico"}),l.jsx(V.Control,{placeholder:"Es. 2024/2025",value:c,onChange:G=>d(G.target.value)})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Docente"}),l.jsx(V.Control,{placeholder:"Es. Prof. Rossi",value:m,onChange:G=>p(G.target.value)})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Corso di laurea (CdL)"}),l.jsx(V.Control,{placeholder:"Es. Informatica",value:g,onChange:G=>y(G.target.value)})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Semestre"}),l.jsx(V.Control,{placeholder:"Es. 1 semestre",value:x,onChange:G=>T(G.target.value)})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"CFU"}),l.jsx(V.Control,{type:"number",min:"0",step:"1",value:S,onChange:G=>j(G.target.value)})]}),l.jsxs(V.Group,{className:"mb-3 cnew-col-2",children:[l.jsx(V.Label,{children:"Note"}),l.jsx(V.Control,{placeholder:"Note interne/avvisi",value:k,onChange:G=>I(G.target.value)})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Titolo ricevimento"}),l.jsx(V.Control,{placeholder:"Es. Ricevimento studenti",value:Y,onChange:G=>$(G.target.value)})]}),l.jsxs(V.Group,{className:"mb-0",children:[l.jsx(V.Label,{children:"Ricevimento studenti (orari/note)"}),l.jsx(V.Control,{placeholder:"Es. Luned 10-12, studio 2.14",value:B,onChange:G=>q(G.target.value)})]})]})]}),l.jsxs("div",{className:"cnew-inner cnew-form",children:[l.jsx("h2",{className:"cnew-block-title",children:"Sezione e lezione iniziale"}),l.jsxs(V,{className:"cnew-grid cnew-grid--1col cnew-grid--2col-md",children:[l.jsxs(V.Group,{className:"mb-3 cnew-col-2",children:[l.jsx(V.Label,{children:"Nome sezione iniziale"}),l.jsx(V.Control,{value:H,onChange:G=>K(G.target.value),required:!0})]}),l.jsxs(V.Group,{className:"mb-3 cnew-col-2",children:[l.jsx(V.Label,{children:"Titolo lezione iniziale"}),l.jsx(V.Control,{value:M,onChange:G=>N(G.target.value),required:!0})]}),l.jsxs(V.Group,{className:"mb-2 cnew-col-2",children:[l.jsx(V.Label,{children:"Tipologia contenuto"}),l.jsxs("div",{className:"d-flex flex-wrap gap-2 mb-2",children:[l.jsx(V.Check,{type:"checkbox",id:"chk-video-new",label:"Contiene Video",checked:O,onChange:G=>D(G.target.checked)}),l.jsx(V.Check,{type:"checkbox",id:"chk-pdf-new",label:"Contiene PDF",checked:P,onChange:G=>L(G.target.checked)})]}),l.jsx("div",{className:"mb-1",children:me.length>0?me.map(G=>l.jsx(Ye,{bg:"light",text:"dark",className:"me-1",children:G},G)):l.jsx(Ye,{bg:"light",text:"dark",children:"nessun tipo selezionato"})})]}),O&&l.jsxs(V.Group,{className:"mb-3 cnew-col-2",children:[l.jsx(V.Label,{children:"Link Video"}),l.jsx(V.Control,{type:"url",placeholder:"https://",value:C,onChange:G=>ve(G.target.value)})]}),P&&l.jsxs(V.Group,{className:"mb-3 cnew-col-2",children:[l.jsx(V.Label,{children:"Carica PDF"}),l.jsx(V.Control,{type:"file",accept:"application/pdf"}),l.jsx(V.Text,{className:"text-muted",children:"Se non carichi un PDF ora, potrai aggiungerlo/modificarlo in seguito."})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Durata (opzionale)"}),l.jsx(V.Control,{placeholder:"Es. 15 min",value:we,onChange:G=>X(G.target.value)})]}),l.jsxs(V.Group,{className:"mb-0 cnew-col-2",children:[l.jsx(V.Label,{children:"Descrizione lezione (opzionale)"}),l.jsx(V.Control,{as:"textarea",rows:3,placeholder:"Breve descrizione della lezione",value:re,onChange:G=>J(G.target.value)})]})]})]}),l.jsxs(V,{onSubmit:z,className:"cnew-actions",children:[l.jsx(Oe,{type:"button",className:"cnew-btn cnew-btn--outline",onClick:()=>n("/docente/corsi"),children:"Annulla"}),l.jsx(Oe,{type:"submit",className:"cnew-btn cnew-btn--primary",children:"Salva"})]})]})})})}function i3(){const{courseId:n}=ti(),e=Yt(),[t,s]=b.useState(null),[a,c]=b.useState(!0),[d,m]=b.useState(null);b.useEffect(()=>{let C=!0;return c(!0),m(null),Xy(n).then(ve=>{C&&s(ve||null)}).catch(ve=>{console.error("getCourseById:",ve),C&&(m("Impossibile caricare il corso."),s(null))}).finally(()=>{C&&c(!1)}),()=>{C=!1}},[n]);const[p,g]=b.useState(""),[y,x]=b.useState(""),[T,S]=b.useState(""),[j,k]=b.useState(""),[I,Y]=b.useState(""),[$,B]=b.useState(""),[q,H]=b.useState(""),[K,M]=b.useState(""),[N,O]=b.useState(""),[D,P]=b.useState("");b.useEffect(()=>{t&&(g(t.titolo||""),x(t.introduzione?.academicYear||""),S(t.introduzione?.professor||""),k(t.introduzione?.degree||""),Y(t.introduzione?.semester||""),B(t.introduzione?.credits||""),H(t.introduzione?.notes||""),M(t.introduzione?.officeHoursTitle||""),O(t.introduzione?.officeHours||""),P(t.descrizione||""))},[t]);const L=async C=>{C.preventDefault();try{await F4(n,{titolo:p,descrizione:D,introd:{academicYear:y,professor:T,degree:j,semester:I,credits:$?Number($):null,notes:q,officeHoursTitle:K,officeHours:N}}),e(`/docente/corsi/${n}`)}catch(ve){console.error("updateCourseHeader:",ve),alert("Impossibile salvare le modifiche.")}};return a?l.jsx(st,{className:"py-4 text-white",children:"Caricamento"}):d?l.jsx(st,{className:"py-4 text-white",children:d}):t?l.jsx(st,{className:"py-4 teacher-lesson-edit",children:l.jsx(ce,{className:"glass-surface lesson-card",children:l.jsxs(ce.Body,{className:"lesson-card__body lesson-stack",children:[l.jsx("div",{className:"lesson-card__inner header-inner",children:l.jsxs("header",{className:"lesson-header",children:[l.jsx("h1",{className:"hero-title m-0",children:"Modifica info corso"}),l.jsx("p",{className:"hero-subtitle",children:"Aggiorna tutte le informazioni generali mostrate nellheader del corso."})]})}),l.jsx("div",{className:"lesson-card__inner form-inner",children:l.jsxs(V,{onSubmit:L,children:[l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Titolo corso"}),l.jsx(V.Control,{value:p,onChange:C=>g(C.target.value),required:!0})]}),l.jsxs("div",{className:"row g-3",children:[l.jsx("div",{className:"col-md-6",children:l.jsxs(V.Group,{children:[l.jsx(V.Label,{children:"Anno accademico"}),l.jsx(V.Control,{value:y,onChange:C=>x(C.target.value)})]})}),l.jsx("div",{className:"col-md-6",children:l.jsxs(V.Group,{children:[l.jsx(V.Label,{children:"Docente"}),l.jsx(V.Control,{value:T,onChange:C=>S(C.target.value)})]})})]}),l.jsxs("div",{className:"row g-3 mt-1",children:[l.jsx("div",{className:"col-md-6",children:l.jsxs(V.Group,{children:[l.jsx(V.Label,{children:"Corso di laurea (CdL)"}),l.jsx(V.Control,{value:j,onChange:C=>k(C.target.value)})]})}),l.jsx("div",{className:"col-md-6",children:l.jsxs(V.Group,{children:[l.jsx(V.Label,{children:"Semestre"}),l.jsx(V.Control,{value:I,onChange:C=>Y(C.target.value)})]})})]}),l.jsxs("div",{className:"row g-3 mt-1",children:[l.jsx("div",{className:"col-md-6",children:l.jsxs(V.Group,{children:[l.jsx(V.Label,{children:"CFU"}),l.jsx(V.Control,{type:"number",min:"0",step:"1",value:$,onChange:C=>B(C.target.value)})]})}),l.jsx("div",{className:"col-md-6",children:l.jsxs(V.Group,{children:[l.jsx(V.Label,{children:"Note"}),l.jsx(V.Control,{value:q,onChange:C=>H(C.target.value)})]})})]}),l.jsxs("div",{className:"row g-3 mt-1",children:[l.jsx("div",{className:"col-md-6",children:l.jsxs(V.Group,{children:[l.jsx(V.Label,{children:"Titolo ricevimento"}),l.jsx(V.Control,{value:K,onChange:C=>M(C.target.value)})]})}),l.jsx("div",{className:"col-md-6",children:l.jsxs(V.Group,{children:[l.jsx(V.Label,{children:"Ricevimento studenti (orari/note)"}),l.jsx(V.Control,{value:N,onChange:C=>O(C.target.value)})]})})]}),l.jsxs(V.Group,{className:"mb-0 mt-3",children:[l.jsx(V.Label,{children:"Descrizione / Obiettivi"}),l.jsx(V.Control,{as:"textarea",rows:4,value:D,onChange:C=>P(C.target.value)})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(Oe,{type:"button",className:"btn-fixed btn-cancel",onClick:()=>e(-1),children:"Annulla"}),l.jsx(Oe,{type:"submit",className:"btn-fixed btn-confirm",children:"Salva"})]})]})})]})})}):l.jsx(st,{className:"py-4 text-white",children:"Corso non trovato."})}function s3(){const[n,e]=b.useState(!0),[t,s]=b.useState(null),[a,c]=b.useState([]),d=[{label:"Domande AI (30gg)",value:185},{label:"Argomenti con lacune",value:12},{label:"Segnalazioni materiali",value:9},{label:"Studenti a rischio",value:17}],m=["Ricorsione","SQL avanzato","Backpropagation"],p=["Slide Algoritmi: errore slide 12","PDF Basi di Dati: ref mancante pag. 7"],g=["Differenza tra O(n) e O(log n) negli algoritmi","Cos un Transformer nelle reti neurali?","Come normalizzare un database (3NF)?"];return b.useEffect(()=>{let y=!0;const x=Du(pn,async T=>{if(y){if(!T){s("Devi effettuare laccesso."),e(!1);return}try{s(null);const S=af(Bn(tt,"courses"),av("ownerId","==",T.uid),fy("createdAt","desc")),k=(await Ws(S)).docs.map(I=>({id:I.id,...I.data()}));c(k)}catch(S){console.error("Load courses",S),s("Impossibile caricare i corsi.")}finally{e(!1)}}});return()=>{y=!1,x&&x()}},[]),l.jsxs(st,{className:"teacher-dashboard py-4",children:[l.jsxs("section",{className:"glass-hero text-white mb-4",children:[l.jsx("h1",{className:"hero-title mb-1",children:"Dashboard Docente"}),l.jsx("p",{className:"hero-subtitle mb-2",children:"Panoramica delle attivit, domande AI e insight dagli studenti"}),l.jsxs("div",{className:"d-flex gap-2 flex-wrap justify-content-center mt-2",children:[l.jsx(Ye,{bg:"light",text:"dark",children:"Docente attivo"}),l.jsx(Ye,{bg:"light",text:"dark",children:"Anno Accademico 2024/25"})]}),l.jsxs("div",{className:"hero-actions d-flex justify-content-center flex-wrap gap-2 mt-3",children:[l.jsx(Re,{to:"/docente/corsi",className:"landing-btn outline",children:"Vai ai corsi"}),l.jsx(Re,{to:"/docente/corsi/nuovo",className:"landing-btn primary",children:"Crea nuovo corso"})]})]}),t&&l.jsx("div",{className:"alert alert-danger glass-card",children:t}),n&&l.jsx("div",{className:"text-white-50 mb-3",children:"Caricamento"}),l.jsxs("section",{"aria-labelledby":"kpiTitle",className:"mb-4",children:[l.jsx("h2",{id:"kpiTitle",className:"dash-heading",children:"Panoramica generale"}),l.jsx(ze,{className:"g-3",children:d.map((y,x)=>l.jsx(fe,{xs:6,md:3,children:l.jsx(ce,{className:"glass-card kpi-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("div",{className:"kpi-value",children:y.value}),l.jsx("div",{className:"kpi-label",children:y.label})]})})},x))})]}),l.jsxs("section",{"aria-labelledby":"chatTitle",className:"mb-4",children:[l.jsx("h2",{id:"chatTitle",className:"dash-heading",children:"ChatAI Globale"}),l.jsxs(ze,{className:"g-3 align-items-stretch",children:[l.jsx(fe,{xs:12,lg:7,children:l.jsx("div",{className:"chat-panel h-100",children:l.jsx("div",{className:"chat-container",children:l.jsx(as,{variant:"standalone",showHeader:!0,placeholder:"Chiedi alla ChatAI..."})})})}),l.jsx(fe,{xs:12,lg:5,children:l.jsx(ce,{className:"glass-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Prompt veloci"}),l.jsxs("ul",{className:"quick-prompts",children:[l.jsx("li",{children:"Riassumi i punti chiave delle ultime lezioni."}),l.jsx("li",{children:"Genera 10 quiz MCQ dagli argomenti pi chiesti."}),l.jsx("li",{children:"Mostra trend domande degli ultimi 7 giorni."}),l.jsxs("li",{children:["Suggerisci esercizi per colmare le lacune su ",l.jsx("em",{children:m[0]}),"."]})]}),l.jsx("h6",{className:"mt-4",children:"Azioni rapide"}),l.jsxs("div",{className:"d-flex flex-wrap gap-2 mt-2",children:[l.jsx(Re,{to:"/docente/corsi",className:"landing-btn outline",children:"Gestisci corsi"}),l.jsx(Oe,{variant:"light",className:"landing-btn outline",children:"Crea quiz"}),l.jsx(Oe,{variant:"light",className:"landing-btn outline",children:"Genera riassunto"})]})]})})})]})]}),l.jsxs("section",{"aria-labelledby":"myCoursesTitle",className:"mb-4",children:[l.jsx("h2",{id:"myCoursesTitle",className:"dash-heading",children:"I miei corsi"}),l.jsxs(ze,{className:"g-3",children:[a.map(y=>l.jsx(fe,{xs:12,md:6,lg:4,children:l.jsxs(ce,{className:"h-100 glass-card clickable-card",children:[l.jsxs(ce.Body,{children:[l.jsx(ce.Title,{className:"courseTitle mb-1",id:"title",children:y.titolo||"Corso senza titolo"}),l.jsx("div",{className:"small text-muted mb-2",children:"Iscritti:  "}),y.descrizione&&l.jsx(ce.Text,{className:"mb-3",children:y.descrizione}),l.jsxs("div",{className:"course-meta mb-2 d-flex gap-2 flex-wrap",children:[Number.isFinite(y?.introduzione?.credits)&&l.jsxs(Ye,{bg:"light",text:"dark",children:[y.introduzione.credits," CFU"]}),y?.introduzione?.semester&&l.jsx(Ye,{bg:"light",text:"dark",children:y.introduzione.semester})]})]}),l.jsxs(ce.Footer,{className:"d-flex flex-wrap align-items-center justify-content-between gap-2",children:[l.jsx("small",{className:"text-muted",children:(y.stato||"bozza").replace(/^./,x=>x.toUpperCase())}),l.jsxs("div",{className:"d-flex gap-2 ms-auto",children:[l.jsx(Re,{to:`/docente/corsi/${y.id}/dashboard`,className:"landing-btn primary",children:"Apri dashboard"}),l.jsx(Re,{to:`/docente/corsi/${y.id}`,className:"landing-btn outline",children:"Dettagli corso"})]})]})]})},y.id)),!n&&!t&&a.length===0&&l.jsx(fe,{xs:12,children:l.jsx(ce,{className:"glass-card",children:l.jsx(ce.Body,{className:"text-center text-white-50",children:"Nessun corso trovato. Crea il primo corso dal pulsante in alto."})})})]})]}),l.jsxs("section",{"aria-labelledby":"insightTitle",className:"mb-5",children:[l.jsx("h2",{id:"insightTitle",className:"dash-heading",children:"Insight AI"}),l.jsxs(ze,{className:"g-3",children:[l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"glass-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{children:"Domande pi frequenti"}),l.jsx("ol",{className:"mb-0",children:g.map((y,x)=>l.jsx("li",{children:y},x))})]})})}),l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"glass-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{children:"Argomenti con lacune"}),l.jsx("ul",{className:"mb-0",children:m.map((y,x)=>l.jsx("li",{children:y},x))})]})})}),l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"glass-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{children:"Segnalazioni materiali"}),l.jsx("ul",{className:"mb-0",children:p.map((y,x)=>l.jsx("li",{children:y},x))})]})})}),l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"glass-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{children:"Trend domande globali"}),l.jsx("p",{className:"mb-0 text-white-50",children:"[Grafico line/area  integrazione successiva]"})]})})})]})]})]})}function r3(){const{courseId:n}=ti(),[e,t]=b.useState(!0),[s,a]=b.useState(null),[c,d]=b.useState(null),m=[{label:"Domande AI (30gg)",value:42},{label:"Argomenti con lacune",value:3},{label:"Segnalazioni materiali",value:2},{label:"Studenti a rischio",value:5}],p=["Differenza tra O(n) e O(log n) negli algoritmi","Ricorsione: casi base e profondit massima","Come normalizzare un database (3NF)?"],g=["Ricorsione","Complessit logaritmica","Join SQL"],y=["Slide Lezione 3: ref mancante alla slide 12","PDF Lezione 5: formulazione ambigua a pag. 7"],[x,T]=b.useState({sections:0,lessonsTotal:0,lessonsVideo:0,lessonsPdf:0,lessonsBoth:0}),[S,j]=b.useState(!0);return b.useEffect(()=>{let k=!0;const I=Du(pn,async Y=>{if(k){if(!Y){a("Devi effettuare laccesso."),t(!1);return}try{a(null);const $=rn(tt,"courses",String(n)),B=await Xs($);if(!B.exists()){d(null),t(!1);return}const q={id:B.id,...B.data()};d(q),j(!0);const H=Bn(tt,"courses",String(n),"sections"),M=(await Ws(H)).docs;let N=0,O=0,D=0,P=0;await Promise.all(M.map(async L=>{const C=Bn(tt,"courses",String(n),"sections",L.id,"lessons");(await Ws(C)).forEach(we=>{const X=we.data()||{},re=!!(X.videoUrl&&String(X.videoUrl).trim().length),J=!!(X.pdfUrl&&String(X.pdfUrl).trim().length);N+=1,re&&J?P+=1:re?O+=1:J&&(D+=1)})})),T({sections:M.length,lessonsTotal:N,lessonsVideo:O,lessonsPdf:D,lessonsBoth:P})}catch($){console.error("Load course / stats",$),a("Impossibile caricare il corso o le statistiche.")}finally{j(!1),t(!1)}}});return()=>{k=!1,I&&I()}},[n]),e?l.jsx(st,{className:"py-5",children:l.jsx("div",{className:"text-white-50",children:"Caricamento"})}):s?l.jsx(st,{className:"py-5",children:l.jsx("div",{className:"alert alert-danger glass-card",children:s})}):c?l.jsxs(st,{className:"teacher-course-dashboard py-4 px-3",children:[l.jsxs("section",{className:"glass-hero text-white mb-4",children:[l.jsx("h1",{className:"hero-title mb-1",children:c.titolo||"Corso senza titolo"}),c.descrizione&&l.jsx("p",{className:"hero-subtitle mb-2",children:c.descrizione}),l.jsxs("div",{className:"d-flex gap-2 flex-wrap justify-content-center mt-2",children:[Number.isFinite(c?.introduzione?.credits)&&l.jsxs(Ye,{bg:"light",text:"dark",children:[c.introduzione.credits," CFU"]}),c?.introduzione?.semester&&l.jsx(Ye,{bg:"light",text:"dark",children:c.introduzione.semester}),l.jsx(Ye,{bg:"light",text:"dark",children:c.stato==="attivo"?"Pubblicato":"Bozza"})]}),l.jsxs("div",{className:"hero-actions d-flex justify-content-center flex-wrap gap-2 mt-3",children:[l.jsx(Re,{to:`/docente/corsi/${c.id}`,className:"landing-btn outline",children:"Apri dettaglio corso"}),l.jsx(Re,{to:`/docente/corsi/${c.id}/modifica`,className:"landing-btn primary",children:"Modifica corso"})]})]}),l.jsxs("section",{"aria-labelledby":"kpiTitle",className:"mb-4",children:[l.jsx("h2",{id:"kpiTitle",className:"dash-heading",children:"Panoramica corso (AI)"}),l.jsx(ze,{className:"g-3",children:m.map((k,I)=>l.jsx(fe,{xs:6,md:3,children:l.jsx(ce,{className:"glass-card kpi-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("div",{className:"kpi-value",children:k.value}),l.jsx("div",{className:"kpi-label",children:k.label})]})})},I))})]}),l.jsxs("section",{className:"mb-4",children:[l.jsx("h2",{className:"dash-heading",children:"Panoramica generale"}),l.jsxs(ze,{className:"g-3 justify-content-center",children:[l.jsx(fe,{xs:6,md:6,children:l.jsx(ce,{className:"glass-card kpi-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("div",{className:"kpi-value",children:x.sections}),l.jsx("div",{className:"kpi-label",children:"Sezioni"})]})})}),l.jsx(fe,{xs:6,md:6,children:l.jsx(ce,{className:"glass-card kpi-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("div",{className:"kpi-value",children:x.lessonsTotal}),l.jsx("div",{className:"kpi-label",children:"Lezioni"})]})})})]}),l.jsxs(ze,{className:"g-3 mt-0 justify-content-center",children:[l.jsx(fe,{xs:6,md:4,children:l.jsx(ce,{className:"glass-card kpi-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("div",{className:"kpi-value",children:x.lessonsVideo}),l.jsx("div",{className:"kpi-label",children:"Lezioni video"})]})})}),l.jsx(fe,{xs:6,md:4,children:l.jsx(ce,{className:"glass-card kpi-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("div",{className:"kpi-value",children:x.lessonsPdf}),l.jsx("div",{className:"kpi-label",children:"Lezioni PDF"})]})})}),l.jsx(fe,{xs:6,md:4,children:l.jsx(ce,{className:"glass-card kpi-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("div",{className:"kpi-value",children:x.lessonsBoth}),l.jsx("div",{className:"kpi-label",children:"Video + PDF"})]})})})]})]}),l.jsxs("section",{"aria-labelledby":"chatTitle",className:"mb-4",children:[l.jsx("h2",{id:"chatTitle",className:"dash-heading",children:"ChatAI del corso"}),l.jsxs(ze,{className:"g-3 align-items-stretch",children:[l.jsx(fe,{xs:12,lg:7,children:l.jsx(ce,{className:"glass-card chat-panel h-100",children:l.jsx(ce.Body,{className:"p-0",children:l.jsx("div",{className:"chat-container",children:l.jsx(as,{variant:"standalone",showHeader:!0,placeholder:"Chiedi alla ChatAI..."})})})})}),l.jsx(fe,{xs:12,lg:5,children:l.jsx(ce,{className:"glass-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Prompt veloci (corso)"}),l.jsxs("ul",{className:"quick-prompts",children:[l.jsx("li",{children:"Riassumi i punti chiave della Lezione 2."}),l.jsx("li",{children:"Genera 8 quiz MCQ dalla Sezione 1 con soluzione."}),l.jsx("li",{children:"Mostra gli argomenti con pi domande negli ultimi 7 giorni."}),l.jsxs("li",{children:["Suggerisci esercizi per colmare le lacune su ",l.jsx("em",{children:g[0]}),"."]})]}),l.jsx("h6",{className:"mt-4",children:"Azioni rapide"}),l.jsxs("div",{className:"d-flex flex-wrap gap-2 mt-2",children:[l.jsx(Oe,{variant:"light",className:"landing-btn primary",children:"Crea quiz"}),l.jsx(Oe,{variant:"light",className:"landing-btn primary",children:"Genera riassunto"})]})]})})})]})]}),l.jsxs("section",{"aria-labelledby":"insightTitle",className:"mb-5",children:[l.jsx("h2",{id:"insightTitle",className:"dash-heading",children:"Insight AI del corso"}),l.jsxs(ze,{className:"g-3",children:[l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"glass-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{children:"Domande pi frequenti"}),l.jsx("ol",{className:"mb-0",children:p.map((k,I)=>l.jsx("li",{children:k},I))})]})})}),l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"glass-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{children:"Argomenti con lacune"}),l.jsx("ul",{className:"mb-0",children:g.map((k,I)=>l.jsx("li",{children:k},I))})]})})}),l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"glass-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{children:"Qualit dei materiali"}),l.jsx("ul",{className:"mb-0",children:y.map((k,I)=>l.jsx("li",{children:k},I))})]})})}),l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"glass-card h-100",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{children:"Trend domande per lezione"}),l.jsx("p",{className:"mb-0 text-white-50",children:"[Grafico line/area  integrazione successiva]"})]})})})]})]})]}):l.jsx(st,{className:"py-5",children:l.jsxs("div",{className:"cd-not-found",children:[l.jsx("h2",{className:"text-white",children:"Corso non trovato"}),l.jsx("p",{className:"text-white-50",children:"Controlla lURL o torna allelenco corsi."}),l.jsx(Re,{to:"/docente/corsi",className:"landing-btn outline",children:" Torna ai corsi"})]})})}function a3(){const[n,e]=b.useState(!0),[t,s]=b.useState(null),[a,c]=b.useState(null),[d,m]=b.useState([]);b.useEffect(()=>{let g=!0;const y=Du(pn,async x=>{if(g){if(!x){s("Devi autenticarti per visualizzare il profilo."),e(!1);return}try{e(!0),s(null);const T=await Xs(rn(tt,"users",x.uid)),S=T.exists()?T.data():{},{name:j,surname:k}=o3(S,x),I=await Dj();if(!g)return;c({initials:u3(j,k)||"--",avatarUrl:S?.avatarUrl||null,name:j,surname:k,role:"Docente",department:S?.department||"Dipartimento",email:l3(S?.email,x?.email),phone:S?.phone||"",website:S?.website||"",linkedin:S?.linkedin||"",github:S?.github||"",bio:S?.bio||"Breve biografia del docente",stats:{courses:I?.length??0,students:jh(S?.stats?.students)??0,lastActive:d3(x)},academicYear:h3(new Date)}),m(Array.isArray(I)?I:[])}catch(T){console.error("TeacherProfile load",T),g&&s("Impossibile caricare il profilo.")}finally{g&&e(!1)}}});return()=>{g=!1,y&&y()}},[]);const p=b.useMemo(()=>d||[],[d]);return n?l.jsx(st,{className:"teacher-profile-view py-4 text-white",children:"Caricamento"}):t?l.jsx(st,{className:"teacher-profile-view py-4 text-white",children:t}):a?l.jsxs(st,{className:"teacher-profile-view py-4",children:[l.jsx("section",{className:"glass-hero text-white mb-4 profile-hero",children:l.jsxs(ze,{className:"g-3 align-items-center",children:[l.jsx(fe,{xs:12,md:"auto",children:l.jsx("div",{className:"avatar-ring xl",children:a.avatarUrl?l.jsx("img",{src:a.avatarUrl,alt:`${a.name} ${a.surname}`}):l.jsx("div",{className:"avatar-placeholder",children:a.initials})})}),l.jsxs(fe,{children:[l.jsxs("h1",{className:"hero-title mb-1",children:[a.name," ",a.surname]}),l.jsxs("p",{className:"hero-subtitle mb-2",children:[a.role,"  ",a.department]}),l.jsxs("div",{className:"badge-teacher d-flex gap-2 flex-wrap",children:[l.jsx(Ye,{bg:"light",text:"dark",children:a.role}),l.jsxs(Ye,{bg:"light",text:"dark",children:["Anno Accademico ",a.academicYear]})]})]}),l.jsx(fe,{xs:12,md:"auto",className:"mt-2 mt-md-0",children:l.jsx(Re,{to:"/docente/profilo/modifica",className:"landing-btn primary",children:"Modifica profilo"})})]})}),l.jsx(ze,{className:"g-3",children:l.jsx(fe,{xs:12,children:l.jsx(ce,{className:"h-100 glass-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Biografia"}),l.jsx("p",{className:"mb-0 text-white-90",children:a.bio})]})})})}),l.jsxs(ze,{className:"g-3",children:[l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"h-100 glass-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Contatti"}),l.jsxs("ul",{className:"profile-list",children:[l.jsxs("li",{children:[l.jsx("span",{children:"Email"}),a.email?l.jsx("a",{href:`mailto:${a.email}`,children:a.email}):""]}),l.jsxs("li",{children:[l.jsx("span",{children:"Telefono"}),a.phone?l.jsx("a",{href:`tel:${a.phone}`,children:a.phone}):""]}),l.jsxs("li",{children:[l.jsx("span",{children:"Sito"}),a.website?l.jsx("a",{href:Ag(a.website),target:"_blank",rel:"noreferrer",children:a.website}):""]})]})]})})}),l.jsx(fe,{xs:12,md:6,children:l.jsx(ce,{className:"h-100 glass-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Social"}),l.jsxs("ul",{className:"profile-list",children:[l.jsxs("li",{children:[l.jsx("span",{children:"LinkedIn"}),a.linkedin?l.jsx("a",{href:Ag(a.linkedin),target:"_blank",rel:"noreferrer",children:a.linkedin}):""]}),l.jsxs("li",{children:[l.jsx("span",{children:"GitHub"}),a.github?l.jsx("a",{href:Ag(a.github),target:"_blank",rel:"noreferrer",children:a.github}):""]})]})]})})})]}),l.jsx(ze,{className:"g-3",children:l.jsx(fe,{xs:12,children:l.jsx(ce,{className:"h-100 glass-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Metriche"}),l.jsxs("div",{className:"kpi-grid",children:[l.jsxs("div",{className:"kpi",children:[l.jsx("div",{className:"kpi-value",children:jh(a.stats.courses)??0}),l.jsx("div",{className:"kpi-label",children:"Corsi attivi"})]}),l.jsxs("div",{className:"kpi",children:[l.jsx("div",{className:"kpi-value",children:jh(a.stats.students)??0}),l.jsx("div",{className:"kpi-label",children:"Studenti"})]}),l.jsxs("div",{className:"kpi",children:[l.jsx("div",{className:"kpi-value",children:a.stats.lastActive}),l.jsx("div",{className:"kpi-label",children:"Ultima attivit"})]})]})]})})})}),l.jsx(ze,{className:"g-3",children:l.jsx(fe,{xs:12,children:l.jsx(ce,{className:"h-100 glass-card",children:l.jsxs(ce.Body,{children:[l.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[l.jsx("h5",{className:"mb-0",children:"Corsi"}),l.jsx(Re,{to:"/docente/corsi",className:"landing-btn outline",children:"Vai a tutti i corsi"})]}),l.jsxs(ze,{className:"g-3",children:[p.map(g=>{const y=g?.titolo??"Senza titolo",x=g?.descrizione??"",T=jh(g?.introduzione?.credits),S=g?.introduzione?.semester??"",j=c3(g?.stato);return l.jsx(fe,{xs:12,lg:6,children:l.jsxs(ce,{className:"h-100 glass-card clickable-card",children:[l.jsxs(ce.Body,{children:[l.jsx(ce.Title,{className:"courseTitle mb-1",id:"title",children:y}),x&&l.jsx(ce.Text,{className:"mb-3",children:x}),l.jsxs("div",{className:"course-meta mb-2 d-flex gap-2 flex-wrap",children:[Number.isFinite(T)&&l.jsxs(Ye,{bg:"light",text:"dark",children:[T," CFU"]}),S&&l.jsx(Ye,{bg:"light",text:"dark",children:S})]})]}),l.jsxs(ce.Footer,{className:"d-flex align-items-center justify-content-between gap-2",children:[l.jsx("small",{className:"text-muted",children:j}),l.jsxs("div",{className:"d-flex gap-2 ms-auto",children:[l.jsx(Re,{to:`/docente/corsi/${g.id}/dashboard`,className:"landing-btn primary",children:"Apri dashboard"}),l.jsx(Re,{to:`/docente/corsi/${g.id}`,className:"landing-btn outline",children:"Dettagli corso"})]})]})]})},g.id)}),p.length===0&&l.jsx(fe,{xs:12,children:l.jsxs("div",{className:"text-white-80",children:["Nessun corso creato. ",l.jsx(Re,{to:"/docente/corsi/nuovo",className:"text-white",children:"Crea il tuo primo corso"}),"."]})})]})]})})})})]}):null}function o3(n,e){const t=(e?.displayName||"").trim(),[s,a]=t?t.split(" "):[],c=(n?.name||n?.firstName||s||"Nome").trim(),d=(n?.surname||n?.lastName||a||"Cognome").trim();return{name:c,surname:d}}function l3(n,e){return(n||e||"").trim()||""}function Ag(n){return n?/^https?:\/\//i.test(n)?n:`https://${n}`:""}function jh(n){const e=Number(n);return Number.isFinite(e)?e:void 0}function c3(n){const e=typeof n=="string"?n.trim():"";return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}function u3(n,e){const t=(n||"").trim(),s=(e||"").trim(),a=t?t[0].toUpperCase():"",c=s?s[0].toUpperCase():"";return a+c||null}function d3(n){const e=n?.metadata?.lastSignInTime;if(!e)return"";const t=new Date(e),s=new Date;return t.toDateString()===s.toDateString()?"Oggi":t.toLocaleDateString()}function h3(n){const e=n.getFullYear(),s=n.getMonth()>=8?e:e-1,a=String((s+1)%100).padStart(2,"0");return`${s}/${a}`}const f3=n=>(n||"").trim().split(" ")[0]||"",m3=n=>{const e=(n||"").trim().split(" ");return e.length>1?e.slice(1).join(" "):""},Ng=n=>n?/^https?:\/\//i.test(n)?n:`https://${n}`:"";function p3(){const[n,e]=b.useState(!0),[t,s]=b.useState(null),[a,c]=b.useState(null),[d,m]=b.useState({name:"",surname:"",role:"Docente",department:"",email:"",phone:"",bio:"Breve biografia del docente",website:"",linkedin:"",github:""}),[p,g]=b.useState(null),y=b.useRef(null),x=()=>y.current?.click(),T=O=>{const D=O.target.files?.[0];if(!D)return;const P=new FileReader;P.onload=L=>g(L.target.result),P.readAsDataURL(D)};b.useEffect(()=>{let O=!0;const D=Du(pn,async P=>{if(O){if(!P){s("Devi effettuare laccesso per modificare il profilo."),e(!1);return}try{s(null),c(null);const L=rn(tt,"users",P.uid),C=await Xs(L),ve=C.exists()?C.data():{},we=ve?.name||f3(P.displayName)||"",X=ve?.surname||m3(P.displayName)||"";(!ve?.name||!ve?.surname)&&(we||X)&&await ul(L,{name:we||null,surname:X||null,displayName:[we,X].filter(Boolean).join(" ")||null,updatedAt:sn()},{merge:!0}),m(re=>({...re,name:we,surname:X,role:ve?.role==="teacher"?"Docente":ve?.role||"Docente",department:ve?.department||"",email:ve?.email||P.email||"",phone:ve?.phone||"",bio:ve?.bio||re.bio,website:ve?.website||"",linkedin:ve?.linkedin||"",github:ve?.github||""}))}catch(L){console.error("TeacherProfileEdit load",L),s("Impossibile caricare il profilo.")}finally{e(!1)}}});return()=>{O=!1,D&&D()}},[]);const S=O=>{const{name:D,value:P}=O.target;m(L=>({...L,[D]:P}))},[j,k]=b.useState(!1),I=async O=>{O.preventDefault(),c(null),s(null),k(!0);try{const D=pn.currentUser;if(!D)throw new Error("not-authenticated");const P=rn(tt,"users",D.uid),L=`${(d.name||"").trim()} ${(d.surname||"").trim()}`.trim();L&&await Bw(D,{displayName:L});const C={name:(d.name||"").trim(),surname:(d.surname||"").trim(),department:(d.department||"").trim(),email:(d.email||"").trim(),bio:(d.bio||"").trim(),displayName:L||null,updatedAt:sn()};try{await py(P,C)}catch{await ul(P,C,{merge:!0})}c("Profilo aggiornato correttamente.")}catch(D){console.error("Save profile",D),s("Errore nel salvataggio del profilo.")}finally{k(!1)}},[Y,$]=b.useState(!1),B=async O=>{O.preventDefault(),c(null),s(null),$(!0);try{const D=pn.currentUser;if(!D)throw new Error("not-authenticated");const P=rn(tt,"users",D.uid),L=Ng(d.website),C=Ng(d.linkedin),ve=Ng(d.github);await ul(P,{phone:(d.phone||"").trim(),website:L,linkedin:C,github:ve,updatedAt:sn()},{merge:!0}),c("Contatti aggiornati con successo.")}catch(D){console.error("Save contacts",D),s("Errore nel salvataggio dei contatti.")}finally{$(!1)}},[q,H]=b.useState({current:"",next:"",confirm:"",newEmail:""}),[K,M]=b.useState(!1),N=async O=>{O.preventDefault(),c(null),s(null),M(!0);try{const D=pn.currentUser;if(!D?.email)throw new Error("not-authenticated");if(q.next&&q.next.length<8)throw new Error("La nuova password deve avere almeno 8 caratteri.");if(q.next!==q.confirm)throw new Error("Le nuove password non coincidono.");const P=so.credential(D.email,q.current);await rO(D,P),q.next&&await uO(D,q.next);const L=(q.newEmail||"").trim();L&&L!==D.email&&(await cO(D,L),await ul(rn(tt,"users",D.uid),{email:L,updatedAt:sn()},{merge:!0}),m(C=>({...C,email:L}))),c("Sicurezza aggiornata correttamente."),H({current:"",next:"",confirm:"",newEmail:""})}catch(D){console.error("Change password/email",D);const P=D?.code||"";let L=D?.message||"Errore di sicurezza.";P==="auth/wrong-password"&&(L="Password attuale non corretta."),P==="auth/weak-password"&&(L="La nuova password  troppo debole."),P==="auth/requires-recent-login"&&(L="Per favore, riesegui laccesso e riprova."),P==="auth/invalid-email"&&(L="Nuova email non valida."),P==="auth/email-already-in-use"&&(L="La nuova email  gi in uso."),s(L)}finally{M(!1)}};return n?l.jsxs(st,{className:"teacher-profile-page py-4",children:[l.jsx(Sj,{animation:"border",size:"sm",className:"me-2"}),l.jsx("span",{children:"Caricamento"})]}):l.jsxs(st,{className:"teacher-profile-page py-4",children:[l.jsxs("section",{className:"glass-hero text-white mb-4",children:[l.jsx("h1",{className:"hero-title mb-1",children:"Profilo Docente"}),l.jsx("p",{className:"hero-subtitle mb-2",children:"Gestisci dati personali, preferenze e sicurezza dellaccount"}),l.jsxs("div",{className:"d-flex gap-2 flex-wrap justify-content-center mt-2",children:[l.jsx(Ye,{bg:"light",text:"dark",children:d.role||"Docente"}),l.jsx(Ye,{bg:"light",text:"dark",children:"Anno Accademico 2024/25"})]})]}),!!t&&l.jsx(df,{variant:"danger",className:"glass-card",children:t}),!!a&&l.jsx(df,{variant:"success",className:"glass-card",children:a}),l.jsxs(ze,{className:"g-3 align-items-stretch",children:[l.jsxs(fe,{xs:12,lg:4,children:[l.jsx(ce,{className:"glass-card profile-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Avatar"}),l.jsx("div",{className:"profile-avatar",children:l.jsx("div",{className:"avatar-ring",children:p?l.jsx("img",{src:p,alt:"Avatar"}):l.jsxs("div",{className:"avatar-placeholder",children:[(d.name?.[0]||"A").toUpperCase(),(d.surname?.[0]||"D").toUpperCase()]})})}),l.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[l.jsx(Oe,{className:"landing-btn primary",onClick:x,children:"Carica immagine"}),l.jsx(Oe,{variant:"light",className:"landing-btn outline",onClick:()=>g(null),children:"Rimuovi"}),l.jsx("input",{ref:y,type:"file",accept:"image/*",className:"d-none",onChange:T})]})]})}),l.jsx(ce,{className:"glass-card profile-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Contatti & Social"}),l.jsxs(V,{onSubmit:B,children:[l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Telefono"}),l.jsx(V.Control,{type:"tel",placeholder:"+39 ",name:"phone",value:d.phone,onChange:S})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Sito web"}),l.jsx(V.Control,{type:"url",placeholder:"https://",name:"website",value:d.website,onChange:S})]}),l.jsxs(ze,{className:"g-2",children:[l.jsx(fe,{sm:6,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"LinkedIn"}),l.jsx(V.Control,{type:"url",placeholder:"https://linkedin.com/in/",name:"linkedin",value:d.linkedin,onChange:S})]})}),l.jsx(fe,{sm:6,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"GitHub"}),l.jsx(V.Control,{type:"url",placeholder:"https://github.com/",name:"github",value:d.github,onChange:S})]})})]}),l.jsx("div",{className:"d-flex justify-content-end",children:l.jsx(Oe,{type:"submit",disabled:Y,className:"landing-btn primary",children:Y?"Salvataggio":"Salva contatti"})})]})]})}),l.jsx(ce,{className:"glass-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Preferenze notifiche"}),l.jsx("div",{className:"text-white-50",children:"Integrazione notifiche verr aggiunta pi avanti."})]})})]}),l.jsxs(fe,{xs:12,lg:8,children:[l.jsx(ce,{className:"glass-card profile-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Dati personali"}),l.jsxs(V,{onSubmit:I,children:[l.jsxs(ze,{className:"g-2",children:[l.jsx(fe,{sm:6,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Nome"}),l.jsx(V.Control,{type:"text",name:"name",value:d.name,onChange:S,placeholder:"Nome"})]})}),l.jsx(fe,{sm:6,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Cognome"}),l.jsx(V.Control,{type:"text",name:"surname",value:d.surname,onChange:S,placeholder:"Cognome"})]})})]}),l.jsxs(ze,{className:"g-2",children:[l.jsx(fe,{sm:6,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Ruolo"}),l.jsx(V.Control,{type:"text",name:"role",value:d.role,onChange:S,placeholder:"Docente",disabled:!0,title:"Il ruolo tecnico (teacher|student)  gestito dal sistema."})]})}),l.jsx(fe,{sm:6,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Dipartimento"}),l.jsx(V.Control,{type:"text",name:"department",value:d.department,onChange:S,placeholder:"Dipartimento"})]})})]}),l.jsxs(ze,{className:"g-2",children:[l.jsx(fe,{sm:6,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Email istituzionale"}),l.jsx(V.Control,{type:"email",name:"email",value:d.email,onChange:S,placeholder:"email@ateneo.it"}),l.jsx(V.Text,{className:"text-white-50",children:"Lallineamento con lemail in Auth si far nella sezione Sicurezza."})]})}),l.jsx(fe,{sm:6,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Telefono"}),l.jsx(V.Control,{type:"tel",name:"phone",value:d.phone,onChange:S,placeholder:"+39 "})]})})]}),l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Biografia"}),l.jsx(V.Control,{as:"textarea",rows:5,name:"bio",value:d.bio,onChange:S,placeholder:"Docente appassionato di tecnologie innovative e apprendimento digitale"})]}),l.jsx("div",{className:"d-flex justify-content-end gap-2",children:l.jsx(Oe,{type:"submit",disabled:j,className:"landing-btn primary",children:j?"Salvataggio":"Salva profilo"})})]})]})}),l.jsx(ce,{className:"glass-card profile-card",children:l.jsxs(ce.Body,{children:[l.jsx("h5",{className:"mb-3",children:"Sicurezza"}),l.jsxs(V,{onSubmit:N,children:[l.jsxs(ze,{className:"g-2",children:[l.jsx(fe,{md:6,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Password attuale"}),l.jsx(V.Control,{type:"password",placeholder:"",value:q.current,onChange:O=>H({...q,current:O.target.value}),required:!0})]})}),l.jsx(fe,{md:3,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Nuova password"}),l.jsx(V.Control,{type:"password",placeholder:"Min 8 caratteri",value:q.next,onChange:O=>H({...q,next:O.target.value})})]})}),l.jsx(fe,{md:3,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Conferma"}),l.jsx(V.Control,{type:"password",placeholder:"Ripeti",value:q.confirm,onChange:O=>H({...q,confirm:O.target.value})})]})})]}),l.jsx(ze,{className:"g-2",children:l.jsx(fe,{md:6,children:l.jsxs(V.Group,{className:"mb-3",children:[l.jsx(V.Label,{children:"Nuova email (opzionale)"}),l.jsx(V.Control,{type:"email",placeholder:"nuova.email@ateneo.it",value:q.newEmail,onChange:O=>H({...q,newEmail:O.target.value})})]})})}),l.jsx("div",{className:"d-flex justify-content-end gap-2",children:l.jsx(Oe,{type:"submit",disabled:K,className:"landing-btn primary",children:K?"Aggiornamento":"Aggiorna sicurezza"})})]}),l.jsx("hr",{style:{height:3,border:"none",backgroundColor:"rgba(255,255,255,.25)",borderRadius:2}}),l.jsxs("div",{className:"d-flex flex-column flex-sm-row align-items-start align-items-sm-center justify-content-between gap-2",children:[l.jsxs("div",{children:[l.jsx("h6",{className:"mb-1",children:"Logout da tutti i dispositivi"}),l.jsx("small",{className:"text-white-50",children:"Per sicurezza, riesegui laccesso se richiesto."})]}),l.jsx(Oe,{variant:"light",className:"landing-btn outline",onClick:()=>window.location.assign("/logout"),children:"Disconnetti ovunque"})]})]})})]})]})]})}const jg={esami:[{id:"ex-1",titolo:"Appello Giugno",data:"2025-06-20",peso:1,valutazioni:[{studente:"Mario Rossi",matricola:"12345",voto:27,note:""},{studente:"Giulia Bianchi",matricola:"67890",voto:30,note:"lode"}]},{id:"ex-2",titolo:"Appello Luglio",data:"2025-07-22",peso:1,valutazioni:[]}],esoneri:[{id:"esn-1",titolo:"Esonero 1  Algoritmi",data:"2025-05-10",peso:.5,valutazioni:[{studente:"Mario Rossi",matricola:"12345",voto:26,note:""}]}],esercitazioni:[{id:"exr-1",titolo:"Esercitazione SQL",data:"2025-04-28",peso:.2,valutazioni:[]}]};function g3(){const{id:n}=ti(),[e,t]=b.useState(jg.esami),[s,a]=b.useState(jg.esoneri),[c,d]=b.useState(jg.esercitazioni),[m,p]=b.useState(!1),[g,y]=b.useState({sezione:"esami",titolo:"",data:"",peso:1}),x=H=>{H.preventDefault();const K={id:`${g.sezione}-${Date.now()}`,titolo:g.titolo.trim()||"Senza titolo",data:g.data||"",peso:Number(g.peso)||1,valutazioni:[]};g.sezione==="esami"?t(M=>[K,...M]):g.sezione==="esoneri"?a(M=>[K,...M]):d(M=>[K,...M]),p(!1),y({sezione:"esami",titolo:"",data:"",peso:1})},[T,S]=b.useState(!1),j=b.useMemo(()=>({esami:e,esoneri:s,esercitazioni:c}),[e,s,c]),[k,I]=b.useState({sezione:"esami",itemId:"",studente:"",matricola:"",voto:"",note:""}),Y=H=>{const K=j[H][0]?.id||"";I(M=>({...M,sezione:H,itemId:K}))},$=H=>{H.preventDefault();const{sezione:K,itemId:M,studente:N,matricola:O,voto:D,note:P}=k;if(!M||!N.trim()||!O.trim()||D==="")return;const L={studente:N.trim(),matricola:O.trim(),voto:Number(D),note:(P||"").trim()},C=(ve,we)=>we(X=>X.map(re=>re.id===M?{...re,valutazioni:[L,...re.valutazioni]}:re));K==="esami"?C(e,t):K==="esoneri"?C(s,a):C(c,d),S(!1),I(ve=>({...ve,studente:"",matricola:"",voto:"",note:""}))},B=({title:H,children:K,action:M})=>l.jsxs(ce,{className:"glass-card h-100",children:[l.jsxs(ce.Header,{className:"d-flex align-items-center justify-content-between",children:[l.jsx("h5",{className:"mb-0",children:H}),M]}),l.jsx(ce.Body,{children:K})]}),q=({items:H})=>H.length===0?l.jsx("p",{className:"text-muted mb-0",children:"Ancora nessun elemento."}):l.jsx(vi,{alwaysOpen:!0,children:H.map((K,M)=>l.jsxs(vi.Item,{eventKey:String(M),className:"mb-2 glass-subcard",children:[l.jsx(vi.Header,{children:l.jsxs("div",{className:"d-flex align-items-center gap-2",children:[l.jsx("span",{className:"fw-semibold",children:K.titolo}),l.jsxs(Ye,{bg:"light",text:"dark",children:["Valutazioni: ",K.valutazioni.length]})]})}),l.jsxs(vi.Body,{children:[l.jsx("div",{className:"d-flex flex-wrap justify-content-between align-items-center gap-2 mb-2",children:l.jsxs("small",{className:"text-muted",children:["Data: ",K.data||"","  Peso: ",K.peso]})}),K.valutazioni.length===0?l.jsx("p",{className:"text-muted mb-0",children:"Nessuna valutazione presente."}):l.jsxs(Rj,{size:"sm",responsive:!0,className:"glass-table mb-0",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Studente"}),l.jsx("th",{children:"Matricola"}),l.jsx("th",{children:"Voto"}),l.jsx("th",{children:"Note"})]})}),l.jsx("tbody",{children:K.valutazioni.map((N,O)=>l.jsxs("tr",{children:[l.jsx("td",{children:N.studente}),l.jsx("td",{children:N.matricola}),l.jsx("td",{children:N.voto}),l.jsx("td",{children:N.note||""})]},O))})]})]})]},K.id))});return l.jsxs(st,{className:"teacher-assessments py-4",children:[l.jsxs("section",{className:"glass-hero text-white mb-4",children:[l.jsx("h1",{className:"hero-title mb-1",children:"Valutazioni"}),l.jsx("p",{className:"hero-subtitle mb-2",children:"Gestisci esami, esoneri ed esercitazioni in ununica pagina."}),l.jsxs("div",{className:"hero-actions d-flex justify-content-center flex-wrap gap-2 mt-3",children:[l.jsx(Oe,{variant:"light",className:"landing-btn primary",onClick:()=>{p(!0),y({sezione:"esami",titolo:"",data:"",peso:1})},children:"+ Nuovo elemento"}),l.jsx(Oe,{variant:"light",className:"landing-btn outline",onClick:()=>{const H=j.esami[0]?.id||"";I(K=>({...K,sezione:"esami",itemId:H})),S(!0)},children:"+ Nuova valutazione"}),l.jsx(Re,{to:n?`/docente/corsi/${n}/dashboard`:"/docente/dashboard",className:"landing-btn outline",children:"Torna alla dashboard"})]})]}),l.jsxs("section",{className:"mb-4","aria-labelledby":"secEsami",children:[l.jsx("h2",{id:"secEsami",className:"dash-heading",children:"Esami"}),l.jsx(B,{title:"Elenco Esami",action:l.jsxs(Ye,{bg:"light",text:"dark",children:[e.length," attivi"]}),children:l.jsx(q,{items:e})})]}),l.jsxs("section",{className:"mb-4","aria-labelledby":"secEsoneri",children:[l.jsx("h2",{id:"secEsoneri",className:"dash-heading",children:"Esoneri"}),l.jsx(B,{title:"Elenco Esoneri",action:l.jsxs(Ye,{bg:"light",text:"dark",children:[s.length," attivi"]}),children:l.jsx(q,{items:s})})]}),l.jsxs("section",{className:"mb-5","aria-labelledby":"secEsercitazioni",children:[l.jsx("h2",{id:"secEsercitazioni",className:"dash-heading",children:"Esercitazioni"}),l.jsx(B,{title:"Elenco Esercitazioni",action:l.jsxs(Ye,{bg:"light",text:"dark",children:[c.length," attive"]}),children:l.jsx(q,{items:c})})]}),l.jsxs(gt,{show:m,onHide:()=>p(!1),centered:!0,children:[l.jsx(gt.Header,{closeButton:!0,className:"glass-card text-black",children:l.jsx(gt.Title,{children:"Nuovo elemento"})}),l.jsx(gt.Body,{className:"glass-card",children:l.jsxs(V,{onSubmit:x,children:[l.jsxs(ze,{className:"g-3",children:[l.jsxs(fe,{xs:12,md:4,children:[l.jsx(V.Label,{children:"Sezione"}),l.jsxs(V.Select,{value:g.sezione,onChange:H=>y(K=>({...K,sezione:H.target.value})),children:[l.jsx("option",{value:"esami",children:"Esami"}),l.jsx("option",{value:"esoneri",children:"Esoneri"}),l.jsx("option",{value:"esercitazioni",children:"Esercitazioni"})]})]}),l.jsxs(fe,{xs:12,md:8,children:[l.jsx(V.Label,{children:"Titolo"}),l.jsx(V.Control,{placeholder:"Es: Appello Luglio / Esonero 2 / Esercitazione 3",value:g.titolo,onChange:H=>y(K=>({...K,titolo:H.target.value}))})]}),l.jsxs(fe,{xs:12,md:6,children:[l.jsx(V.Label,{children:"Data"}),l.jsx(V.Control,{type:"date",value:g.data,onChange:H=>y(K=>({...K,data:H.target.value}))})]}),l.jsxs(fe,{xs:12,md:6,children:[l.jsx(V.Label,{children:"Peso"}),l.jsx(V.Control,{type:"number",step:"0.1",min:"0",value:g.peso,onChange:H=>y(K=>({...K,peso:H.target.value}))})]})]}),l.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-3",children:[l.jsx(Oe,{variant:"secondary",onClick:()=>p(!1),children:"Annulla"}),l.jsx(Oe,{type:"submit",variant:"light",className:"landing-btn primary",children:"Salva"})]})]})})]}),l.jsxs(gt,{show:T,onHide:()=>S(!1),centered:!0,children:[l.jsx(gt.Header,{closeButton:!0,className:"glass-card text-black",children:l.jsx(gt.Title,{children:"Nuova valutazione"})}),l.jsx(gt.Body,{className:"glass-card",children:l.jsxs(V,{onSubmit:$,children:[l.jsxs(ze,{className:"g-3",children:[l.jsxs(fe,{xs:12,md:4,children:[l.jsx(V.Label,{children:"Sezione"}),l.jsxs(V.Select,{value:k.sezione,onChange:H=>Y(H.target.value),children:[l.jsx("option",{value:"esami",children:"Esami"}),l.jsx("option",{value:"esoneri",children:"Esoneri"}),l.jsx("option",{value:"esercitazioni",children:"Esercitazioni"})]})]}),l.jsxs(fe,{xs:12,md:8,children:[l.jsx(V.Label,{children:"Elemento"}),l.jsx(V.Select,{value:k.itemId,onChange:H=>I(K=>({...K,itemId:H.target.value})),children:j[k.sezione].map(H=>l.jsxs("option",{value:H.id,children:[H.titolo," ",H.data?` ${H.data}`:""]},H.id))})]}),l.jsxs(fe,{xs:12,md:6,children:[l.jsx(V.Label,{children:"Studente"}),l.jsx(V.Control,{placeholder:"Nome e cognome",value:k.studente,onChange:H=>I(K=>({...K,studente:H.target.value}))})]}),l.jsxs(fe,{xs:6,md:3,children:[l.jsx(V.Label,{children:"Matricola"}),l.jsx(V.Control,{placeholder:"Matricola",value:k.matricola,onChange:H=>I(K=>({...K,matricola:H.target.value}))})]}),l.jsxs(fe,{xs:6,md:3,children:[l.jsx(V.Label,{children:"Voto"}),l.jsx(V.Control,{type:"number",min:"0",max:"31",step:"1",value:k.voto,onChange:H=>I(K=>({...K,voto:H.target.value}))})]}),l.jsxs(fe,{xs:12,children:[l.jsx(V.Label,{children:"Note"}),l.jsx(V.Control,{placeholder:"Opzionale",value:k.note,onChange:H=>I(K=>({...K,note:H.target.value}))})]})]}),l.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-3",children:[l.jsx(Oe,{variant:"light",className:"landing-btn primary",onClick:()=>S(!1),children:"Annulla"}),l.jsx(Oe,{type:"submit",variant:"light",className:"landing-btn primary",children:"Salva"})]})]})})]})]})}const kj=b.createContext(null),Zy=()=>b.useContext(kj);function v3({children:n}){const[e,t]=b.useState({user:null,profile:null,loading:!0});b.useEffect(()=>{const a=LP(({user:c,profile:d})=>{t({user:c,profile:d,loading:!1})});return()=>a()},[]);const s={...e,isTeacher:e.profile?.role==="teacher",isStudent:e.profile?.role==="student",logout:PP};return l.jsx(kj.Provider,{value:s,children:n})}function y3(){const{user:n,loading:e}=Zy();return e?null:n?l.jsx(mf,{}):l.jsx(tw,{to:"/login",replace:!0})}function BT({role:n}){const{profile:e,loading:t}=Zy();return t?null:e?.role===n?l.jsx(mf,{}):l.jsx(tw,{to:"/",replace:!0})}function qT(){const{user:n,profile:e,loading:t}=Zy(),s=Yt();return b.useEffect(()=>{if(!t){if(!n){s("/login",{replace:!0});return}e?.role==="teacher"?s("/docente",{replace:!0}):e?.role==="student"&&s("/studente",{replace:!0})}},[n,e,t,s]),null}function _3(){return l.jsxs(v3,{children:[l.jsx(ER,{}),l.jsxs(cR,{children:[l.jsx(et,{path:"/login",element:l.jsx(VP,{})}),l.jsx(et,{path:"/logout",element:l.jsx(UP,{})}),l.jsx(et,{path:"/register",element:l.jsx(zP,{})}),l.jsx(et,{path:"/",element:l.jsx(qT,{})}),l.jsxs(et,{element:l.jsx(y3,{}),children:[l.jsx(et,{path:"/test",element:l.jsx(BP,{})}),l.jsx(et,{element:l.jsx(BT,{role:"student"}),children:l.jsxs(et,{path:"/studente",element:l.jsx(t4,{}),children:[l.jsx(et,{index:!0,element:l.jsx(r4,{})}),l.jsx(et,{path:"corsi",element:l.jsx(x4,{})}),l.jsx(et,{path:"scopri",element:l.jsx(O4,{})}),l.jsx(et,{path:"profilo",element:l.jsx(D4,{})}),l.jsx(et,{path:"impostazioni",element:l.jsx(P4,{})}),l.jsx(et,{path:"faq",element:l.jsx(L4,{})}),l.jsx(et,{path:"corsi/:id",element:l.jsx(b4,{})}),l.jsx(et,{path:"corsi/:id/sezioni/:secId/lezioni/:lezId",element:l.jsx(A4,{})})]})}),l.jsx(et,{element:l.jsx(BT,{role:"teacher"}),children:l.jsxs(et,{path:"/docente",element:l.jsx(U4,{}),children:[l.jsx(et,{path:"corsi",element:l.jsx(X4,{})}),l.jsx(et,{path:"corsi/:courseId",element:l.jsx(W4,{})}),l.jsx(et,{path:"dashboard",element:l.jsx(s3,{})}),l.jsx(et,{path:"corsi/:courseId/dashboard",element:l.jsx(r3,{})}),l.jsx(et,{path:"profilo",element:l.jsx(a3,{})}),l.jsx(et,{path:"profilo/modifica",element:l.jsx(p3,{})}),l.jsx(et,{path:"valutazioni",element:l.jsx(g3,{})}),l.jsx(et,{path:"corsi/:courseId/sezioni/:secId/lezioni/nuova",element:l.jsx(e3,{})}),l.jsx(et,{path:"corsi/:courseId/sezioni/:secId/lezioni/:lezId",element:l.jsx(t3,{})}),l.jsx(et,{path:"corsi/:courseId/sezioni/nuova",element:l.jsx(Z4,{})}),l.jsx(et,{path:"corsi/:courseId/sezioni/:secId/lezioni/:lezId/modifica",element:l.jsx(J4,{})}),l.jsx(et,{path:"corsi/nuovo",element:l.jsx(n3,{})}),l.jsx(et,{path:"corsi/:courseId/modifica",element:l.jsx(i3,{})})]})})]}),l.jsx(et,{path:"*",element:l.jsx(qT,{})})]})]})}g1.createRoot(document.getElementById("root")).render(l.jsx(b.StrictMode,{children:l.jsx(vR,{children:l.jsx(_3,{})})}));
